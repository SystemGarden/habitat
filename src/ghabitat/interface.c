/*
 * DO NOT EDIT THIS FILE - it is generated by Glade.
 */

/*
 * Interface code for the ghabitat GUI
 * Copyright System Garden 1999-2008. All rights reserved.
 * Note: changes to this file should be merged with its predecessor
 */

#ifdef HAVE_CONFIG_H
#  include <config.h>
#endif

#include <sys/types.h>
#include <sys/stat.h>
#include <unistd.h>
#include <string.h>

#include <gdk/gdkkeysyms.h>
#include <gtk/gtk.h>

#include "callbacks.h"
#include "interface.h"
#include "support.h"

#include "main.h"
#include "gmcgraph.h"

#include "../pixmaps/zoomin_x2.xpm"		/* NS 24 nov 00 */
#include "../pixmaps/zoomin_y2.xpm"		/* NS 24 nov 00 */
#include "../pixmaps/zoomout4.xpm"		/* NS 18 jan 01 */
#include "../pixmaps/morewidget2.xpm"		/* NS 28 aug 00 */
#include "../pixmaps/lesswidget2.xpm"		/* NS 28 aug 00 */
#include "../pixmaps/habitat_139.xpm"		/* NS 10 mar 08 */
#include "../pixmaps/error1.xpm"		/* NS 28 nov 01 */

GtkWidget*
create_baseWindow (void)
{
  GtkWidget *baseWindow;
  GtkWidget *bars;
  GtkWidget *menubar;
  GtkWidget *menufile;
  GtkWidget *menufile_menu;
  GtkAccelGroup *menufile_menu_accels;
  guint tmp_key;
  GtkWidget *open;
  GtkWidget *close;
  GtkWidget *host;
  GtkWidget *route;
  GtkWidget *repository;
  GtkWidget *separator4;
  GtkWidget *exit;
  GtkWidget *view;
  GtkWidget *view_menu;
  GtkAccelGroup *view_menu_accels;
  GtkWidget *update;
  GtkWidget *update_node;
  GtkWidget *update_all_nodes;
  GtkWidget *separator5;
  GtkWidget *raw_data;
  GtkWidget *separator8;
  GtkWidget *view_logs;
  GtkWidget *save_viewed_data;
  GtkWidget *send_data_to_application;
  GtkWidget *send_data_to_email;
  GtkWidget *collect;
  GtkWidget *collect_menu;
  GtkAccelGroup *collect_menu_accels;
  GtkWidget *local_collect;
  GtkWidget *menugraph;
  GtkWidget *menugraph_menu;
  GtkAccelGroup *menugraph_menu_accels;
  GtkWidget *zoom_in;
  GtkWidget *zoom_in_menu;
  GtkAccelGroup *zoom_in_menu_accels;
  GtkWidget *zoom_in_horizontally;
  GtkWidget *zoom_in_vertically;
  GtkWidget *zoom_out;
  GtkWidget *show_rulers;
  GtkWidget *hide_rulers;
  GtkWidget *show_axis;
  GtkWidget *hide_axis;
  GtkWidget *view_histogram;
  GtkWidget *view_curves;
  GtkWidget *set_curve_colour;
  GtkWidget *save_graph_image;
  GtkWidget *save_graph_setup;
  GtkWidget *menuhelp;
  GtkWidget *menuhelp_menu;
  GtkAccelGroup *menuhelp_menu_accels;
  GtkWidget *logging_level;
  GtkWidget *logging_level_menu;
  GtkAccelGroup *logging_level_menu_accels;
  GtkWidget *logging_level_normal;
  GtkWidget *logging_level_high;
  GtkWidget *logging_level_higher;
  GtkWidget *separator7;
  GtkWidget *readme;
  GtkWidget *user_manual;
  GtkWidget *manual_pages;
  GtkWidget *manual_pages_menu;
  GtkAccelGroup *manual_pages_menu_accels;
  GtkWidget *manual_pages_ghabitat;
  GtkWidget *manual_pages_clockwork;
  GtkWidget *manual_pages_habget;
  GtkWidget *manual_pages_habput;
  GtkWidget *manual_pages_configuration;
  GtkWidget *separator1;
  GtkWidget *web_systemgardencom;
  GtkWidget *web_systemgardencom_menu;
  GtkAccelGroup *web_systemgardencom_menu_accels;
  GtkWidget *web_system_garden;
  GtkWidget *web_habitat;
  GtkWidget *web_harvest;
  GtkWidget *separator2;
  GtkWidget *about_habitat;
  GtkWidget *panes;
  GtkWidget *treescrollwin;
  GtkWidget *treeviewport;
  GtkWidget *tree;
  GtkWidget *label7;
  GtkWidget *presentationbox;
  GtkWidget *graphframe;
  GtkWidget *graphpanes;
  /*GtkWidget *graph;*/		/* made global NS */
  GtkWidget *ctlhandbox;
  GtkWidget *ctlbox;
  GtkWidget *ctlframe;
  GtkWidget *ctltab;
  GtkWidget *ctlbar2;
  GtkWidget *ctlbar1;
  GtkWidget *tmp_toolbar_icon;
  GdkBitmap *tmp_mask;		/* NS 22 feb 00 */
  GdkPixmap *tmp_pixmap;	/* NS 22 feb 00 */
  GdkColormap *tmp_colormap;	/* NS 22 feb 00 */
  GtkWidget *ctl_zoomin_x;
  GtkWidget *ctl_zoomin_y;
  GtkWidget *ctl_zoomout_y;
  GtkWidget *ctl_morewidgets;
  GtkWidget *ctl_lesswidgets;
  GtkWidget *listpanes;
  GtkWidget *instanceframe;
  GtkWidget *instancescroll;
  GtkWidget *instanceview;
  GtkWidget *attributeframe;
  GtkWidget *attributescroll;
  GtkWidget *attributeview;
  GtkWidget *splash_view;
  GtkWidget *splash_vbox;
  GtkWidget *splash_hbox;
  GtkWidget *splash_logo;
  GtkWidget *splash_address;
  GtkWidget *tableframe;
  GtkWidget *tablescroll;
  GtkWidget *edtreeframe;
  GtkWidget *edtreescroll;
  GtkWidget *edtree_view;
  GtkWidget *edtree;
  GtkWidget *stathbox;
  GtkWidget *log_popup_button;
  GtkWidget *log_popup_button_pix;
  GtkWidget *stathistory;
  GtkWidget *messagebar;
  GtkWidget *progressbar;
  GtkAccelGroup *accel_group;
  GtkTooltips *tooltips;

  tooltips = gtk_tooltips_new ();

  accel_group = gtk_accel_group_new ();

  baseWindow = gtk_window_new (GTK_WINDOW_TOPLEVEL);
  gtk_widget_set_name (baseWindow, "baseWindow");
  gtk_object_set_data (GTK_OBJECT (baseWindow), "baseWindow", baseWindow);
  gtk_widget_set_usize (baseWindow, 750, 540);
  gtk_window_set_title (GTK_WINDOW (baseWindow), "Habitat");
  gtk_window_set_policy (GTK_WINDOW (baseWindow), TRUE, TRUE, TRUE);

  gtk_object_set_data (GTK_OBJECT (baseWindow), "tooltips", tooltips);/*NS*/

  bars = gtk_vbox_new (FALSE, 0);
  gtk_widget_set_name (bars, "bars");
  gtk_widget_ref (bars);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "bars", bars,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (bars);
  gtk_container_add (GTK_CONTAINER (baseWindow), bars);

  menubar = gtk_menu_bar_new ();
  gtk_widget_set_name (menubar, "menubar");
  gtk_widget_ref (menubar);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "menubar", menubar,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (menubar);
  gtk_box_pack_start (GTK_BOX (bars), menubar, FALSE, TRUE, 0);
  gtk_widget_set_usize (menubar, -2, 28);

  menufile = gtk_menu_item_new_with_label ("File");
  gtk_widget_set_name (menufile, "menufile");
  gtk_widget_ref (menufile);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "menufile", menufile,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (menufile);
  gtk_container_add (GTK_CONTAINER (menubar), menufile);
  gtk_tooltips_set_tip (tooltips, menufile, "Click to open files and exit", NULL);

  menufile_menu = gtk_menu_new ();
  gtk_widget_set_name (menufile_menu, "menufile_menu");
  gtk_widget_ref (menufile_menu);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "menufile_menu", menufile_menu,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_menu_item_set_submenu (GTK_MENU_ITEM (menufile), menufile_menu);
  menufile_menu_accels = gtk_menu_ensure_uline_accel_group (GTK_MENU (menufile_menu));

  open = gtk_menu_item_new_with_label ("");
  tmp_key = gtk_label_parse_uline (GTK_LABEL (GTK_BIN (open)->child),
                                   "_Open...");
  gtk_widget_add_accelerator (open, "activate_item", menufile_menu_accels,
                              tmp_key, 0, 0);
  gtk_widget_set_name (open, "open");
  gtk_widget_ref (open);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "open", open,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (open);
  gtk_container_add (GTK_CONTAINER (menufile_menu), open);
  gtk_tooltips_set_tip (tooltips, open, "Open a Ringstore data file", NULL);
  gtk_widget_add_accelerator (open, "activate", accel_group,
                              GDK_O, GDK_CONTROL_MASK,
                              GTK_ACCEL_VISIBLE);

  close = gtk_menu_item_new_with_label ("");
  tmp_key = gtk_label_parse_uline (GTK_LABEL (GTK_BIN (close)->child),
                                   "_Close...");
  gtk_widget_add_accelerator (close, "activate_item", menufile_menu_accels,
                              tmp_key, 0, 0);
  gtk_widget_set_name (close, "close");
  gtk_widget_ref (close);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "close", close,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (close);
  gtk_container_add (GTK_CONTAINER (menufile_menu), close);
  gtk_tooltips_set_tip (tooltips, close, "Close a Ringstore data file", NULL);
  gtk_widget_add_accelerator (close, "activate", accel_group,
                              GDK_C, GDK_CONTROL_MASK,
                              GTK_ACCEL_VISIBLE);

  host = gtk_menu_item_new_with_label ("");
  tmp_key = gtk_label_parse_uline (GTK_LABEL (GTK_BIN (host)->child),
                                   "_Host...");
  gtk_widget_add_accelerator (host, "activate_item", menufile_menu_accels,
                              tmp_key, 0, 0);
  gtk_widget_set_name (host, "host");
  gtk_widget_ref (host);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "host", host,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (host);
  gtk_container_add (GTK_CONTAINER (menufile_menu), host);
  gtk_tooltips_set_tip (tooltips, host, "Open host data from the repository or direct from the host", NULL);
  gtk_widget_add_accelerator (host, "activate", accel_group,
                              GDK_H, GDK_CONTROL_MASK,
                              GTK_ACCEL_VISIBLE);

  route = gtk_menu_item_new_with_label ("");
  tmp_key = gtk_label_parse_uline (GTK_LABEL (GTK_BIN (route)->child),
                                   "_Route...");
  gtk_widget_add_accelerator (route, "activate_item", menufile_menu_accels,
                              tmp_key, 0, 0);
  gtk_widget_set_name (route, "route");
  gtk_widget_ref (route);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "route", route,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (route);
  gtk_container_add (GTK_CONTAINER (menufile_menu), route);
  gtk_tooltips_set_tip (tooltips, route, "Open data from a route specification", NULL);
  gtk_widget_add_accelerator (route, "activate", accel_group,
                              GDK_R, GDK_CONTROL_MASK,
                              GTK_ACCEL_VISIBLE);

  repository = gtk_menu_item_new_with_label ("Repository...");
  gtk_widget_set_name (repository, "repository");
  gtk_widget_ref (repository);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "repository", repository,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (repository);
  gtk_container_add (GTK_CONTAINER (menufile_menu), repository);
  gtk_tooltips_set_tip (tooltips, repository, "Update the repository settings", NULL);

  separator4 = gtk_menu_item_new ();
  gtk_widget_set_name (separator4, "separator4");
  gtk_widget_ref (separator4);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "separator4", separator4,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (separator4);
  gtk_container_add (GTK_CONTAINER (menufile_menu), separator4);
  gtk_widget_set_sensitive (separator4, FALSE);

  exit = gtk_menu_item_new_with_label ("");
  tmp_key = gtk_label_parse_uline (GTK_LABEL (GTK_BIN (exit)->child),
                                   "E_xit");
  gtk_widget_add_accelerator (exit, "activate_item", menufile_menu_accels,
                              tmp_key, 0, 0);
  gtk_widget_set_name (exit, "exit");
  gtk_widget_ref (exit);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "exit", exit,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (exit);
  gtk_container_add (GTK_CONTAINER (menufile_menu), exit);
  gtk_tooltips_set_tip (tooltips, exit, "Exit the application", NULL);
  gtk_widget_add_accelerator (exit, "activate", accel_group,
                              GDK_X, GDK_CONTROL_MASK,
                              GTK_ACCEL_VISIBLE);

  view = gtk_menu_item_new_with_label ("View");
  gtk_widget_set_name (view, "view");
  gtk_widget_ref (view);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "view", view,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (view);
  gtk_container_add (GTK_CONTAINER (menubar), view);

  view_menu = gtk_menu_new ();
  gtk_widget_set_name (view_menu, "view_menu");
  gtk_widget_ref (view_menu);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "view_menu", view_menu,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_menu_item_set_submenu (GTK_MENU_ITEM (view), view_menu);
  view_menu_accels = gtk_menu_ensure_uline_accel_group (GTK_MENU (view_menu));

  update = gtk_menu_item_new_with_label ("Update View");
  gtk_widget_set_name (update, "update");
  gtk_widget_ref (update);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "update", update,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (update);
  gtk_container_add (GTK_CONTAINER (view_menu), update);
  gtk_tooltips_set_tip (tooltips, update, "Update view of selected datastore", NULL);
  gtk_widget_add_accelerator (update, "activate", accel_group,
                              GDK_L, GDK_CONTROL_MASK,
                              GTK_ACCEL_VISIBLE);

  update_node = gtk_menu_item_new_with_label ("Update Current Choice");
  gtk_widget_set_name (update_node, "update_node");
  gtk_widget_ref (update_node);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "update_node", update_node,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (update_node);
  gtk_container_add (GTK_CONTAINER (view_menu), update_node);
  gtk_tooltips_set_tip (tooltips, update_node, "Update selected route in choice tree", NULL);
  gtk_widget_add_accelerator (update_node, "activate", accel_group,
                              GDK_F9, 0,
                              GTK_ACCEL_VISIBLE);

  update_all_nodes = gtk_menu_item_new_with_label ("Update All Choices");
  gtk_widget_set_name (update_all_nodes, "update_all_nodes");
  gtk_widget_ref (update_all_nodes);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "update_all_nodes", update_all_nodes,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (update_all_nodes);
  gtk_container_add (GTK_CONTAINER (view_menu), update_all_nodes);
  gtk_tooltips_set_tip (tooltips, update_all_nodes, "Update all routes in the choice tree", NULL);

  separator5 = gtk_menu_item_new ();
  gtk_widget_set_name (separator5, "separator5");
  gtk_widget_ref (separator5);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "separator5", separator5,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (separator5);
  gtk_container_add (GTK_CONTAINER (view_menu), separator5);
  gtk_widget_set_sensitive (separator5, FALSE);

  raw_data = gtk_check_menu_item_new_with_label ("Browse Raw Data");
  gtk_widget_set_name (raw_data, "raw_data");
  gtk_widget_ref (raw_data);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "raw_data", raw_data,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (raw_data);
  gtk_container_add (GTK_CONTAINER (view_menu), raw_data);
  gtk_tooltips_set_tip (tooltips, raw_data, "Include raw data in choice tree", NULL);
  gtk_check_menu_item_set_active (GTK_CHECK_MENU_ITEM (raw_data), TRUE);
  gtk_check_menu_item_set_show_toggle (GTK_CHECK_MENU_ITEM (raw_data), TRUE);

  separator8 = gtk_menu_item_new ();
  gtk_widget_set_name (separator8, "separator8");
  gtk_widget_ref (separator8);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "separator8", separator8,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (separator8);
  gtk_container_add (GTK_CONTAINER (view_menu), separator8);
  gtk_widget_set_sensitive (separator8, FALSE);

  view_logs = gtk_menu_item_new_with_label ("View Logs...");
  gtk_widget_set_name (view_logs, "view_logs");
  gtk_widget_ref (view_logs);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "view_logs", view_logs,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (view_logs);
  gtk_container_add (GTK_CONTAINER (view_menu), view_logs);
  gtk_tooltips_set_tip (tooltips, view_logs, "Popup window of application logs", NULL);

  save_viewed_data = gtk_menu_item_new_with_label ("Save Viewed Data...");
  gtk_widget_set_name (save_viewed_data, "save_viewed_data");
  gtk_widget_ref (save_viewed_data);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "save_viewed_data", save_viewed_data,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (save_viewed_data);
  gtk_container_add (GTK_CONTAINER (view_menu), save_viewed_data);
  gtk_tooltips_set_tip (tooltips, save_viewed_data, "Write the data shown in the graph or table to a file", NULL);

  send_data_to_application = gtk_menu_item_new_with_label ("Send Data to Application...");
  gtk_widget_set_name (send_data_to_application, "send_data_to_application");
  gtk_widget_ref (send_data_to_application);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "send_data_to_application", send_data_to_application,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (send_data_to_application);
  gtk_container_add (GTK_CONTAINER (view_menu), send_data_to_application);
  gtk_tooltips_set_tip (tooltips, send_data_to_application, "Send viewed data to an application", NULL);

  send_data_to_email = gtk_menu_item_new_with_label ("Send Data via E-mail...");
  gtk_widget_set_name (send_data_to_email, "send_data_to_email");
  gtk_widget_ref (send_data_to_email);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "send_data_to_email", send_data_to_email,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (send_data_to_email);
  gtk_container_add (GTK_CONTAINER (view_menu), send_data_to_email);
  gtk_tooltips_set_tip (tooltips, send_data_to_email, "Send viewed data using an e-mail", NULL);

  collect = gtk_menu_item_new_with_label ("Collect");
  gtk_widget_set_name (collect, "collect");
  gtk_widget_ref (collect);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "collect", collect,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (collect);
  gtk_container_add (GTK_CONTAINER (menubar), collect);

  collect_menu = gtk_menu_new ();
  gtk_widget_set_name (collect_menu, "collect_menu");
  gtk_widget_ref (collect_menu);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "collect_menu", collect_menu,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_menu_item_set_submenu (GTK_MENU_ITEM (collect), collect_menu);
  collect_menu_accels = gtk_menu_ensure_uline_accel_group (GTK_MENU (collect_menu));

  local_collect = gtk_menu_item_new_with_label ("Local Data...");
  gtk_widget_set_name (local_collect, "local_collect");
  gtk_widget_ref (local_collect);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "local_collect", local_collect,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (local_collect);
  gtk_container_add (GTK_CONTAINER (collect_menu), local_collect);
  gtk_tooltips_set_tip (tooltips, local_collect, "Starts or stops collection of local public data", NULL);

  menugraph = gtk_menu_item_new_with_label ("Graph");
  gtk_widget_set_name (menugraph, "menugraph");
  gtk_widget_ref (menugraph);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "menugraph", menugraph,
                            (GtkDestroyNotify) gtk_widget_unref);
  /* gtk_widget_show (menugraph); */	/* not shown initially - NS 18 apr 01 */
  gtk_container_add (GTK_CONTAINER (menubar), menugraph);
  gtk_tooltips_set_tip (tooltips, menugraph, "Graph manipulation functions", NULL);

  menugraph_menu = gtk_menu_new ();
  gtk_widget_set_name (menugraph_menu, "menugraph_menu");
  gtk_widget_ref (menugraph_menu);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "menugraph_menu", menugraph_menu,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_menu_item_set_submenu (GTK_MENU_ITEM (menugraph), menugraph_menu);
  menugraph_menu_accels = gtk_menu_ensure_uline_accel_group (GTK_MENU (menugraph_menu));

  zoom_in = gtk_menu_item_new_with_label ("Zoom In");
  gtk_widget_set_name (zoom_in, "zoom_in");
  gtk_widget_ref (zoom_in);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "zoom_in", zoom_in,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (zoom_in);
  gtk_container_add (GTK_CONTAINER (menugraph_menu), zoom_in);

  zoom_in_menu = gtk_menu_new ();
  gtk_widget_set_name (zoom_in_menu, "zoom_in_menu");
  gtk_widget_ref (zoom_in_menu);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "zoom_in_menu", zoom_in_menu,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_menu_item_set_submenu (GTK_MENU_ITEM (zoom_in), zoom_in_menu);
  zoom_in_menu_accels = gtk_menu_ensure_uline_accel_group (GTK_MENU (zoom_in_menu));

  zoom_in_horizontally = gtk_menu_item_new_with_label ("Horizontally");
  gtk_widget_set_name (zoom_in_horizontally, "zoom_in_horizontally");
  gtk_widget_ref (zoom_in_horizontally);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "zoom_in_horizontally", zoom_in_horizontally,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (zoom_in_horizontally);
  gtk_container_add (GTK_CONTAINER (zoom_in_menu), zoom_in_horizontally);
  gtk_widget_add_accelerator (zoom_in_horizontally, "activate", accel_group,
                              GDK_plus, GDK_SHIFT_MASK,
                              GTK_ACCEL_VISIBLE);

  zoom_in_vertically = gtk_menu_item_new_with_label ("Vertically");
  gtk_widget_set_name (zoom_in_vertically, "zoom_in_vertically");
  gtk_widget_ref (zoom_in_vertically);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "zoom_in_vertically", zoom_in_vertically,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (zoom_in_vertically);
  gtk_container_add (GTK_CONTAINER (zoom_in_menu), zoom_in_vertically);
  gtk_widget_add_accelerator (zoom_in_vertically, "activate", accel_group,
                              GDK_asciicircum, GDK_SHIFT_MASK,
                              GTK_ACCEL_VISIBLE);

  zoom_out = gtk_menu_item_new_with_label ("Zoom out");
  gtk_widget_set_name (zoom_out, "zoom_out");
  gtk_widget_ref (zoom_out);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "zoom_out", zoom_out,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (zoom_out);
  gtk_container_add (GTK_CONTAINER (menugraph_menu), zoom_out);
  gtk_widget_add_accelerator (zoom_out, "activate", accel_group,
                              GDK_minus, 0,
                              GTK_ACCEL_VISIBLE);

  show_rulers = gtk_menu_item_new_with_label ("Show Rulers");
  gtk_widget_set_name (show_rulers, "show_rulers");
  gtk_widget_ref (show_rulers);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "show_rulers", show_rulers,
                            (GtkDestroyNotify) gtk_widget_unref);
  /* gtk_widget_show (show_rulers); */	/* not normally shown as its default -NS */
  gtk_container_add (GTK_CONTAINER (menugraph_menu), show_rulers);
  gtk_tooltips_set_tip (tooltips, show_rulers, "Show ruler measurements on the border of the graph window", NULL);

  hide_rulers = gtk_menu_item_new_with_label ("Hide Rulers");
  gtk_widget_set_name (hide_rulers, "hide_rulers");
  gtk_widget_ref (hide_rulers);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "hide_rulers", hide_rulers,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (hide_rulers);
  gtk_container_add (GTK_CONTAINER (menugraph_menu), hide_rulers);
  gtk_tooltips_set_tip (tooltips, hide_rulers, "Hide ruler measurements on the border of the graph window", NULL);

  show_axis = gtk_menu_item_new_with_label ("Show Axis");
  gtk_widget_set_name (show_axis, "show_axis");
  gtk_widget_ref (show_axis);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "show_axis", show_axis,
                            (GtkDestroyNotify) gtk_widget_unref);
  /* gtk_widget_show (show_axis); */	/* not initially displayed as is default -NS */
  gtk_container_add (GTK_CONTAINER (menugraph_menu), show_axis);
  gtk_tooltips_set_tip (tooltips, show_axis, "Show graph axis with labels", NULL);

  hide_axis = gtk_menu_item_new_with_label ("Hide Axis");
  gtk_widget_set_name (hide_axis, "hide_axis");
  gtk_widget_ref (hide_axis);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "hide_axis", hide_axis,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (hide_axis);
  gtk_container_add (GTK_CONTAINER (menugraph_menu), hide_axis);
  gtk_tooltips_set_tip (tooltips, hide_axis, "Hide graph axis", NULL);

  view_histogram = gtk_menu_item_new_with_label ("View Histogram");
  gtk_widget_set_name (view_histogram, "view_histogram");
  gtk_widget_ref (view_histogram);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "view_histogram", view_histogram,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (view_histogram);
  gtk_container_add (GTK_CONTAINER (menugraph_menu), view_histogram);
  gtk_tooltips_set_tip (tooltips, view_histogram, "View graph data as a histogram", NULL);

  view_curves = gtk_menu_item_new_with_label ("View Curves");
  gtk_widget_set_name (view_curves, "view_curves");
  gtk_widget_ref (view_curves);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "view_curves", view_curves,
                            (GtkDestroyNotify) gtk_widget_unref);
  /* gtk_widget_show (view_curves); */	/* not shown initially as is default -NS */
  gtk_container_add (GTK_CONTAINER (menugraph_menu), view_curves);
  gtk_tooltips_set_tip (tooltips, view_curves, "View graph data as curves", NULL);

  set_curve_colour = gtk_menu_item_new_with_label ("Customise Curve Colour");
  gtk_widget_set_name (set_curve_colour, "set_curve_colour");
  gtk_widget_ref (set_curve_colour);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "set_curve_colour", set_curve_colour,
                            (GtkDestroyNotify) gtk_widget_unref);
  /*gtk_widget_show (set_curve_colour);*/ /* not yet implemented -NS 07dec01 */
  gtk_container_add (GTK_CONTAINER (menugraph_menu), set_curve_colour);
  gtk_tooltips_set_tip (tooltips, set_curve_colour, "Customise the graph colours", NULL);

  save_graph_image = gtk_menu_item_new_with_label ("Save Graph Image...");
  gtk_widget_set_name (save_graph_image, "save_graph_image");
  gtk_widget_ref (save_graph_image);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "save_graph_image", save_graph_image,
                            (GtkDestroyNotify) gtk_widget_unref);
  /*gtk_widget_show (save_graph_image);*//*not yet implemented -NS 07dec01 */
  gtk_container_add (GTK_CONTAINER (menugraph_menu), save_graph_image);
  gtk_tooltips_set_tip (tooltips, save_graph_image, "Save the graph to disk as an image", NULL);

  save_graph_setup = gtk_menu_item_new_with_label ("Save Graph Setup");
  gtk_widget_set_name (save_graph_setup, "save_graph_setup");
  gtk_widget_ref (save_graph_setup);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "save_graph_setup", save_graph_setup,
                            (GtkDestroyNotify) gtk_widget_unref);
  /*gtk_widget_show (save_graph_setup);*//*not currently implemented -NS 07dec01 */
  gtk_container_add (GTK_CONTAINER (menugraph_menu), save_graph_setup);
  gtk_tooltips_set_tip (tooltips, save_graph_setup, "Save graph configuration and viewing details to disk", NULL);

  menuhelp = gtk_menu_item_new_with_label ("Help");
  gtk_widget_set_name (menuhelp, "menuhelp");
  gtk_widget_ref (menuhelp);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "menuhelp", menuhelp,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (menuhelp);
  gtk_container_add (GTK_CONTAINER (menubar), menuhelp);
  gtk_tooltips_set_tip (tooltips, menuhelp, "Click here to get help", NULL);
  gtk_menu_item_right_justify (GTK_MENU_ITEM (menuhelp));

  menuhelp_menu = gtk_menu_new ();
  gtk_widget_set_name (menuhelp_menu, "menuhelp_menu");
  gtk_widget_ref (menuhelp_menu);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "menuhelp_menu", menuhelp_menu,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_menu_item_set_submenu (GTK_MENU_ITEM (menuhelp), menuhelp_menu);
  menuhelp_menu_accels = gtk_menu_ensure_uline_accel_group (GTK_MENU (menuhelp_menu));

  logging_level = gtk_menu_item_new_with_label ("Logging level");
  gtk_widget_set_name (logging_level, "logging_level");
  gtk_widget_ref (logging_level);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "logging_level", logging_level,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (logging_level);
  gtk_container_add (GTK_CONTAINER (menuhelp_menu), logging_level);

  logging_level_menu = gtk_menu_new ();
  gtk_widget_set_name (logging_level_menu, "logging_level_menu");
  gtk_widget_ref (logging_level_menu);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "logging_level_menu", logging_level_menu,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_menu_item_set_submenu (GTK_MENU_ITEM (logging_level), logging_level_menu);
  logging_level_menu_accels = gtk_menu_ensure_uline_accel_group (GTK_MENU (logging_level_menu));

  logging_level_normal = gtk_menu_item_new_with_label ("Normal (Information)");
  gtk_widget_set_name (logging_level_normal, "logging_level_normal");
  gtk_widget_ref (logging_level_normal);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "logging_level_normal", logging_level_normal,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (logging_level_normal);
  gtk_container_add (GTK_CONTAINER (logging_level_menu), logging_level_normal);

  logging_level_high = gtk_menu_item_new_with_label ("High (diagnostic)");
  gtk_widget_set_name (logging_level_high, "logging_level_high");
  gtk_widget_ref (logging_level_high);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "logging_level_high", logging_level_high,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (logging_level_high);
  gtk_container_add (GTK_CONTAINER (logging_level_menu), logging_level_high);

  logging_level_higher = gtk_menu_item_new_with_label ("Higher (debug)");
  gtk_widget_set_name (logging_level_higher, "logging_level_higher");
  gtk_widget_ref (logging_level_higher);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "logging_level_higher", logging_level_higher,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (logging_level_higher);
  gtk_container_add (GTK_CONTAINER (logging_level_menu), logging_level_higher);

  separator7 = gtk_menu_item_new ();
  gtk_widget_set_name (separator7, "separator7");
  gtk_widget_ref (separator7);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "separator7", separator7,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (separator7);
  gtk_container_add (GTK_CONTAINER (menuhelp_menu), separator7);
  gtk_widget_set_sensitive (separator7, FALSE);

  readme = gtk_menu_item_new_with_label ("README");
  gtk_widget_set_name (readme, "readme");
  gtk_widget_ref (readme);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "readme", readme,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (readme);
  gtk_container_add (GTK_CONTAINER (menuhelp_menu), readme);

  user_manual = gtk_menu_item_new_with_label ("User Manual");
  gtk_widget_set_name (user_manual, "user_manual");
  gtk_widget_ref (user_manual);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "user_manual", user_manual,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (user_manual);
  gtk_container_add (GTK_CONTAINER (menuhelp_menu), user_manual);
  gtk_tooltips_set_tip (tooltips, user_manual, "How to use this application", NULL);

  manual_pages = gtk_menu_item_new_with_label ("Manual Pages");
  gtk_widget_set_name (manual_pages, "manual_pages");
  gtk_widget_ref (manual_pages);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "manual_pages", manual_pages,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (manual_pages);
  gtk_container_add (GTK_CONTAINER (menuhelp_menu), manual_pages);

  manual_pages_menu = gtk_menu_new ();
  gtk_widget_set_name (manual_pages_menu, "manual_pages_menu");
  gtk_widget_ref (manual_pages_menu);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "manual_pages_menu", manual_pages_menu,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_menu_item_set_submenu (GTK_MENU_ITEM (manual_pages), manual_pages_menu);
  manual_pages_menu_accels = gtk_menu_ensure_uline_accel_group (GTK_MENU (manual_pages_menu));

  manual_pages_ghabitat = gtk_menu_item_new_with_label ("ghabitat (1)");
  gtk_widget_set_name (manual_pages_ghabitat, "manual_pages_ghabitat");
  gtk_widget_ref (manual_pages_ghabitat);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "manual_pages_ghabitat", manual_pages_ghabitat,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (manual_pages_ghabitat);
  gtk_container_add (GTK_CONTAINER (manual_pages_menu), manual_pages_ghabitat);

  manual_pages_clockwork = gtk_menu_item_new_with_label ("clockwork (1)");
  gtk_widget_set_name (manual_pages_clockwork, "manual_pages_clockwork");
  gtk_widget_ref (manual_pages_clockwork);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "manual_pages_clockwork", manual_pages_clockwork,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (manual_pages_clockwork);
  gtk_container_add (GTK_CONTAINER (manual_pages_menu), manual_pages_clockwork);

  manual_pages_habget = gtk_menu_item_new_with_label ("habget (1)");
  gtk_widget_set_name (manual_pages_habget, "manual_pages_habget");
  gtk_widget_ref (manual_pages_habget);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "manual_pages_habget", manual_pages_habget,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (manual_pages_habget);
  gtk_container_add (GTK_CONTAINER (manual_pages_menu), manual_pages_habget);

  manual_pages_habput = gtk_menu_item_new_with_label ("habput (1)");
  gtk_widget_set_name (manual_pages_habput, "manual_pages_habput");
  gtk_widget_ref (manual_pages_habput);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "manual_pages_habput", manual_pages_habput,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (manual_pages_habput);
  gtk_container_add (GTK_CONTAINER (manual_pages_menu), manual_pages_habput);

  manual_pages_configuration = gtk_menu_item_new_with_label ("configuration (5)");
  gtk_widget_set_name (manual_pages_configuration, "manual_pages_configuration");
  gtk_widget_ref (manual_pages_configuration);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "manual_pages_configuration", manual_pages_configuration,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (manual_pages_configuration);
  gtk_container_add (GTK_CONTAINER (manual_pages_menu), manual_pages_configuration);

  separator1 = gtk_menu_item_new ();
  gtk_widget_set_name (separator1, "separator1");
  gtk_widget_ref (separator1);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "separator1", separator1,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (separator1);
  gtk_container_add (GTK_CONTAINER (menuhelp_menu), separator1);
  gtk_widget_set_sensitive (separator1, FALSE);

  web_systemgardencom = gtk_menu_item_new_with_label ("SystemGarden.com");
  gtk_widget_set_name (web_systemgardencom, "web_systemgardencom");
  gtk_widget_ref (web_systemgardencom);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "web_systemgardencom", web_systemgardencom,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (web_systemgardencom);
  gtk_container_add (GTK_CONTAINER (menuhelp_menu), web_systemgardencom);

  web_systemgardencom_menu = gtk_menu_new ();
  gtk_widget_set_name (web_systemgardencom_menu, "web_systemgardencom_menu");
  gtk_widget_ref (web_systemgardencom_menu);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "web_systemgardencom_menu", web_systemgardencom_menu,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_menu_item_set_submenu (GTK_MENU_ITEM (web_systemgardencom), web_systemgardencom_menu);
  web_systemgardencom_menu_accels = gtk_menu_ensure_uline_accel_group (GTK_MENU (web_systemgardencom_menu));

  web_system_garden = gtk_menu_item_new_with_label ("Home");
  gtk_widget_set_name (web_system_garden, "web_system_garden");
  gtk_widget_ref (web_system_garden);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "web_system_garden", web_system_garden,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (web_system_garden);
  gtk_container_add (GTK_CONTAINER (web_systemgardencom_menu), web_system_garden);
  gtk_tooltips_set_tip (tooltips, web_system_garden, "Describes the creators", NULL);

  web_habitat = gtk_menu_item_new_with_label ("Habitat");
  gtk_widget_set_name (web_habitat, "web_habitat");
  gtk_widget_ref (web_habitat);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "web_habitat", web_habitat,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (web_habitat);
  gtk_container_add (GTK_CONTAINER (web_systemgardencom_menu), web_habitat);

  web_harvest = gtk_menu_item_new_with_label ("Harvest");
  gtk_widget_set_name (web_harvest, "web_harvest");
  gtk_widget_ref (web_harvest);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "web_harvest", web_harvest,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (web_harvest);
  gtk_container_add (GTK_CONTAINER (web_systemgardencom_menu), web_harvest);
  gtk_tooltips_set_tip (tooltips, web_harvest, "Describes the respository and analysis system", NULL);

  separator2 = gtk_menu_item_new ();
  gtk_widget_set_name (separator2, "separator2");
  gtk_widget_ref (separator2);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "separator2", separator2,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (separator2);
  gtk_container_add (GTK_CONTAINER (menuhelp_menu), separator2);
  gtk_widget_set_sensitive (separator2, FALSE);

  about_habitat = gtk_menu_item_new_with_label ("About Habitat...");
  gtk_widget_set_name (about_habitat, "about_habitat");
  gtk_widget_ref (about_habitat);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "about_habitat", about_habitat,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (about_habitat);
  gtk_container_add (GTK_CONTAINER (menuhelp_menu), about_habitat);
  gtk_tooltips_set_tip (tooltips, about_habitat, "Describes this application", NULL);

  panes = gtk_hpaned_new ();
  gtk_widget_set_name (panes, "panes");
  gtk_widget_ref (panes);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "panes", panes,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (panes);
  gtk_box_pack_start (GTK_BOX (bars), panes, TRUE, TRUE, 0);
  gtk_widget_set_usize (panes, 750, 500);
  gtk_tooltips_set_tip (tooltips, panes, "Drag handle between tree and data sections to change their display areas", NULL);

  treescrollwin = gtk_scrolled_window_new (NULL, NULL);
  gtk_widget_set_name (treescrollwin, "treescrollwin");
  gtk_widget_ref (treescrollwin);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "treescrollwin", treescrollwin,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (treescrollwin);
  gtk_paned_pack1 (GTK_PANED (panes), treescrollwin, FALSE, TRUE);
  gtk_widget_set_usize (treescrollwin, 200, -2);
  gtk_scrolled_window_set_policy (GTK_SCROLLED_WINDOW (treescrollwin), GTK_POLICY_AUTOMATIC, GTK_POLICY_AUTOMATIC);

  treeviewport = gtk_viewport_new (NULL, NULL);
  gtk_widget_set_name (treeviewport, "treeviewport");
  gtk_widget_ref (treeviewport);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "treeviewport", treeviewport,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (treeviewport);
  gtk_container_add (GTK_CONTAINER (treescrollwin), treeviewport);
  gtk_viewport_set_shadow_type (GTK_VIEWPORT (treeviewport), GTK_SHADOW_NONE);

  tree = gtk_ctree_new (1, 0);
  gtk_widget_set_name (tree, "tree");
  gtk_widget_ref (tree);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "tree", tree,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (tree);
  gtk_container_add (GTK_CONTAINER (treeviewport), tree);
  gtk_tooltips_set_tip (tooltips, tree, "Select choices in the tree to change the data display on the right", NULL);
  gtk_clist_set_column_width (GTK_CLIST (tree), 0, 80);
  gtk_clist_column_titles_hide (GTK_CLIST (tree));
  /* following added by NS 1 nov 00 */
  gtk_ctree_set_line_style (GTK_CTREE(tree), GTK_CTREE_LINES_DOTTED);
  gtk_ctree_set_expander_style (GTK_CTREE(tree), GTK_CTREE_EXPANDER_SQUARE);
  gtk_ctree_set_show_stub(GTK_CTREE(tree), FALSE);
  gtk_ctree_set_indent(GTK_CTREE(tree), 15);
  gtk_ctree_set_spacing(GTK_CTREE(tree), 3);
  /* end of changes */

  label7 = gtk_label_new ("label7");
  gtk_widget_set_name (label7, "label7");
  gtk_widget_ref (label7);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "label7", label7,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (label7);
  gtk_clist_set_column_widget (GTK_CLIST (tree), 0, label7);

  presentationbox = gtk_vbox_new (FALSE, 0);
  gtk_widget_set_name (presentationbox, "presentationbox");
  gtk_widget_ref (presentationbox);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "presentationbox", presentationbox,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (presentationbox);
  gtk_paned_pack2 (GTK_PANED (panes), presentationbox, TRUE, TRUE);

  graphframe = gtk_frame_new (NULL);
  gtk_widget_set_name (graphframe, "graphframe");
  gtk_widget_ref (graphframe);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "graphframe", graphframe,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_box_pack_start (GTK_BOX (presentationbox), graphframe, TRUE, TRUE, 0);

  graphpanes = gtk_hpaned_new ();
  gtk_widget_set_name (graphpanes, "graphpanes");
  gtk_widget_ref (graphpanes);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "graphpanes", graphpanes,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (graphpanes);
  gtk_container_add (GTK_CONTAINER (graphframe), graphpanes);
  gtk_paned_set_handle_size (GTK_PANED (graphpanes), 8);
  gtk_paned_set_gutter_size (GTK_PANED (graphpanes), 9);
  gtk_paned_set_position (GTK_PANED (graphpanes), 400);

  /* graph creation using a gtkdatabox done in gmcgraph 19 may 00 */
  graph = gmcgraph_init(baseWindow, graphpanes);

  ctlhandbox = gtk_handle_box_new ();
  gtk_widget_set_name (ctlhandbox, "ctlhandbox");
  gtk_widget_ref (ctlhandbox);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "ctlhandbox", ctlhandbox,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (ctlhandbox);
  gtk_paned_pack2 (GTK_PANED (graphpanes), ctlhandbox, TRUE, TRUE);
  gtk_handle_box_set_handle_position (GTK_HANDLE_BOX (ctlhandbox), GTK_POS_TOP);

  ctlbox = gtk_vbox_new (FALSE, 0);
  gtk_widget_set_name (ctlbox, "ctlbox");
  gtk_widget_ref (ctlbox);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "ctlbox", ctlbox,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (ctlbox);
  gtk_container_add (GTK_CONTAINER (ctlhandbox), ctlbox);

  ctlframe = gtk_frame_new ("Zoom & Scale");
  gtk_widget_set_name (ctlframe, "ctlframe");
  gtk_widget_ref (ctlframe);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "ctlframe", ctlframe,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (ctlframe);
  gtk_box_pack_start (GTK_BOX (ctlbox), ctlframe, FALSE, FALSE, 0);

  ctltab = gtk_table_new (2, 1, FALSE);
  gtk_widget_set_name (ctltab, "ctltab");
  gtk_widget_ref (ctltab);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "ctltab", ctltab,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (ctltab);
  gtk_container_add (GTK_CONTAINER (ctlframe), ctltab);

  ctlbar2 = gtk_toolbar_new (GTK_ORIENTATION_HORIZONTAL, GTK_TOOLBAR_ICONS);
  gtk_widget_set_name (ctlbar2, "ctlbar2");
  gtk_widget_ref (ctlbar2);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "ctlbar2", ctlbar2,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_table_attach (GTK_TABLE (ctltab), ctlbar2, 0, 1, 1, 2,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);

  ctlbar1 = gtk_toolbar_new (GTK_ORIENTATION_HORIZONTAL, GTK_TOOLBAR_ICONS);
  gtk_widget_set_name (ctlbar1, "ctlbar1");
  gtk_widget_ref (ctlbar1);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "ctlbar1", ctlbar1,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (ctlbar1);
  gtk_table_attach (GTK_TABLE (ctltab), ctlbar1, 0, 1, 0, 1,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);

  /* static colour pixmap/icon - NS 28 aug 00 */
  tmp_colormap = gtk_widget_get_colormap (baseWindow);
  tmp_pixmap = gdk_pixmap_colormap_create_from_xpm_d
       (NULL, tmp_colormap, &tmp_mask, NULL, zoomin_x2);
  tmp_toolbar_icon = gtk_pixmap_new (tmp_pixmap, tmp_mask);
  gdk_pixmap_unref (tmp_pixmap);
  gdk_bitmap_unref (tmp_mask);
  ctl_zoomin_x = gtk_toolbar_append_element (GTK_TOOLBAR (ctlbar1),
                                GTK_TOOLBAR_CHILD_BUTTON,
                                NULL,
                                "",
                                "Zoom in or expand x-axis", NULL,
                                tmp_toolbar_icon, NULL, NULL);
  gtk_widget_set_name (ctl_zoomin_x, "ctl_zoomin_x");
  gtk_widget_ref (ctl_zoomin_x);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "ctl_zoomin_x", ctl_zoomin_x,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (ctl_zoomin_x);

  /* static colour pixmap/icon - NS 28 aug 00 */
  tmp_colormap = gtk_widget_get_colormap (baseWindow);
  tmp_pixmap = gdk_pixmap_colormap_create_from_xpm_d
       (NULL, tmp_colormap, &tmp_mask, NULL, zoomin_y2);
  tmp_toolbar_icon = gtk_pixmap_new (tmp_pixmap, tmp_mask);
  gdk_pixmap_unref (tmp_pixmap);
  gdk_bitmap_unref (tmp_mask);
  ctl_zoomin_y = gtk_toolbar_append_element (GTK_TOOLBAR (ctlbar1),
                                GTK_TOOLBAR_CHILD_BUTTON,
                                NULL,
                                "",
                                "Zoom in or expand y-axis", NULL,
                                tmp_toolbar_icon, NULL, NULL);
  gtk_widget_set_name (ctl_zoomin_y, "ctl_zoomin_y");
  gtk_widget_ref (ctl_zoomin_y);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "ctl_zoomin_y", ctl_zoomin_y,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (ctl_zoomin_y);

  /* static colour pixmap/icon - NS 28 aug 00 */
  tmp_colormap = gtk_widget_get_colormap (baseWindow);
  tmp_pixmap = gdk_pixmap_colormap_create_from_xpm_d
       (NULL, tmp_colormap, &tmp_mask, NULL, zoomout4);
  tmp_toolbar_icon = gtk_pixmap_new (tmp_pixmap, tmp_mask);
  gdk_pixmap_unref (tmp_pixmap);
  gdk_bitmap_unref (tmp_mask);
  ctl_zoomout_y = gtk_toolbar_append_element (GTK_TOOLBAR (ctlbar1),
                                GTK_TOOLBAR_CHILD_BUTTON,
                                NULL,
                                "",
                                "Zoom out both axis", NULL,
                                tmp_toolbar_icon, NULL, NULL);
  gtk_widget_set_name (ctl_zoomout_y, "ctl_zoomout_y");
  gtk_widget_ref (ctl_zoomout_y);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "ctl_zoomout_y", ctl_zoomout_y,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (ctl_zoomout_y);

  /* static colour pixmap/icon - NS 28 aug 00 */
  tmp_colormap = gtk_widget_get_colormap (baseWindow);
  tmp_pixmap = gdk_pixmap_colormap_create_from_xpm_d
       (NULL, tmp_colormap, &tmp_mask, NULL, morewidget2);
  tmp_toolbar_icon = gtk_pixmap_new (tmp_pixmap, tmp_mask);
  gdk_pixmap_unref (tmp_pixmap);
  gdk_bitmap_unref (tmp_mask);
  ctl_morewidgets = gtk_toolbar_append_element (GTK_TOOLBAR (ctlbar1),
                                GTK_TOOLBAR_CHILD_BUTTON,
                                NULL,
                                "",
                                "Add scale and offset columns to the curve selection list", NULL,
                                tmp_toolbar_icon, NULL, NULL);
  gtk_widget_set_name (ctl_morewidgets, "ctl_morewidgets");
  gtk_widget_ref (ctl_morewidgets);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "ctl_morewidgets", ctl_morewidgets,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (ctl_morewidgets);

  /* static colour pixmap/icon - NS 28 aug 00 */
  tmp_colormap = gtk_widget_get_colormap (baseWindow);
  tmp_pixmap = gdk_pixmap_colormap_create_from_xpm_d
       (NULL, tmp_colormap, &tmp_mask, NULL, lesswidget2);
  tmp_toolbar_icon = gtk_pixmap_new (tmp_pixmap, tmp_mask);
  gdk_pixmap_unref (tmp_pixmap);
  gdk_bitmap_unref (tmp_mask);
  ctl_lesswidgets = gtk_toolbar_append_element (GTK_TOOLBAR (ctlbar1),
                                GTK_TOOLBAR_CHILD_BUTTON,
                                NULL,
                                "",
                                "Remove scale and offset columns from the curve selection list", NULL,
                                tmp_toolbar_icon, NULL, NULL);
  gtk_widget_set_name (ctl_lesswidgets, "ctl_lesswidgets");
  gtk_widget_ref (ctl_lesswidgets);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "ctl_lesswidgets", ctl_lesswidgets,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_hide (ctl_lesswidgets);	/* explicitly hide -NS 19apr01 */

  listpanes = gtk_vpaned_new ();
  gtk_widget_set_name (listpanes, "listpanes");
  gtk_widget_ref (listpanes);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "listpanes", listpanes,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (listpanes);
  gtk_box_pack_start (GTK_BOX (ctlbox), listpanes, TRUE, TRUE, 0);
  gtk_paned_set_handle_size (GTK_PANED (listpanes), 1);
  gtk_paned_set_gutter_size (GTK_PANED (listpanes), 1);
  gtk_paned_set_position (GTK_PANED (listpanes), 1);

  instanceframe = gtk_frame_new ("Instance");
  gtk_widget_set_name (instanceframe, "instanceframe");
  gtk_widget_ref (instanceframe);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "instanceframe", instanceframe,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_paned_pack1 (GTK_PANED (listpanes), instanceframe, FALSE, TRUE);

  instancescroll = gtk_scrolled_window_new (NULL, NULL);
  gtk_widget_set_name (instancescroll, "instancescroll");
  gtk_widget_ref (instancescroll);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "instancescroll", instancescroll,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (instancescroll);
  gtk_container_add (GTK_CONTAINER (instanceframe), instancescroll);
  gtk_scrolled_window_set_policy (GTK_SCROLLED_WINDOW (instancescroll), GTK_POLICY_AUTOMATIC, GTK_POLICY_AUTOMATIC);

  instanceview = gtk_viewport_new (NULL, NULL);
  gtk_widget_set_name (instanceview, "instanceview");
  gtk_widget_ref (instanceview);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "instanceview", instanceview,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (instanceview);
  gtk_container_add (GTK_CONTAINER (instancescroll), instanceview);

  attributeframe = gtk_frame_new (NULL);
  gtk_widget_set_name (attributeframe, "attributeframe");
  gtk_widget_ref (attributeframe);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "attributeframe", attributeframe,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (attributeframe);
  gtk_paned_pack2 (GTK_PANED (listpanes), attributeframe, TRUE, TRUE);

  attributescroll = gtk_scrolled_window_new (NULL, NULL);
  gtk_widget_set_name (attributescroll, "attributescroll");
  gtk_widget_ref (attributescroll);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "attributescroll", attributescroll,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (attributescroll);
  gtk_container_add (GTK_CONTAINER (attributeframe), attributescroll);
  gtk_scrolled_window_set_policy (GTK_SCROLLED_WINDOW (attributescroll), GTK_POLICY_AUTOMATIC, GTK_POLICY_AUTOMATIC);

  attributeview = gtk_viewport_new (NULL, NULL);
  gtk_widget_set_name (attributeview, "attributeview");
  gtk_widget_ref (attributeview);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "attributeview", attributeview,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (attributeview);
  gtk_container_add (GTK_CONTAINER (attributescroll), attributeview);

  splash_view = gtk_viewport_new (NULL, NULL);
  gtk_widget_set_name (splash_view, "splash_view");
  gtk_widget_ref (splash_view);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "splash_view", splash_view,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (splash_view);
  gtk_box_pack_start (GTK_BOX (presentationbox), splash_view, TRUE, TRUE, 0);

  splash_vbox = gtk_vbox_new (FALSE, 0);
  gtk_widget_set_name (splash_vbox, "splash_vbox");
  gtk_widget_ref (splash_vbox);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "splash_vbox", splash_vbox,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (splash_vbox);
  gtk_container_add (GTK_CONTAINER (splash_view), splash_vbox);

  splash_hbox = gtk_hbox_new (FALSE, 0);
  gtk_widget_set_name (splash_hbox, "splash_hbox");
  gtk_widget_ref (splash_hbox);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "splash_hbox", splash_hbox,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (splash_hbox);
  gtk_box_pack_start (GTK_BOX (splash_vbox), splash_hbox, TRUE, TRUE, 0);

  /* static colour/pixmap NS 10 mar 08 */
  tmp_colormap = gtk_widget_get_colormap (baseWindow);
  tmp_pixmap = gdk_pixmap_colormap_create_from_xpm_d
       (NULL, tmp_colormap, &tmp_mask, NULL, habitat_139);
  splash_logo = gtk_pixmap_new (tmp_pixmap, tmp_mask);
  gdk_pixmap_unref (tmp_pixmap);
  gdk_bitmap_unref (tmp_mask);
  gtk_widget_set_name (splash_logo, "splash_logo");
  gtk_widget_ref (splash_logo);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "splash_logo", splash_logo,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (splash_logo);
  gtk_box_pack_start (GTK_BOX (splash_hbox), splash_logo, TRUE, TRUE, 0);
  gtk_misc_set_alignment (GTK_MISC (splash_logo), 0.5, 1);

  splash_address = gtk_label_new ("www.systemgarden.com\nwelcome@systemgarden.com");
  gtk_widget_set_name (splash_address, "splash_address");
  gtk_widget_ref (splash_address);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "splash_address", splash_address,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (splash_address);
  gtk_box_pack_start (GTK_BOX (splash_vbox), splash_address, TRUE, TRUE, 0);

  tableframe = gtk_frame_new ("");
  gtk_widget_set_name (tableframe, "tableframe");
  gtk_widget_ref (tableframe);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "tableframe", tableframe,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_box_pack_start (GTK_BOX (presentationbox), tableframe, TRUE, TRUE, 0);

  tablescroll = gtk_scrolled_window_new (NULL, NULL);
  gtk_widget_set_name (tablescroll, "tablescroll");
  gtk_widget_ref (tablescroll);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "tablescroll", tablescroll,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (tablescroll);
  gtk_container_add (GTK_CONTAINER (tableframe), tablescroll);
  gtk_scrolled_window_set_policy (GTK_SCROLLED_WINDOW (tablescroll), GTK_POLICY_AUTOMATIC, GTK_POLICY_AUTOMATIC);

  edtreeframe = gtk_frame_new ("");
  gtk_widget_set_name (edtreeframe, "edtreeframe");
  gtk_widget_ref (edtreeframe);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "edtreeframe", edtreeframe,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_box_pack_start (GTK_BOX (presentationbox), edtreeframe, TRUE, TRUE, 0);

  edtreescroll = gtk_scrolled_window_new (NULL, NULL);
  gtk_widget_set_name (edtreescroll, "edtreescroll");
  gtk_widget_ref (edtreescroll);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "edtreescroll", edtreescroll,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (edtreescroll);
  gtk_container_add (GTK_CONTAINER (edtreeframe), edtreescroll);
  gtk_scrolled_window_set_policy (GTK_SCROLLED_WINDOW (edtreescroll), GTK_POLICY_AUTOMATIC, GTK_POLICY_AUTOMATIC);

  edtree_view = gtk_viewport_new (NULL, NULL);
  gtk_widget_set_name (edtree_view, "edtree_view");
  gtk_widget_ref (edtree_view);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "edtree_view", edtree_view,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (edtree_view);
  gtk_container_add (GTK_CONTAINER (edtreescroll), edtree_view);

  edtree = gtk_tree_new ();
  gtk_widget_set_name (edtree, "edtree");
  gtk_widget_ref (edtree);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "edtree", edtree,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (edtree);
  gtk_container_add (GTK_CONTAINER (edtree_view), edtree);
  gtk_tree_set_selection_mode (GTK_TREE (edtree), GTK_SELECTION_EXTENDED);

  stathbox = gtk_hbox_new (FALSE, 0);
  gtk_widget_set_name (stathbox, "stathbox");
  gtk_widget_ref (stathbox);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "stathbox", stathbox,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (stathbox);
  gtk_box_pack_start (GTK_BOX (bars), stathbox, FALSE, TRUE, 0);

  log_popup_button = gtk_button_new ();
  gtk_widget_set_name (log_popup_button, "log_popup_button");
  gtk_widget_ref (log_popup_button);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "log_popup_button", log_popup_button,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (log_popup_button);
  gtk_box_pack_start (GTK_BOX (stathbox), log_popup_button, FALSE, FALSE, 0);
  gtk_tooltips_set_tip (tooltips, log_popup_button, "View log history", NULL);

  /* static colour/pixmap NS 06 jul 05 */
  tmp_colormap = gtk_widget_get_colormap (baseWindow);
  tmp_pixmap = gdk_pixmap_colormap_create_from_xpm_d
       (NULL, tmp_colormap, &tmp_mask, NULL, error1);
  log_popup_button_pix = gtk_pixmap_new (tmp_pixmap, tmp_mask);
  gdk_pixmap_unref (tmp_pixmap);
  gdk_bitmap_unref (tmp_mask);
  gtk_widget_set_name (log_popup_button_pix, "log_popup_button_pix");
  gtk_widget_ref (log_popup_button_pix);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "log_popup_button_pix", log_popup_button_pix,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (log_popup_button_pix);
  gtk_container_add (GTK_CONTAINER (log_popup_button), log_popup_button_pix);

  stathistory = gtk_arrow_new (GTK_ARROW_RIGHT, GTK_SHADOW_OUT);
  gtk_widget_set_name (stathistory, "stathistory");
  gtk_widget_ref (stathistory);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "stathistory", stathistory,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (stathistory);
  gtk_box_pack_start (GTK_BOX (stathbox), stathistory, FALSE, TRUE, 0);
  gtk_widget_set_usize (stathistory, 9, 9);

  messagebar = gtk_statusbar_new ();
  gtk_widget_set_name (messagebar, "messagebar");
  gtk_widget_ref (messagebar);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "messagebar", messagebar,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (messagebar);
  gtk_box_pack_start (GTK_BOX (stathbox), messagebar, TRUE, TRUE, 0);
  gtk_widget_set_usize (messagebar, 140, -2);

  progressbar = gtk_progress_bar_new ();
  gtk_widget_set_name (progressbar, "progressbar");
  gtk_widget_ref (progressbar);
  gtk_object_set_data_full (GTK_OBJECT (baseWindow), "progressbar", progressbar,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (progressbar);
  gtk_box_pack_start (GTK_BOX (stathbox), progressbar, FALSE, FALSE, 0);
  gtk_progress_set_show_text (GTK_PROGRESS (progressbar), TRUE);
  gtk_progress_set_format_string (GTK_PROGRESS (progressbar), "");
  gtk_progress_set_text_alignment (GTK_PROGRESS (progressbar), 0.05, 0.5);

  gtk_signal_connect (GTK_OBJECT (baseWindow), "destroy_event",
                      GTK_SIGNAL_FUNC (on_baseWindow_destroy_event),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (baseWindow), "delete_event",
                      GTK_SIGNAL_FUNC (on_baseWindow_delete_event),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (open), "activate",
                      GTK_SIGNAL_FUNC (on_open_activate),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (close), "activate",
                      GTK_SIGNAL_FUNC (on_close_activate),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (host), "activate",
                      GTK_SIGNAL_FUNC (on_host_activate),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (route), "activate",
                      GTK_SIGNAL_FUNC (on_route_activate),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (repository), "activate",
                      GTK_SIGNAL_FUNC (on_repository_activate),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (exit), "activate",
                      GTK_SIGNAL_FUNC (on_exit_activate),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (update), "activate",
                      GTK_SIGNAL_FUNC (on_update_activate),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (update_node), "activate",
                      GTK_SIGNAL_FUNC (on_update_node_activate),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (update_all_nodes), "activate",
                      GTK_SIGNAL_FUNC (on_update_all_nodes_activate),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (raw_data), "activate",
                      GTK_SIGNAL_FUNC (on_raw_data_activate),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (view_logs), "activate",
                      GTK_SIGNAL_FUNC (on_view_logs_activate),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (save_viewed_data), "activate",
                      GTK_SIGNAL_FUNC (on_save_viewed_data_activate),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (send_data_to_application), "activate",
                      GTK_SIGNAL_FUNC (on_send_data_to_application_activate),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (send_data_to_email), "activate",
                      GTK_SIGNAL_FUNC (on_send_data_to_email_activate),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (local_collect), "activate",
                      GTK_SIGNAL_FUNC (on_local_collect_activate),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (zoom_in_horizontally), "activate",
                      GTK_SIGNAL_FUNC (on_zoom_in_horizontally_activate),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (zoom_in_vertically), "activate",
                      GTK_SIGNAL_FUNC (on_zoom_in_vertically_activate),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (zoom_out), "activate",
                      GTK_SIGNAL_FUNC (on_zoom_out_activate),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (show_rulers), "activate",
                      GTK_SIGNAL_FUNC (on_show_rulers_activate),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (hide_rulers), "activate",
                      GTK_SIGNAL_FUNC (on_hide_rulers_activate),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (show_axis), "activate",
                      GTK_SIGNAL_FUNC (on_show_axis_activate),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (hide_axis), "activate",
                      GTK_SIGNAL_FUNC (on_hide_axis_activate),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (view_histogram), "activate",
                      GTK_SIGNAL_FUNC (on_view_histogram_activate),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (view_curves), "activate",
                      GTK_SIGNAL_FUNC (on_view_curves_activate),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (set_curve_colour), "activate",
                      GTK_SIGNAL_FUNC (on_set_curve_colour_activate),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (save_graph_image), "activate",
                      GTK_SIGNAL_FUNC (on_save_graph_image_activate),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (save_graph_setup), "activate",
                      GTK_SIGNAL_FUNC (on_save_graph_setup_activate),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (logging_level_normal), "activate",
                      GTK_SIGNAL_FUNC (on_logging_level_normal_activate),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (logging_level_high), "activate",
                      GTK_SIGNAL_FUNC (on_logging_level_high_activate),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (logging_level_higher), "activate",
                      GTK_SIGNAL_FUNC (on_logging_level_higher_activate),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (readme), "activate",
                      GTK_SIGNAL_FUNC (on_readme_activate),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (user_manual), "activate",
                      GTK_SIGNAL_FUNC (on_user_manual_activate),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (manual_pages_ghabitat), "activate",
                      GTK_SIGNAL_FUNC (on_manual_pages_ghabitat_activate),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (manual_pages_clockwork), "activate",
                      GTK_SIGNAL_FUNC (on_manual_pages_clockwork_activate),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (manual_pages_habget), "activate",
                      GTK_SIGNAL_FUNC (on_manual_pages_habget_activate),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (manual_pages_habput), "activate",
                      GTK_SIGNAL_FUNC (on_manual_pages_habput_activate),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (manual_pages_configuration), "activate",
                      GTK_SIGNAL_FUNC (on_manual_pages_configuration_activate),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (web_system_garden), "activate",
                      GTK_SIGNAL_FUNC (on_web_system_garden_activate),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (web_habitat), "activate",
                      GTK_SIGNAL_FUNC (on_web_habitat_activate),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (web_harvest), "activate",
                      GTK_SIGNAL_FUNC (on_web_harvest_activate),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (about_habitat), "activate",
                      GTK_SIGNAL_FUNC (on_about_habitat_activate),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (tree), "tree_select_row",
                      GTK_SIGNAL_FUNC (on_tree_select_row),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (tree), "tree_expand",
                      GTK_SIGNAL_FUNC (on_tree_expand),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (tree), "button_press_event",
                      GTK_SIGNAL_FUNC (on_tree_button_press_event),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (ctl_zoomin_x), "clicked",
                      GTK_SIGNAL_FUNC (on_ctl_zoomin_x_clicked),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (ctl_zoomin_y), "clicked",
                      GTK_SIGNAL_FUNC (on_ctl_zoomin_y_clicked),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (ctl_zoomout_y), "clicked",
                      GTK_SIGNAL_FUNC (on_ctl_zoomout_y_clicked),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (ctl_morewidgets), "clicked",
                      GTK_SIGNAL_FUNC (on_ctl_morewidgets_clicked),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (ctl_lesswidgets), "clicked",
                      GTK_SIGNAL_FUNC (on_ctl_lesswidgets_clicked),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (edtree), "button_press_event",
                      GTK_SIGNAL_FUNC (on_edtree_button_press_event),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (log_popup_button), "clicked",
                      GTK_SIGNAL_FUNC (on_log_popup_button_clicked),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (stathistory), "button_release_event",
                      GTK_SIGNAL_FUNC (on_stathistory_button_release_event),
                      NULL);

  gtk_object_set_data (GTK_OBJECT (baseWindow), "tooltips", tooltips);

  gtk_window_add_accel_group (GTK_WINDOW (baseWindow), accel_group);

  return baseWindow;
}

GtkWidget*
create_about_dialog (void)
{
  GtkWidget *about_dialog;
  GtkWidget *about_dialog_vbox;
  GtkWidget *about_vbox;
  GtkWidget *about_habitat;
  GtkWidget *about_name;
  GtkWidget *about_text;
  GtkWidget *dialog_action_area1;
  GtkWidget *about_button_box;
  guint about_button_key;
  GtkWidget *about_button;
  GdkBitmap *tmp_mask;		/* NS 18 apr 00 */
  GdkPixmap *tmp_pixmap;	/* NS 18 apr 00 */
  GdkColormap *tmp_colormap;	/* NS 18 apr 00 */
  GtkAccelGroup *accel_group;

  accel_group = gtk_accel_group_new ();

  about_dialog = gtk_dialog_new ();
  gtk_widget_set_name (about_dialog, "about_dialog");
  gtk_object_set_data (GTK_OBJECT (about_dialog), "about_dialog", about_dialog);
  gtk_window_set_title (GTK_WINDOW (about_dialog), "About Habitat");
  GTK_WINDOW (about_dialog)->type = GTK_WINDOW_DIALOG;
  gtk_window_set_policy (GTK_WINDOW (about_dialog), TRUE, TRUE, FALSE);

  about_dialog_vbox = GTK_DIALOG (about_dialog)->vbox;
  gtk_widget_set_name (about_dialog_vbox, "about_dialog_vbox");
  gtk_object_set_data (GTK_OBJECT (about_dialog), "about_dialog_vbox", about_dialog_vbox);
  gtk_widget_show (about_dialog_vbox);

  about_vbox = gtk_vbox_new (FALSE, 0);
  gtk_widget_set_name (about_vbox, "about_vbox");
  gtk_widget_ref (about_vbox);
  gtk_object_set_data_full (GTK_OBJECT (about_dialog), "about_vbox", about_vbox,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (about_vbox);
  gtk_box_pack_start (GTK_BOX (about_dialog_vbox), about_vbox, TRUE, TRUE, 0);

  /* static colour/pixmap NS 10 mar 08 */
  tmp_colormap = gtk_widget_get_colormap (baseWindow);
  tmp_pixmap = gdk_pixmap_colormap_create_from_xpm_d
       (NULL, tmp_colormap, &tmp_mask, NULL, habitat_139);
  about_habitat = gtk_pixmap_new (tmp_pixmap, tmp_mask);
  gdk_pixmap_unref (tmp_pixmap);
  gdk_bitmap_unref (tmp_mask);
  gtk_widget_set_name (about_habitat, "about_habitat");
  gtk_widget_ref (about_habitat);
  gtk_object_set_data_full (GTK_OBJECT (about_dialog), "about_habitat", about_habitat,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (about_habitat);
  gtk_box_pack_start (GTK_BOX (about_vbox), about_habitat, TRUE, TRUE, 0);
  gtk_misc_set_alignment (GTK_MISC (about_habitat), 0.5, 1);
  gtk_misc_set_padding (GTK_MISC (about_habitat), 0, 13);

  about_name = gtk_label_new ("Habitat");
  gtk_widget_set_name (about_name, "about_name");
  gtk_widget_ref (about_name);
  gtk_object_set_data_full (GTK_OBJECT (about_dialog), "about_name", about_name,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (about_name);
  gtk_box_pack_start (GTK_BOX (about_vbox), about_name, TRUE, TRUE, 0);
  gtk_misc_set_padding (GTK_MISC (about_name), 20, 20);

  about_text = gtk_label_new ("Nigel Stuckey\nnigel.stuckey@systemgarden.com\n\nCopyright System Garden Ltd 2001-2005\nAll rights reserved");
  gtk_widget_set_name (about_text, "about_text");
  gtk_widget_ref (about_text);
  gtk_object_set_data_full (GTK_OBJECT (about_dialog), "about_text", about_text,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (about_text);
  gtk_box_pack_start (GTK_BOX (about_vbox), about_text, TRUE, TRUE, 0);
  gtk_misc_set_padding (GTK_MISC (about_text), 20, 15);

  dialog_action_area1 = GTK_DIALOG (about_dialog)->action_area;
  gtk_widget_set_name (dialog_action_area1, "dialog_action_area1");
  gtk_object_set_data (GTK_OBJECT (about_dialog), "dialog_action_area1", dialog_action_area1);
  gtk_widget_show (dialog_action_area1);
  gtk_container_set_border_width (GTK_CONTAINER (dialog_action_area1), 10);

  about_button_box = gtk_hbutton_box_new ();
  gtk_widget_set_name (about_button_box, "about_button_box");
  gtk_widget_ref (about_button_box);
  gtk_object_set_data_full (GTK_OBJECT (about_dialog), "about_button_box", about_button_box,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (about_button_box);
  gtk_box_pack_start (GTK_BOX (dialog_action_area1), about_button_box, TRUE, TRUE, 0);
  gtk_container_set_border_width (GTK_CONTAINER (about_button_box), 5);

  about_button = gtk_button_new_with_label ("");
  about_button_key = gtk_label_parse_uline (GTK_LABEL (GTK_BIN (about_button)->child),
                                   "_OK");
  gtk_widget_add_accelerator (about_button, "clicked", accel_group,
                              about_button_key, GDK_MOD1_MASK, (GtkAccelFlags) 0);
  gtk_widget_set_name (about_button, "about_button");
  gtk_widget_ref (about_button);
  gtk_object_set_data_full (GTK_OBJECT (about_dialog), "about_button", about_button,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (about_button);
  gtk_container_add (GTK_CONTAINER (about_button_box), about_button);
  gtk_widget_add_accelerator (about_button, "clicked", accel_group,
                              GDK_O, GDK_MOD1_MASK,
                              GTK_ACCEL_VISIBLE);
  gtk_widget_add_accelerator (about_button, "clicked", accel_group,
                              GDK_Return, 0,
                              GTK_ACCEL_VISIBLE);
  gtk_widget_add_accelerator (about_button, "clicked", accel_group,
                              GDK_Escape, 0,
                              GTK_ACCEL_VISIBLE);

  gtk_signal_connect (GTK_OBJECT (about_button), "clicked",
                      GTK_SIGNAL_FUNC (on_about_button_clicked),
                      NULL);

  gtk_widget_grab_focus (about_button);
  gtk_window_add_accel_group (GTK_WINDOW (about_dialog), accel_group);

  return about_dialog;
}

GtkWidget*
create_file_open_select (void)
{
  GtkWidget *file_open_select;
  GtkWidget *file_open_okbutton;
  GtkWidget *file_open_cancelbutton;
  GtkAccelGroup *accel_group;

  accel_group = gtk_accel_group_new ();

  file_open_select = gtk_file_selection_new ("Select Storage File");
  gtk_widget_set_name (file_open_select, "file_open_select");
  gtk_object_set_data (GTK_OBJECT (file_open_select), "file_open_select", file_open_select);
  gtk_container_set_border_width (GTK_CONTAINER (file_open_select), 10);
  gtk_window_set_position (GTK_WINDOW (file_open_select), GTK_WIN_POS_MOUSE);

  file_open_okbutton = GTK_FILE_SELECTION (file_open_select)->ok_button;
  gtk_widget_set_name (file_open_okbutton, "file_open_okbutton");
  gtk_object_set_data (GTK_OBJECT (file_open_select), "file_open_okbutton", file_open_okbutton);
  gtk_widget_show (file_open_okbutton);
  GTK_WIDGET_SET_FLAGS (file_open_okbutton, GTK_CAN_DEFAULT);
  gtk_widget_add_accelerator (file_open_okbutton, "clicked", accel_group,
                              GDK_O, GDK_MOD1_MASK,
                              GTK_ACCEL_VISIBLE);

  file_open_cancelbutton = GTK_FILE_SELECTION (file_open_select)->cancel_button;
  gtk_widget_set_name (file_open_cancelbutton, "file_open_cancelbutton");
  gtk_object_set_data (GTK_OBJECT (file_open_select), "file_open_cancelbutton", file_open_cancelbutton);
  gtk_widget_show (file_open_cancelbutton);
  GTK_WIDGET_SET_FLAGS (file_open_cancelbutton, GTK_CAN_DEFAULT);
  gtk_widget_add_accelerator (file_open_cancelbutton, "clicked", accel_group,
                              GDK_Escape, 0,
                              GTK_ACCEL_VISIBLE);
  gtk_widget_add_accelerator (file_open_cancelbutton, "clicked", accel_group,
                              GDK_C, GDK_MOD1_MASK,
                              GTK_ACCEL_VISIBLE);

  gtk_signal_connect (GTK_OBJECT (file_open_okbutton), "clicked",
                      GTK_SIGNAL_FUNC (on_file_open_okbutton_clicked),
                      file_open_select);
  gtk_signal_connect (GTK_OBJECT (file_open_cancelbutton), "clicked",
                      GTK_SIGNAL_FUNC (on_file_open_cancelbutton_clicked),
                      file_open_select);

  gtk_window_add_accel_group (GTK_WINDOW (file_open_select), accel_group);

  /* added by nigel 15 sep 00 -- try var or own dir */
  if (access("../var", (R_OK | W_OK | X_OK)) == 0)
       gtk_file_selection_set_filename( GTK_FILE_SELECTION (file_open_select), 
					"../var/" );
#if 0
  else /*if (access("src", (R_OK | W_OK | X_OK)) == 0)*/
       gtk_file_selection_set_filename( GTK_FILE_SELECTION (file_open_select), 
					"./*.ts" );
#endif
  /* end of additions */

  return file_open_select;
}

GtkWidget*
create_curve_colour (void)
{
  GtkWidget *curve_colour;
  GtkWidget *vbox1;
  GtkWidget *hbox2;
  GtkWidget *cc_curve_frame;
  GtkWidget *clist1;
  GtkWidget *label2;
  GtkWidget *label3;
  GtkWidget *cc_colour_frame;
  GtkWidget *colour_select;
  GtkWidget *hbuttonbox2;
  GtkWidget *colour_ok;
  GtkWidget *colour_help;

  curve_colour = gtk_window_new (GTK_WINDOW_TOPLEVEL);
  gtk_widget_set_name (curve_colour, "curve_colour");
  gtk_object_set_data (GTK_OBJECT (curve_colour), "curve_colour", curve_colour);
  gtk_window_set_title (GTK_WINDOW (curve_colour), "Set Curve Colour");

  vbox1 = gtk_vbox_new (FALSE, 0);
  gtk_widget_set_name (vbox1, "vbox1");
  gtk_widget_ref (vbox1);
  gtk_object_set_data_full (GTK_OBJECT (curve_colour), "vbox1", vbox1,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (vbox1);
  gtk_container_add (GTK_CONTAINER (curve_colour), vbox1);

  hbox2 = gtk_hbox_new (FALSE, 0);
  gtk_widget_set_name (hbox2, "hbox2");
  gtk_widget_ref (hbox2);
  gtk_object_set_data_full (GTK_OBJECT (curve_colour), "hbox2", hbox2,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (hbox2);
  gtk_box_pack_start (GTK_BOX (vbox1), hbox2, TRUE, TRUE, 0);

  cc_curve_frame = gtk_frame_new ("Select curve");
  gtk_widget_set_name (cc_curve_frame, "cc_curve_frame");
  gtk_widget_ref (cc_curve_frame);
  gtk_object_set_data_full (GTK_OBJECT (curve_colour), "cc_curve_frame", cc_curve_frame,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (cc_curve_frame);
  gtk_box_pack_start (GTK_BOX (hbox2), cc_curve_frame, TRUE, TRUE, 0);

  clist1 = gtk_clist_new (2);
  gtk_widget_set_name (clist1, "clist1");
  gtk_widget_ref (clist1);
  gtk_object_set_data_full (GTK_OBJECT (curve_colour), "clist1", clist1,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (clist1);
  gtk_container_add (GTK_CONTAINER (cc_curve_frame), clist1);
  gtk_widget_set_usize (clist1, 150, 150);
  gtk_clist_set_column_width (GTK_CLIST (clist1), 0, 80);
  gtk_clist_set_column_width (GTK_CLIST (clist1), 1, 80);
  gtk_clist_column_titles_hide (GTK_CLIST (clist1));

  label2 = gtk_label_new ("label2");
  gtk_widget_set_name (label2, "label2");
  gtk_widget_ref (label2);
  gtk_object_set_data_full (GTK_OBJECT (curve_colour), "label2", label2,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (label2);
  gtk_clist_set_column_widget (GTK_CLIST (clist1), 0, label2);

  label3 = gtk_label_new ("label3");
  gtk_widget_set_name (label3, "label3");
  gtk_widget_ref (label3);
  gtk_object_set_data_full (GTK_OBJECT (curve_colour), "label3", label3,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (label3);
  gtk_clist_set_column_widget (GTK_CLIST (clist1), 1, label3);

  cc_colour_frame = gtk_frame_new ("Colour of curve");
  gtk_widget_set_name (cc_colour_frame, "cc_colour_frame");
  gtk_widget_ref (cc_colour_frame);
  gtk_object_set_data_full (GTK_OBJECT (curve_colour), "cc_colour_frame", cc_colour_frame,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (cc_colour_frame);
  gtk_box_pack_start (GTK_BOX (hbox2), cc_colour_frame, TRUE, TRUE, 0);
  gtk_widget_set_usize (cc_colour_frame, -2, 150);

  colour_select = gtk_color_selection_new ();
  gtk_widget_set_name (colour_select, "colour_select");
  gtk_widget_ref (colour_select);
  gtk_object_set_data_full (GTK_OBJECT (curve_colour), "colour_select", colour_select,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (colour_select);
  gtk_container_add (GTK_CONTAINER (cc_colour_frame), colour_select);
  gtk_widget_set_usize (colour_select, 380, 150);

  hbuttonbox2 = gtk_hbutton_box_new ();
  gtk_widget_set_name (hbuttonbox2, "hbuttonbox2");
  gtk_widget_ref (hbuttonbox2);
  gtk_object_set_data_full (GTK_OBJECT (curve_colour), "hbuttonbox2", hbuttonbox2,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (hbuttonbox2);
  gtk_box_pack_start (GTK_BOX (vbox1), hbuttonbox2, FALSE, FALSE, 0);
  gtk_container_set_border_width (GTK_CONTAINER (hbuttonbox2), 10);
  gtk_button_box_set_layout (GTK_BUTTON_BOX (hbuttonbox2), GTK_BUTTONBOX_END);
  gtk_button_box_set_spacing (GTK_BUTTON_BOX (hbuttonbox2), 10);
  gtk_button_box_set_child_size (GTK_BUTTON_BOX (hbuttonbox2), 27, 0);

  colour_ok = gtk_button_new_with_label ("OK");
  gtk_widget_set_name (colour_ok, "colour_ok");
  gtk_widget_ref (colour_ok);
  gtk_object_set_data_full (GTK_OBJECT (curve_colour), "colour_ok", colour_ok,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (colour_ok);
  gtk_container_add (GTK_CONTAINER (hbuttonbox2), colour_ok);
  GTK_WIDGET_SET_FLAGS (colour_ok, GTK_CAN_DEFAULT);

  colour_help = gtk_button_new_with_label ("Help");
  gtk_widget_set_name (colour_help, "colour_help");
  gtk_widget_ref (colour_help);
  gtk_object_set_data_full (GTK_OBJECT (curve_colour), "colour_help", colour_help,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (colour_help);
  gtk_container_add (GTK_CONTAINER (hbuttonbox2), colour_help);
  GTK_WIDGET_SET_FLAGS (colour_help, GTK_CAN_DEFAULT);

  return curve_colour;
}

GtkWidget*
create_import_window (void)
{
  GtkWidget *import_window;
  GtkWidget *import_vbox;
  GtkWidget *importlayout;
  GtkWidget *Import_file_prompt;
  GtkWidget *import_type_prompt;
  GtkWidget *import_ringstore_prompt;
  GtkWidget *import_file_combo;
  GtkWidget *import_file_name;
  GtkWidget *import_file_types;
  GtkWidget *import_file_types_menu;
  GtkWidget *glade_menuitem;
  GtkWidget *import_header_prompt;
  GtkWidget *import_title_opt;
  GtkWidget *import_info_opt;
  GtkWidget *import_time_opt;
  guint import_seq_opt_key;
  GtkWidget *import_seq_opt;
  GtkWidget *import_column_prompt;
  GtkWidget *import_img1;
  GtkWidget *import_ringstore_combo;
  GtkWidget *import_ringstore_name;
  GtkWidget *import_ringstore_filesel;
  GtkWidget *import_ring_combo;
  GtkWidget *import_ring_name;
  GtkWidget *import_file_filesel;
  GtkWidget *import_img2;
  GtkWidget *import_progress;
  GtkWidget *import_ring_prompt;
  GtkWidget *import_host_opt;
  GtkWidget *import_ring_opt;
  GtkWidget *import_dur_opt;
  GtkWidget *import_buttons;
  guint import_action_key;
  GtkWidget *import_action;
  guint import_finished_key;
  GtkWidget *import_finished;
  guint import_help_key;
  GtkWidget *import_help;
  GtkAccelGroup *accel_group;
  GtkTooltips *tooltips;

  tooltips = gtk_tooltips_new ();

  accel_group = gtk_accel_group_new ();

  import_window = gtk_dialog_new ();
  gtk_widget_set_name (import_window, "import_window");
  gtk_object_set_data (GTK_OBJECT (import_window), "import_window", import_window);
  gtk_window_set_title (GTK_WINDOW (import_window), "Import File");
  gtk_window_set_position (GTK_WINDOW (import_window), GTK_WIN_POS_MOUSE);
  gtk_window_set_policy (GTK_WINDOW (import_window), TRUE, TRUE, FALSE);

  import_vbox = GTK_DIALOG (import_window)->vbox;
  gtk_widget_set_name (import_vbox, "import_vbox");
  gtk_object_set_data (GTK_OBJECT (import_window), "import_vbox", import_vbox);
  gtk_widget_show (import_vbox);
  gtk_widget_set_usize (import_vbox, 400, -2);

  importlayout = gtk_table_new (11, 4, FALSE);
  gtk_widget_set_name (importlayout, "importlayout");
  gtk_widget_ref (importlayout);
  gtk_object_set_data_full (GTK_OBJECT (import_window), "importlayout", importlayout,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (importlayout);
  gtk_box_pack_start (GTK_BOX (import_vbox), importlayout, TRUE, TRUE, 0);
  gtk_widget_set_usize (importlayout, 400, -2);
  gtk_container_set_border_width (GTK_CONTAINER (importlayout), 10);
  gtk_table_set_row_spacings (GTK_TABLE (importlayout), 2);
  gtk_table_set_col_spacings (GTK_TABLE (importlayout), 6);

  Import_file_prompt = gtk_label_new ("File name:");
  gtk_widget_set_name (Import_file_prompt, "Import_file_prompt");
  gtk_widget_ref (Import_file_prompt);
  gtk_object_set_data_full (GTK_OBJECT (import_window), "Import_file_prompt", Import_file_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (Import_file_prompt);
  gtk_table_attach (GTK_TABLE (importlayout), Import_file_prompt, 0, 1, 0, 1,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_label_set_justify (GTK_LABEL (Import_file_prompt), GTK_JUSTIFY_LEFT);
  gtk_misc_set_alignment (GTK_MISC (Import_file_prompt), 0, 0.5);

  import_type_prompt = gtk_label_new ("File type:");
  gtk_widget_set_name (import_type_prompt, "import_type_prompt");
  gtk_widget_ref (import_type_prompt);
  gtk_object_set_data_full (GTK_OBJECT (import_window), "import_type_prompt", import_type_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (import_type_prompt);
  gtk_table_attach (GTK_TABLE (importlayout), import_type_prompt, 0, 1, 1, 2,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_label_set_justify (GTK_LABEL (import_type_prompt), GTK_JUSTIFY_LEFT);
  gtk_misc_set_alignment (GTK_MISC (import_type_prompt), 0, 0.5);

  import_ringstore_prompt = gtk_label_new ("Ringstore name:");
  gtk_widget_set_name (import_ringstore_prompt, "import_ringstore_prompt");
  gtk_widget_ref (import_ringstore_prompt);
  gtk_object_set_data_full (GTK_OBJECT (import_window), "import_ringstore_prompt", import_ringstore_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (import_ringstore_prompt);
  gtk_table_attach (GTK_TABLE (importlayout), import_ringstore_prompt, 0, 1, 7, 8,
                    (GtkAttachOptions) (0),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_label_set_justify (GTK_LABEL (import_ringstore_prompt), GTK_JUSTIFY_LEFT);
  gtk_misc_set_alignment (GTK_MISC (import_ringstore_prompt), 0, 0.5);

  import_file_combo = gtk_combo_new ();
  gtk_widget_set_name (import_file_combo, "import_file_combo");
  gtk_widget_ref (import_file_combo);
  gtk_object_set_data_full (GTK_OBJECT (import_window), "import_file_combo", import_file_combo,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (import_file_combo);
  gtk_table_attach (GTK_TABLE (importlayout), import_file_combo, 1, 3, 0, 1,
                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);

  import_file_name = GTK_COMBO (import_file_combo)->entry;
  gtk_widget_set_name (import_file_name, "import_file_name");
  gtk_widget_ref (import_file_name);
  gtk_object_set_data_full (GTK_OBJECT (import_window), "import_file_name", import_file_name,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (import_file_name);

  import_file_types = gtk_option_menu_new ();
  gtk_widget_set_name (import_file_types, "import_file_types");
  gtk_widget_ref (import_file_types);
  gtk_object_set_data_full (GTK_OBJECT (import_window), "import_file_types", import_file_types,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (import_file_types);
  gtk_table_attach (GTK_TABLE (importlayout), import_file_types, 1, 3, 1, 2,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_tooltips_set_tip (tooltips, import_file_types, "Format to import", NULL);
  import_file_types_menu = gtk_menu_new ();
  glade_menuitem = gtk_menu_item_new_with_label ("csv - comma separated values");
  gtk_widget_show (glade_menuitem);
  gtk_menu_append (GTK_MENU (import_file_types_menu), glade_menuitem);
  glade_menuitem = gtk_menu_item_new_with_label ("fha - fat headed array");
  gtk_widget_show (glade_menuitem);
  gtk_menu_append (GTK_MENU (import_file_types_menu), glade_menuitem);
  glade_menuitem = gtk_menu_item_new_with_label ("solaris sar - unix system activity report");
  gtk_widget_show (glade_menuitem);
  gtk_menu_append (GTK_MENU (import_file_types_menu), glade_menuitem);
  gtk_option_menu_set_menu (GTK_OPTION_MENU (import_file_types), import_file_types_menu);

  import_header_prompt = gtk_label_new ("Headers:");
  gtk_widget_set_name (import_header_prompt, "import_header_prompt");
  gtk_widget_ref (import_header_prompt);
  gtk_object_set_data_full (GTK_OBJECT (import_window), "import_header_prompt", import_header_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (import_header_prompt);
  gtk_table_attach (GTK_TABLE (importlayout), import_header_prompt, 0, 1, 2, 3,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_misc_set_alignment (GTK_MISC (import_header_prompt), 0, 0.5);

  import_title_opt = gtk_check_button_new_with_label ("column names");
  gtk_widget_set_name (import_title_opt, "import_title_opt");
  gtk_widget_ref (import_title_opt);
  gtk_object_set_data_full (GTK_OBJECT (import_window), "import_title_opt", import_title_opt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (import_title_opt);
  gtk_table_attach (GTK_TABLE (importlayout), import_title_opt, 1, 2, 2, 3,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_tooltips_set_tip (tooltips, import_title_opt, "Expect column names at the start of the data. If unchecked, a default set of names will be created", NULL);
  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (import_title_opt), TRUE);

  import_info_opt = gtk_check_button_new_with_label ("info lines");
  gtk_widget_set_name (import_info_opt, "import_info_opt");
  gtk_widget_ref (import_info_opt);
  gtk_object_set_data_full (GTK_OBJECT (import_window), "import_info_opt", import_info_opt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (import_info_opt);
  gtk_table_attach (GTK_TABLE (importlayout), import_info_opt, 2, 3, 2, 3,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_tooltips_set_tip (tooltips, import_info_opt, "Expect 'info' rows following the column names and before the data body starts. Terminates with '--'", NULL);
  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (import_info_opt), TRUE);

  import_time_opt = gtk_check_button_new_with_label ("time stamp");
  gtk_widget_set_name (import_time_opt, "import_time_opt");
  gtk_widget_ref (import_time_opt);
  gtk_object_set_data_full (GTK_OBJECT (import_window), "import_time_opt", import_time_opt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (import_time_opt);
  gtk_table_attach (GTK_TABLE (importlayout), import_time_opt, 1, 2, 3, 4,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_tooltips_set_tip (tooltips, import_time_opt, "Expect a meta data column '_time', with timestamps for each data row. If unchecked, the current time will be used for all rows", NULL);
  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (import_time_opt), TRUE);

  import_seq_opt = gtk_check_button_new_with_label ("");
  import_seq_opt_key = gtk_label_parse_uline (GTK_LABEL (GTK_BIN (import_seq_opt)->child),
                                   "sequence (__seq)");
  gtk_widget_add_accelerator (import_seq_opt, "clicked", accel_group,
                              import_seq_opt_key, GDK_MOD1_MASK, (GtkAccelFlags) 0);
  gtk_widget_set_name (import_seq_opt, "import_seq_opt");
  gtk_widget_ref (import_seq_opt);
  gtk_object_set_data_full (GTK_OBJECT (import_window), "import_seq_opt", import_seq_opt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (import_seq_opt);
  gtk_table_attach (GTK_TABLE (importlayout), import_seq_opt, 2, 3, 3, 4,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_tooltips_set_tip (tooltips, import_seq_opt, "Expect a meta data column '_seq', which shows the sequence of each sample. If unchecked, the timestamp will imply a sequence order, which is then saved along with the data", NULL);
  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (import_seq_opt), TRUE);

  import_column_prompt = gtk_label_new ("Columns:");
  gtk_widget_set_name (import_column_prompt, "import_column_prompt");
  gtk_widget_ref (import_column_prompt);
  gtk_object_set_data_full (GTK_OBJECT (import_window), "import_column_prompt", import_column_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (import_column_prompt);
  gtk_table_attach (GTK_TABLE (importlayout), import_column_prompt, 0, 1, 3, 4,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_misc_set_alignment (GTK_MISC (import_column_prompt), 0, 0.5);

  import_img1 = create_pixmap (import_window, NULL);
  gtk_widget_set_name (import_img1, "import_img1");
  gtk_widget_ref (import_img1);
  gtk_object_set_data_full (GTK_OBJECT (import_window), "import_img1", import_img1,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (import_img1);
  gtk_table_attach (GTK_TABLE (importlayout), import_img1, 1, 3, 6, 7,
                    (GtkAttachOptions) (GTK_SHRINK | GTK_FILL),
                    (GtkAttachOptions) (GTK_SHRINK | GTK_FILL), 0, 0);
  gtk_widget_set_usize (import_img1, -2, 20);
  gtk_widget_set_sensitive (import_img1, FALSE);
  gtk_misc_set_padding (GTK_MISC (import_img1), 20, 20);

  import_ringstore_combo = gtk_combo_new ();
  gtk_widget_set_name (import_ringstore_combo, "import_ringstore_combo");
  gtk_widget_ref (import_ringstore_combo);
  gtk_object_set_data_full (GTK_OBJECT (import_window), "import_ringstore_combo", import_ringstore_combo,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (import_ringstore_combo);
  gtk_table_attach (GTK_TABLE (importlayout), import_ringstore_combo, 1, 3, 7, 8,
                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);

  import_ringstore_name = GTK_COMBO (import_ringstore_combo)->entry;
  gtk_widget_set_name (import_ringstore_name, "import_ringstore_name");
  gtk_widget_ref (import_ringstore_name);
  gtk_object_set_data_full (GTK_OBJECT (import_window), "import_ringstore_name", import_ringstore_name,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (import_ringstore_name);

  import_ringstore_filesel = gtk_button_new_with_label ("...");
  gtk_widget_set_name (import_ringstore_filesel, "import_ringstore_filesel");
  gtk_widget_ref (import_ringstore_filesel);
  gtk_object_set_data_full (GTK_OBJECT (import_window), "import_ringstore_filesel", import_ringstore_filesel,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (import_ringstore_filesel);
  gtk_table_attach (GTK_TABLE (importlayout), import_ringstore_filesel, 3, 4, 7, 8,
                    (GtkAttachOptions) (0),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_tooltips_set_tip (tooltips, import_ringstore_filesel, "Find ringstore with file selection tool", NULL);

  import_ring_combo = gtk_combo_new ();
  gtk_widget_set_name (import_ring_combo, "import_ring_combo");
  gtk_widget_ref (import_ring_combo);
  gtk_object_set_data_full (GTK_OBJECT (import_window), "import_ring_combo", import_ring_combo,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (import_ring_combo);
  gtk_table_attach (GTK_TABLE (importlayout), import_ring_combo, 1, 3, 8, 9,
                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);

  import_ring_name = GTK_COMBO (import_ring_combo)->entry;
  gtk_widget_set_name (import_ring_name, "import_ring_name");
  gtk_widget_ref (import_ring_name);
  gtk_object_set_data_full (GTK_OBJECT (import_window), "import_ring_name", import_ring_name,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (import_ring_name);

  import_file_filesel = gtk_button_new_with_label ("...");
  gtk_widget_set_name (import_file_filesel, "import_file_filesel");
  gtk_widget_ref (import_file_filesel);
  gtk_object_set_data_full (GTK_OBJECT (import_window), "import_file_filesel", import_file_filesel,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (import_file_filesel);
  gtk_table_attach (GTK_TABLE (importlayout), import_file_filesel, 3, 4, 0, 1,
                    (GtkAttachOptions) (0),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_tooltips_set_tip (tooltips, import_file_filesel, "Find input file with a selection tool", NULL);

  import_img2 = create_pixmap (import_window, NULL);
  gtk_widget_set_name (import_img2, "import_img2");
  gtk_widget_ref (import_img2);
  gtk_object_set_data_full (GTK_OBJECT (import_window), "import_img2", import_img2,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (import_img2);
  gtk_table_attach (GTK_TABLE (importlayout), import_img2, 1, 3, 9, 10,
                    (GtkAttachOptions) (GTK_SHRINK | GTK_FILL),
                    (GtkAttachOptions) (GTK_SHRINK | GTK_FILL), 0, 0);
  gtk_widget_set_usize (import_img2, -2, 20);
  gtk_widget_set_sensitive (import_img2, FALSE);

  import_progress = gtk_progress_bar_new ();
  gtk_widget_set_name (import_progress, "import_progress");
  gtk_widget_ref (import_progress);
  gtk_object_set_data_full (GTK_OBJECT (import_window), "import_progress", import_progress,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (import_progress);
  gtk_table_attach (GTK_TABLE (importlayout), import_progress, 1, 3, 10, 11,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_progress_set_show_text (GTK_PROGRESS (import_progress), TRUE);

  import_ring_prompt = gtk_label_new ("Ring name:");
  gtk_widget_set_name (import_ring_prompt, "import_ring_prompt");
  gtk_widget_ref (import_ring_prompt);
  gtk_object_set_data_full (GTK_OBJECT (import_window), "import_ring_prompt", import_ring_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (import_ring_prompt);
  gtk_table_attach (GTK_TABLE (importlayout), import_ring_prompt, 0, 1, 8, 9,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_label_set_justify (GTK_LABEL (import_ring_prompt), GTK_JUSTIFY_LEFT);
  gtk_misc_set_alignment (GTK_MISC (import_ring_prompt), 0, 0.5);

  import_host_opt = gtk_check_button_new_with_label ("host name");
  gtk_widget_set_name (import_host_opt, "import_host_opt");
  gtk_widget_ref (import_host_opt);
  gtk_object_set_data_full (GTK_OBJECT (import_window), "import_host_opt", import_host_opt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (import_host_opt);
  gtk_table_attach (GTK_TABLE (importlayout), import_host_opt, 1, 2, 4, 5,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_tooltips_set_tip (tooltips, import_host_opt, "Expect a meta data column '_host', containing the name of the originating host", NULL);
  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (import_host_opt), TRUE);

  import_ring_opt = gtk_check_button_new_with_label ("ring name");
  gtk_widget_set_name (import_ring_opt, "import_ring_opt");
  gtk_widget_ref (import_ring_opt);
  gtk_object_set_data_full (GTK_OBJECT (import_window), "import_ring_opt", import_ring_opt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (import_ring_opt);
  gtk_table_attach (GTK_TABLE (importlayout), import_ring_opt, 2, 3, 4, 5,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_tooltips_set_tip (tooltips, import_ring_opt, "Expect a meta data column '_ring', containing the name of the originating ring", NULL);
  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (import_ring_opt), TRUE);

  import_dur_opt = gtk_check_button_new_with_label ("sample duration");
  gtk_widget_set_name (import_dur_opt, "import_dur_opt");
  gtk_widget_ref (import_dur_opt);
  gtk_object_set_data_full (GTK_OBJECT (import_window), "import_dur_opt", import_dur_opt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (import_dur_opt);
  gtk_table_attach (GTK_TABLE (importlayout), import_dur_opt, 1, 2, 5, 6,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_tooltips_set_tip (tooltips, import_dur_opt, "Expect a meta data column '_dur', containing the sample duration in seconds (0 for irregular)", NULL);
  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (import_dur_opt), TRUE);

  import_buttons = GTK_DIALOG (import_window)->action_area;
  gtk_widget_set_name (import_buttons, "import_buttons");
  gtk_object_set_data (GTK_OBJECT (import_window), "import_buttons", import_buttons);
  gtk_widget_show (import_buttons);
  gtk_container_set_border_width (GTK_CONTAINER (import_buttons), 10);

  import_action = gtk_button_new_with_label ("");
  import_action_key = gtk_label_parse_uline (GTK_LABEL (GTK_BIN (import_action)->child),
                                   "_Import");
  gtk_widget_add_accelerator (import_action, "clicked", accel_group,
                              import_action_key, GDK_MOD1_MASK, (GtkAccelFlags) 0);
  gtk_widget_set_name (import_action, "import_action");
  gtk_widget_ref (import_action);
  gtk_object_set_data_full (GTK_OBJECT (import_window), "import_action", import_action,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (import_action);
  gtk_box_pack_start (GTK_BOX (import_buttons), import_action, FALSE, FALSE, 0);
  gtk_widget_set_usize (import_action, 60, -2);
  gtk_widget_add_accelerator (import_action, "clicked", accel_group,
                              GDK_I, GDK_MOD1_MASK,
                              GTK_ACCEL_VISIBLE);

  import_finished = gtk_button_new_with_label ("");
  import_finished_key = gtk_label_parse_uline (GTK_LABEL (GTK_BIN (import_finished)->child),
                                   "_Finished");
  gtk_widget_add_accelerator (import_finished, "clicked", accel_group,
                              import_finished_key, GDK_MOD1_MASK, (GtkAccelFlags) 0);
  gtk_widget_set_name (import_finished, "import_finished");
  gtk_widget_ref (import_finished);
  gtk_object_set_data_full (GTK_OBJECT (import_window), "import_finished", import_finished,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (import_finished);
  gtk_box_pack_start (GTK_BOX (import_buttons), import_finished, FALSE, FALSE, 0);
  gtk_widget_set_usize (import_finished, 60, -2);
  gtk_widget_add_accelerator (import_finished, "clicked", accel_group,
                              GDK_F, GDK_MOD1_MASK,
                              GTK_ACCEL_VISIBLE);
  gtk_widget_add_accelerator (import_finished, "clicked", accel_group,
                              GDK_Escape, 0,
                              GTK_ACCEL_VISIBLE);

  import_help = gtk_button_new_with_label ("");
  import_help_key = gtk_label_parse_uline (GTK_LABEL (GTK_BIN (import_help)->child),
                                   "_Help");
  gtk_widget_add_accelerator (import_help, "clicked", accel_group,
                              import_help_key, GDK_MOD1_MASK, (GtkAccelFlags) 0);
  gtk_widget_set_name (import_help, "import_help");
  gtk_widget_ref (import_help);
  gtk_object_set_data_full (GTK_OBJECT (import_window), "import_help", import_help,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (import_help);
  gtk_box_pack_start (GTK_BOX (import_buttons), import_help, FALSE, FALSE, 0);
  gtk_widget_set_usize (import_help, 60, -2);
  gtk_widget_add_accelerator (import_help, "clicked", accel_group,
                              GDK_H, GDK_MOD1_MASK,
                              GTK_ACCEL_VISIBLE);
  gtk_widget_add_accelerator (import_help, "clicked", accel_group,
                              GDK_F1, 0,
                              GTK_ACCEL_VISIBLE);

  gtk_signal_connect (GTK_OBJECT (import_ringstore_name), "changed",
                      GTK_SIGNAL_FUNC (on_import_ringstore_name_changed),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (import_ringstore_filesel), "clicked",
                      GTK_SIGNAL_FUNC (on_import_ringstore_filesel_clicked),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (import_file_filesel), "clicked",
                      GTK_SIGNAL_FUNC (on_import_file_filesel_clicked),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (import_action), "clicked",
                      GTK_SIGNAL_FUNC (on_import_action_clicked),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (import_finished), "clicked",
                      GTK_SIGNAL_FUNC (on_import_finished_clicked),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (import_help), "clicked",
                      GTK_SIGNAL_FUNC (on_import_help_clicked),
                      NULL);

  gtk_object_set_data (GTK_OBJECT (import_window), "tooltips", tooltips);

  gtk_window_add_accel_group (GTK_WINDOW (import_window), accel_group);

  return import_window;
}

GtkWidget*
create_export_window (void)
{
  GtkWidget *export_window;
  GtkWidget *export_vbox;
  GtkWidget *exportlayout;
  GtkWidget *export_ringstore_prompt;
  GtkWidget *export_ring_prompt;
  GtkWidget *export_type_prompt;
  GtkWidget *export_file_prompt;
  GtkWidget *export_header_prompt;
  GtkWidget *export_title_opt;
  GtkWidget *export_info_opt;
  GtkWidget *export_column_prompt;
  GtkWidget *export_ringstore_combo;
  GtkWidget *export_ringstore_name;
  GtkWidget *export_ring_combo;
  GtkWidget *export_ring_name;
  GtkWidget *export_ringstore_filesel;
  GtkWidget *export_img1;
  GtkWidget *export_file_types;
  GtkWidget *export_file_types_menu;
  GtkWidget *glade_menuitem;
  GtkWidget *export_file_filesel;
  GtkWidget *export_progress;
  GtkWidget *export_time_opt;
  guint export_seq_opt_key;
  GtkWidget *export_seq_opt;
  GtkWidget *export_file_combo;
  GtkWidget *export_file_name;
  GtkWidget *export_img2;
  GtkWidget *export_host_opt;
  GtkWidget *export_ring_opt;
  GtkWidget *export_dur_opt;
  GtkWidget *export_buttons;
  guint export_action_key;
  GtkWidget *export_action;
  guint export_finished_key;
  GtkWidget *export_finished;
  guint export_help_key;
  GtkWidget *export_help;
  GtkAccelGroup *accel_group;
  GtkTooltips *tooltips;

  tooltips = gtk_tooltips_new ();

  accel_group = gtk_accel_group_new ();

  export_window = gtk_dialog_new ();
  gtk_widget_set_name (export_window, "export_window");
  gtk_object_set_data (GTK_OBJECT (export_window), "export_window", export_window);
  gtk_window_set_title (GTK_WINDOW (export_window), "Export Ringstore");
  gtk_window_set_position (GTK_WINDOW (export_window), GTK_WIN_POS_MOUSE);
  gtk_window_set_policy (GTK_WINDOW (export_window), TRUE, TRUE, FALSE);

  export_vbox = GTK_DIALOG (export_window)->vbox;
  gtk_widget_set_name (export_vbox, "export_vbox");
  gtk_object_set_data (GTK_OBJECT (export_window), "export_vbox", export_vbox);
  gtk_widget_show (export_vbox);

  exportlayout = gtk_table_new (11, 4, FALSE);
  gtk_widget_set_name (exportlayout, "exportlayout");
  gtk_widget_ref (exportlayout);
  gtk_object_set_data_full (GTK_OBJECT (export_window), "exportlayout", exportlayout,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (exportlayout);
  gtk_box_pack_start (GTK_BOX (export_vbox), exportlayout, TRUE, TRUE, 0);
  gtk_widget_set_usize (exportlayout, 400, -2);
  gtk_container_set_border_width (GTK_CONTAINER (exportlayout), 10);
  gtk_table_set_row_spacings (GTK_TABLE (exportlayout), 2);
  gtk_table_set_col_spacings (GTK_TABLE (exportlayout), 6);

  export_ringstore_prompt = gtk_label_new ("Ringstore name:");
  gtk_widget_set_name (export_ringstore_prompt, "export_ringstore_prompt");
  gtk_widget_ref (export_ringstore_prompt);
  gtk_object_set_data_full (GTK_OBJECT (export_window), "export_ringstore_prompt", export_ringstore_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (export_ringstore_prompt);
  gtk_table_attach (GTK_TABLE (exportlayout), export_ringstore_prompt, 0, 1, 0, 1,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_label_set_justify (GTK_LABEL (export_ringstore_prompt), GTK_JUSTIFY_LEFT);
  gtk_misc_set_alignment (GTK_MISC (export_ringstore_prompt), 0, 0.5);

  export_ring_prompt = gtk_label_new ("Ring name:");
  gtk_widget_set_name (export_ring_prompt, "export_ring_prompt");
  gtk_widget_ref (export_ring_prompt);
  gtk_object_set_data_full (GTK_OBJECT (export_window), "export_ring_prompt", export_ring_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (export_ring_prompt);
  gtk_table_attach (GTK_TABLE (exportlayout), export_ring_prompt, 0, 1, 1, 2,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_label_set_justify (GTK_LABEL (export_ring_prompt), GTK_JUSTIFY_LEFT);
  gtk_misc_set_alignment (GTK_MISC (export_ring_prompt), 0, 0.5);

  export_type_prompt = gtk_label_new ("File type:");
  gtk_widget_set_name (export_type_prompt, "export_type_prompt");
  gtk_widget_ref (export_type_prompt);
  gtk_object_set_data_full (GTK_OBJECT (export_window), "export_type_prompt", export_type_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (export_type_prompt);
  gtk_table_attach (GTK_TABLE (exportlayout), export_type_prompt, 0, 1, 3, 4,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_label_set_justify (GTK_LABEL (export_type_prompt), GTK_JUSTIFY_LEFT);
  gtk_misc_set_alignment (GTK_MISC (export_type_prompt), 0, 0.5);

  export_file_prompt = gtk_label_new ("File name:");
  gtk_widget_set_name (export_file_prompt, "export_file_prompt");
  gtk_widget_ref (export_file_prompt);
  gtk_object_set_data_full (GTK_OBJECT (export_window), "export_file_prompt", export_file_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (export_file_prompt);
  gtk_table_attach (GTK_TABLE (exportlayout), export_file_prompt, 0, 1, 8, 9,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_label_set_justify (GTK_LABEL (export_file_prompt), GTK_JUSTIFY_LEFT);
  gtk_misc_set_alignment (GTK_MISC (export_file_prompt), 0, 0.5);

  export_header_prompt = gtk_label_new ("Headers:");
  gtk_widget_set_name (export_header_prompt, "export_header_prompt");
  gtk_widget_ref (export_header_prompt);
  gtk_object_set_data_full (GTK_OBJECT (export_window), "export_header_prompt", export_header_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (export_header_prompt);
  gtk_table_attach (GTK_TABLE (exportlayout), export_header_prompt, 0, 1, 4, 5,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_misc_set_alignment (GTK_MISC (export_header_prompt), 0, 0.5);

  export_title_opt = gtk_check_button_new_with_label ("column names");
  gtk_widget_set_name (export_title_opt, "export_title_opt");
  gtk_widget_ref (export_title_opt);
  gtk_object_set_data_full (GTK_OBJECT (export_window), "export_title_opt", export_title_opt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (export_title_opt);
  gtk_table_attach (GTK_TABLE (exportlayout), export_title_opt, 1, 2, 4, 5,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_tooltips_set_tip (tooltips, export_title_opt, "Generate column names at the start of the data", NULL);
  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (export_title_opt), TRUE);

  export_info_opt = gtk_check_button_new_with_label ("info lines");
  gtk_widget_set_name (export_info_opt, "export_info_opt");
  gtk_widget_ref (export_info_opt);
  gtk_object_set_data_full (GTK_OBJECT (export_window), "export_info_opt", export_info_opt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (export_info_opt);
  gtk_table_attach (GTK_TABLE (exportlayout), export_info_opt, 2, 3, 4, 5,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_tooltips_set_tip (tooltips, export_info_opt, "Generate 'info' rows following the column names and before the data body starts. Terminates with '--'", NULL);
  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (export_info_opt), TRUE);

  export_column_prompt = gtk_label_new ("Columns:");
  gtk_widget_set_name (export_column_prompt, "export_column_prompt");
  gtk_widget_ref (export_column_prompt);
  gtk_object_set_data_full (GTK_OBJECT (export_window), "export_column_prompt", export_column_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (export_column_prompt);
  gtk_table_attach (GTK_TABLE (exportlayout), export_column_prompt, 0, 1, 5, 6,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_misc_set_alignment (GTK_MISC (export_column_prompt), 0, 0.5);

  export_ringstore_combo = gtk_combo_new ();
  gtk_widget_set_name (export_ringstore_combo, "export_ringstore_combo");
  gtk_widget_ref (export_ringstore_combo);
  gtk_object_set_data_full (GTK_OBJECT (export_window), "export_ringstore_combo", export_ringstore_combo,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (export_ringstore_combo);
  gtk_table_attach (GTK_TABLE (exportlayout), export_ringstore_combo, 1, 3, 0, 1,
                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);

  export_ringstore_name = GTK_COMBO (export_ringstore_combo)->entry;
  gtk_widget_set_name (export_ringstore_name, "export_ringstore_name");
  gtk_widget_ref (export_ringstore_name);
  gtk_object_set_data_full (GTK_OBJECT (export_window), "export_ringstore_name", export_ringstore_name,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (export_ringstore_name);

  export_ring_combo = gtk_combo_new ();
  gtk_widget_set_name (export_ring_combo, "export_ring_combo");
  gtk_widget_ref (export_ring_combo);
  gtk_object_set_data_full (GTK_OBJECT (export_window), "export_ring_combo", export_ring_combo,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (export_ring_combo);
  gtk_table_attach (GTK_TABLE (exportlayout), export_ring_combo, 1, 3, 1, 2,
                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);

  export_ring_name = GTK_COMBO (export_ring_combo)->entry;
  gtk_widget_set_name (export_ring_name, "export_ring_name");
  gtk_widget_ref (export_ring_name);
  gtk_object_set_data_full (GTK_OBJECT (export_window), "export_ring_name", export_ring_name,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (export_ring_name);

  export_ringstore_filesel = gtk_button_new_with_label ("...");
  gtk_widget_set_name (export_ringstore_filesel, "export_ringstore_filesel");
  gtk_widget_ref (export_ringstore_filesel);
  gtk_object_set_data_full (GTK_OBJECT (export_window), "export_ringstore_filesel", export_ringstore_filesel,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (export_ringstore_filesel);
  gtk_table_attach (GTK_TABLE (exportlayout), export_ringstore_filesel, 3, 4, 0, 1,
                    (GtkAttachOptions) (0),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_tooltips_set_tip (tooltips, export_ringstore_filesel, "Find ringstore with file selection tool", NULL);

  export_img1 = create_pixmap (export_window, NULL);
  gtk_widget_set_name (export_img1, "export_img1");
  gtk_widget_ref (export_img1);
  gtk_object_set_data_full (GTK_OBJECT (export_window), "export_img1", export_img1,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (export_img1);
  gtk_table_attach (GTK_TABLE (exportlayout), export_img1, 1, 3, 2, 3,
                    (GtkAttachOptions) (GTK_SHRINK | GTK_FILL),
                    (GtkAttachOptions) (GTK_SHRINK | GTK_FILL), 0, 0);
  gtk_widget_set_usize (export_img1, -2, 20);
  gtk_widget_set_sensitive (export_img1, FALSE);
  gtk_misc_set_padding (GTK_MISC (export_img1), 0, 20);

  export_file_types = gtk_option_menu_new ();
  gtk_widget_set_name (export_file_types, "export_file_types");
  gtk_widget_ref (export_file_types);
  gtk_object_set_data_full (GTK_OBJECT (export_window), "export_file_types", export_file_types,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (export_file_types);
  gtk_table_attach (GTK_TABLE (exportlayout), export_file_types, 1, 3, 3, 4,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_tooltips_set_tip (tooltips, export_file_types, "Format to export", NULL);
  export_file_types_menu = gtk_menu_new ();
  glade_menuitem = gtk_menu_item_new_with_label ("csv - comma separated values");
  gtk_widget_show (glade_menuitem);
  gtk_menu_append (GTK_MENU (export_file_types_menu), glade_menuitem);
  glade_menuitem = gtk_menu_item_new_with_label ("fha - fat headed array");
  gtk_widget_show (glade_menuitem);
  gtk_menu_append (GTK_MENU (export_file_types_menu), glade_menuitem);
  gtk_option_menu_set_menu (GTK_OPTION_MENU (export_file_types), export_file_types_menu);

  export_file_filesel = gtk_button_new_with_label ("...");
  gtk_widget_set_name (export_file_filesel, "export_file_filesel");
  gtk_widget_ref (export_file_filesel);
  gtk_object_set_data_full (GTK_OBJECT (export_window), "export_file_filesel", export_file_filesel,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (export_file_filesel);
  gtk_table_attach (GTK_TABLE (exportlayout), export_file_filesel, 3, 4, 8, 9,
                    (GtkAttachOptions) (0),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_tooltips_set_tip (tooltips, export_file_filesel, "Find output file with a selection tool", NULL);

  export_progress = gtk_progress_bar_new ();
  gtk_widget_set_name (export_progress, "export_progress");
  gtk_widget_ref (export_progress);
  gtk_object_set_data_full (GTK_OBJECT (export_window), "export_progress", export_progress,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (export_progress);
  gtk_table_attach (GTK_TABLE (exportlayout), export_progress, 1, 3, 10, 11,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_progress_set_show_text (GTK_PROGRESS (export_progress), TRUE);

  export_time_opt = gtk_check_button_new_with_label ("time stamp");
  gtk_widget_set_name (export_time_opt, "export_time_opt");
  gtk_widget_ref (export_time_opt);
  gtk_object_set_data_full (GTK_OBJECT (export_window), "export_time_opt", export_time_opt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (export_time_opt);
  gtk_table_attach (GTK_TABLE (exportlayout), export_time_opt, 1, 2, 5, 6,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_tooltips_set_tip (tooltips, export_time_opt, "Generate a meta data column '_time', with timestamps for each row", NULL);
  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (export_time_opt), TRUE);

  export_seq_opt = gtk_check_button_new_with_label ("");
  export_seq_opt_key = gtk_label_parse_uline (GTK_LABEL (GTK_BIN (export_seq_opt)->child),
                                   "sequence (__seq)");
  gtk_widget_add_accelerator (export_seq_opt, "clicked", accel_group,
                              export_seq_opt_key, GDK_MOD1_MASK, (GtkAccelFlags) 0);
  gtk_widget_set_name (export_seq_opt, "export_seq_opt");
  gtk_widget_ref (export_seq_opt);
  gtk_object_set_data_full (GTK_OBJECT (export_window), "export_seq_opt", export_seq_opt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (export_seq_opt);
  gtk_table_attach (GTK_TABLE (exportlayout), export_seq_opt, 2, 3, 5, 6,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_tooltips_set_tip (tooltips, export_seq_opt, "Generate a meta data column '_seq', which shows the sequence of each sample", NULL);
  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (export_seq_opt), TRUE);

  export_file_combo = gtk_combo_new ();
  gtk_widget_set_name (export_file_combo, "export_file_combo");
  gtk_widget_ref (export_file_combo);
  gtk_object_set_data_full (GTK_OBJECT (export_window), "export_file_combo", export_file_combo,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (export_file_combo);
  gtk_table_attach (GTK_TABLE (exportlayout), export_file_combo, 1, 3, 8, 9,
                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);

  export_file_name = GTK_COMBO (export_file_combo)->entry;
  gtk_widget_set_name (export_file_name, "export_file_name");
  gtk_widget_ref (export_file_name);
  gtk_object_set_data_full (GTK_OBJECT (export_window), "export_file_name", export_file_name,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (export_file_name);

  export_img2 = create_pixmap (export_window, NULL);
  gtk_widget_set_name (export_img2, "export_img2");
  gtk_widget_ref (export_img2);
  gtk_object_set_data_full (GTK_OBJECT (export_window), "export_img2", export_img2,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (export_img2);
  gtk_table_attach (GTK_TABLE (exportlayout), export_img2, 1, 3, 9, 10,
                    (GtkAttachOptions) (GTK_SHRINK | GTK_FILL),
                    (GtkAttachOptions) (GTK_SHRINK | GTK_FILL), 0, 0);
  gtk_widget_set_usize (export_img2, -2, 20);
  gtk_widget_set_sensitive (export_img2, FALSE);
  gtk_misc_set_padding (GTK_MISC (export_img2), 0, 20);

  export_host_opt = gtk_check_button_new_with_label ("host name");
  gtk_widget_set_name (export_host_opt, "export_host_opt");
  gtk_widget_ref (export_host_opt);
  gtk_object_set_data_full (GTK_OBJECT (export_window), "export_host_opt", export_host_opt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (export_host_opt);
  gtk_table_attach (GTK_TABLE (exportlayout), export_host_opt, 1, 2, 6, 7,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_tooltips_set_tip (tooltips, export_host_opt, "Generate a meta data column '_host', containing the name of the originating host", NULL);
  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (export_host_opt), TRUE);

  export_ring_opt = gtk_check_button_new_with_label ("ring name");
  gtk_widget_set_name (export_ring_opt, "export_ring_opt");
  gtk_widget_ref (export_ring_opt);
  gtk_object_set_data_full (GTK_OBJECT (export_window), "export_ring_opt", export_ring_opt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (export_ring_opt);
  gtk_table_attach (GTK_TABLE (exportlayout), export_ring_opt, 2, 3, 6, 7,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_tooltips_set_tip (tooltips, export_ring_opt, "Generate a meta data column '_ring', containing the name of the storing ring", NULL);
  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (export_ring_opt), TRUE);

  export_dur_opt = gtk_check_button_new_with_label ("sample duration");
  gtk_widget_set_name (export_dur_opt, "export_dur_opt");
  gtk_widget_ref (export_dur_opt);
  gtk_object_set_data_full (GTK_OBJECT (export_window), "export_dur_opt", export_dur_opt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (export_dur_opt);
  gtk_table_attach (GTK_TABLE (exportlayout), export_dur_opt, 1, 2, 7, 8,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_tooltips_set_tip (tooltips, export_dur_opt, "Generate a meta data column '_dur', containing the sample duration in seconds (0 for irregular)", NULL);
  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (export_dur_opt), TRUE);

  export_buttons = GTK_DIALOG (export_window)->action_area;
  gtk_widget_set_name (export_buttons, "export_buttons");
  gtk_object_set_data (GTK_OBJECT (export_window), "export_buttons", export_buttons);
  gtk_widget_show (export_buttons);
  gtk_container_set_border_width (GTK_CONTAINER (export_buttons), 10);

  export_action = gtk_button_new_with_label ("");
  export_action_key = gtk_label_parse_uline (GTK_LABEL (GTK_BIN (export_action)->child),
                                   "_Export");
  gtk_widget_add_accelerator (export_action, "clicked", accel_group,
                              export_action_key, GDK_MOD1_MASK, (GtkAccelFlags) 0);
  gtk_widget_set_name (export_action, "export_action");
  gtk_widget_ref (export_action);
  gtk_object_set_data_full (GTK_OBJECT (export_window), "export_action", export_action,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (export_action);
  gtk_box_pack_start (GTK_BOX (export_buttons), export_action, FALSE, FALSE, 0);
  gtk_widget_set_usize (export_action, 60, -2);
  gtk_widget_add_accelerator (export_action, "clicked", accel_group,
                              GDK_E, GDK_MOD1_MASK,
                              GTK_ACCEL_VISIBLE);

  export_finished = gtk_button_new_with_label ("");
  export_finished_key = gtk_label_parse_uline (GTK_LABEL (GTK_BIN (export_finished)->child),
                                   "_Finished");
  gtk_widget_add_accelerator (export_finished, "clicked", accel_group,
                              export_finished_key, GDK_MOD1_MASK, (GtkAccelFlags) 0);
  gtk_widget_set_name (export_finished, "export_finished");
  gtk_widget_ref (export_finished);
  gtk_object_set_data_full (GTK_OBJECT (export_window), "export_finished", export_finished,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (export_finished);
  gtk_box_pack_start (GTK_BOX (export_buttons), export_finished, FALSE, FALSE, 0);
  gtk_widget_set_usize (export_finished, 60, -2);
  gtk_widget_add_accelerator (export_finished, "clicked", accel_group,
                              GDK_Escape, 0,
                              GTK_ACCEL_VISIBLE);
  gtk_widget_add_accelerator (export_finished, "clicked", accel_group,
                              GDK_F, GDK_MOD1_MASK,
                              GTK_ACCEL_VISIBLE);

  export_help = gtk_button_new_with_label ("");
  export_help_key = gtk_label_parse_uline (GTK_LABEL (GTK_BIN (export_help)->child),
                                   "_Help");
  gtk_widget_add_accelerator (export_help, "clicked", accel_group,
                              export_help_key, GDK_MOD1_MASK, (GtkAccelFlags) 0);
  gtk_widget_set_name (export_help, "export_help");
  gtk_widget_ref (export_help);
  gtk_object_set_data_full (GTK_OBJECT (export_window), "export_help", export_help,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (export_help);
  gtk_box_pack_start (GTK_BOX (export_buttons), export_help, FALSE, FALSE, 0);
  gtk_widget_set_usize (export_help, 60, -2);
  gtk_widget_add_accelerator (export_help, "clicked", accel_group,
                              GDK_F1, 0,
                              GTK_ACCEL_VISIBLE);
  gtk_widget_add_accelerator (export_help, "clicked", accel_group,
                              GDK_H, GDK_MOD1_MASK,
                              GTK_ACCEL_VISIBLE);

  gtk_signal_connect (GTK_OBJECT (export_ringstore_name), "changed",
                      GTK_SIGNAL_FUNC (on_export_ringstore_name_changed),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (export_ringstore_filesel), "clicked",
                      GTK_SIGNAL_FUNC (on_export_ringstore_filesel_clicked),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (export_file_filesel), "clicked",
                      GTK_SIGNAL_FUNC (on_export_file_filesel_clicked),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (export_action), "clicked",
                      GTK_SIGNAL_FUNC (on_export_action_clicked),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (export_finished), "clicked",
                      GTK_SIGNAL_FUNC (on_export_finished_clicked),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (export_help), "clicked",
                      GTK_SIGNAL_FUNC (on_export_help_clicked),
                      NULL);

  gtk_object_set_data (GTK_OBJECT (export_window), "tooltips", tooltips);

  gtk_window_add_accel_group (GTK_WINDOW (export_window), accel_group);

  return export_window;
}

GtkWidget*
create_file_close_dialog (void)
{
  GtkWidget *file_close_dialog;
  GtkWidget *dialog_vbox1;
  GtkWidget *file_close_list_frame;
  GtkWidget *file_close_scrollwin;
  GtkWidget *file_close_list;
  GtkWidget *file_close_list_name;
  GtkWidget *file_close_list_info;
  GtkWidget *file_close_list_path;
  GtkWidget *file_close_status;
  GtkWidget *dialog_action_area2;
  GtkWidget *file_close_buttons;
  GtkWidget *file_close_button_action;
  GtkWidget *file_close_button_cancel;
  GtkAccelGroup *accel_group;

  accel_group = gtk_accel_group_new ();

  file_close_dialog = gtk_dialog_new ();
  gtk_widget_set_name (file_close_dialog, "file_close_dialog");
  gtk_object_set_data (GTK_OBJECT (file_close_dialog), "file_close_dialog", file_close_dialog);
  gtk_widget_set_usize (file_close_dialog, 500, -2);
  gtk_window_set_title (GTK_WINDOW (file_close_dialog), "Close file");
  GTK_WINDOW (file_close_dialog)->type = GTK_WINDOW_DIALOG;
  gtk_window_set_position (GTK_WINDOW (file_close_dialog), GTK_WIN_POS_MOUSE);
  gtk_window_set_modal (GTK_WINDOW (file_close_dialog), TRUE);
  gtk_window_set_policy (GTK_WINDOW (file_close_dialog), TRUE, TRUE, FALSE);

  dialog_vbox1 = GTK_DIALOG (file_close_dialog)->vbox;
  gtk_widget_set_name (dialog_vbox1, "dialog_vbox1");
  gtk_object_set_data (GTK_OBJECT (file_close_dialog), "dialog_vbox1", dialog_vbox1);
  gtk_widget_show (dialog_vbox1);

  file_close_list_frame = gtk_frame_new ("Currently open files");
  gtk_widget_set_name (file_close_list_frame, "file_close_list_frame");
  gtk_widget_ref (file_close_list_frame);
  gtk_object_set_data_full (GTK_OBJECT (file_close_dialog), "file_close_list_frame", file_close_list_frame,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (file_close_list_frame);
  gtk_box_pack_start (GTK_BOX (dialog_vbox1), file_close_list_frame, TRUE, TRUE, 0);
  gtk_container_set_border_width (GTK_CONTAINER (file_close_list_frame), 5);

  file_close_scrollwin = gtk_scrolled_window_new (NULL, NULL);
  gtk_widget_set_name (file_close_scrollwin, "file_close_scrollwin");
  gtk_widget_ref (file_close_scrollwin);
  gtk_object_set_data_full (GTK_OBJECT (file_close_dialog), "file_close_scrollwin", file_close_scrollwin,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (file_close_scrollwin);
  gtk_container_add (GTK_CONTAINER (file_close_list_frame), file_close_scrollwin);
  gtk_scrolled_window_set_policy (GTK_SCROLLED_WINDOW (file_close_scrollwin), GTK_POLICY_NEVER, GTK_POLICY_AUTOMATIC);

  file_close_list = gtk_clist_new (3);
  gtk_widget_set_name (file_close_list, "file_close_list");
  gtk_widget_ref (file_close_list);
  gtk_object_set_data_full (GTK_OBJECT (file_close_dialog), "file_close_list", file_close_list,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (file_close_list);
  gtk_container_add (GTK_CONTAINER (file_close_scrollwin), file_close_list);
  gtk_widget_set_usize (file_close_list, -2, 150);
  gtk_clist_set_column_width (GTK_CLIST (file_close_list), 0, 73);
  gtk_clist_set_column_width (GTK_CLIST (file_close_list), 1, 183);
  gtk_clist_set_column_width (GTK_CLIST (file_close_list), 2, 80);
  gtk_clist_column_titles_show (GTK_CLIST (file_close_list));

  file_close_list_name = gtk_label_new ("Name");
  gtk_widget_set_name (file_close_list_name, "file_close_list_name");
  gtk_widget_ref (file_close_list_name);
  gtk_object_set_data_full (GTK_OBJECT (file_close_dialog), "file_close_list_name", file_close_list_name,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (file_close_list_name);
  gtk_clist_set_column_widget (GTK_CLIST (file_close_list), 0, file_close_list_name);
  gtk_widget_set_usize (file_close_list_name, 80, -2);
  gtk_misc_set_alignment (GTK_MISC (file_close_list_name), 7.45058e-09, 0.5);

  file_close_list_info = gtk_label_new ("Details");
  gtk_widget_set_name (file_close_list_info, "file_close_list_info");
  gtk_widget_ref (file_close_list_info);
  gtk_object_set_data_full (GTK_OBJECT (file_close_dialog), "file_close_list_info", file_close_list_info,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (file_close_list_info);
  gtk_clist_set_column_widget (GTK_CLIST (file_close_list), 1, file_close_list_info);
  gtk_widget_set_usize (file_close_list_info, 150, -2);
  gtk_label_set_justify (GTK_LABEL (file_close_list_info), GTK_JUSTIFY_LEFT);
  gtk_misc_set_alignment (GTK_MISC (file_close_list_info), 7.45058e-09, 0.5);

  file_close_list_path = gtk_label_new ("File Path");
  gtk_widget_set_name (file_close_list_path, "file_close_list_path");
  gtk_widget_ref (file_close_list_path);
  gtk_object_set_data_full (GTK_OBJECT (file_close_dialog), "file_close_list_path", file_close_list_path,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (file_close_list_path);
  gtk_clist_set_column_widget (GTK_CLIST (file_close_list), 2, file_close_list_path);
  gtk_widget_set_usize (file_close_list_path, 150, -2);
  gtk_label_set_justify (GTK_LABEL (file_close_list_path), GTK_JUSTIFY_LEFT);
  gtk_misc_set_alignment (GTK_MISC (file_close_list_path), 0, 0.5);

  file_close_status = gtk_statusbar_new ();
  gtk_widget_set_name (file_close_status, "file_close_status");
  gtk_widget_ref (file_close_status);
  gtk_object_set_data_full (GTK_OBJECT (file_close_dialog), "file_close_status", file_close_status,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (file_close_status);
  gtk_box_pack_start (GTK_BOX (dialog_vbox1), file_close_status, FALSE, FALSE, 0);
  gtk_container_set_border_width (GTK_CONTAINER (file_close_status), 5);

  dialog_action_area2 = GTK_DIALOG (file_close_dialog)->action_area;
  gtk_widget_set_name (dialog_action_area2, "dialog_action_area2");
  gtk_object_set_data (GTK_OBJECT (file_close_dialog), "dialog_action_area2", dialog_action_area2);
  gtk_widget_show (dialog_action_area2);
  gtk_container_set_border_width (GTK_CONTAINER (dialog_action_area2), 10);

  file_close_buttons = gtk_hbutton_box_new ();
  gtk_widget_set_name (file_close_buttons, "file_close_buttons");
  gtk_widget_ref (file_close_buttons);
  gtk_object_set_data_full (GTK_OBJECT (file_close_dialog), "file_close_buttons", file_close_buttons,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (file_close_buttons);
  gtk_box_pack_start (GTK_BOX (dialog_action_area2), file_close_buttons, TRUE, TRUE, 0);
  gtk_container_set_border_width (GTK_CONTAINER (file_close_buttons), 5);

  file_close_button_action = gtk_button_new_with_label ("Close");
  gtk_widget_set_name (file_close_button_action, "file_close_button_action");
  gtk_widget_ref (file_close_button_action);
  gtk_object_set_data_full (GTK_OBJECT (file_close_dialog), "file_close_button_action", file_close_button_action,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (file_close_button_action);
  gtk_container_add (GTK_CONTAINER (file_close_buttons), file_close_button_action);
  GTK_WIDGET_SET_FLAGS (file_close_button_action, GTK_CAN_DEFAULT);

  file_close_button_cancel = gtk_button_new_with_label ("Cancel");
  gtk_widget_set_name (file_close_button_cancel, "file_close_button_cancel");
  gtk_widget_ref (file_close_button_cancel);
  gtk_object_set_data_full (GTK_OBJECT (file_close_dialog), "file_close_button_cancel", file_close_button_cancel,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (file_close_button_cancel);
  gtk_container_add (GTK_CONTAINER (file_close_buttons), file_close_button_cancel);
  GTK_WIDGET_SET_FLAGS (file_close_button_cancel, GTK_CAN_DEFAULT);
  gtk_widget_add_accelerator (file_close_button_cancel, "clicked", accel_group,
                              GDK_Escape, 0,
                              GTK_ACCEL_VISIBLE);

  gtk_signal_connect (GTK_OBJECT (file_close_button_action), "clicked",
                      GTK_SIGNAL_FUNC (on_file_close_button_action_clicked),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (file_close_button_cancel), "clicked",
                      GTK_SIGNAL_FUNC (on_file_close_button_cancel_clicked),
                      NULL);

  gtk_widget_grab_default (file_close_button_cancel);
  gtk_window_add_accel_group (GTK_WINDOW (file_close_dialog), accel_group);

  return file_close_dialog;
}

GtkWidget*
create_file_import_select (void)
{
  GtkWidget *file_import_select;
  GtkWidget *file_import_okbutton;
  GtkWidget *file_import_cancelbutton;
  GtkAccelGroup *accel_group;

  accel_group = gtk_accel_group_new ();

  file_import_select = gtk_file_selection_new ("Select Import File");
  gtk_widget_set_name (file_import_select, "file_import_select");
  gtk_object_set_data (GTK_OBJECT (file_import_select), "file_import_select", file_import_select);
  gtk_container_set_border_width (GTK_CONTAINER (file_import_select), 10);
  gtk_window_set_position (GTK_WINDOW (file_import_select), GTK_WIN_POS_MOUSE);

  file_import_okbutton = GTK_FILE_SELECTION (file_import_select)->ok_button;
  gtk_widget_set_name (file_import_okbutton, "file_import_okbutton");
  gtk_object_set_data (GTK_OBJECT (file_import_select), "file_import_okbutton", file_import_okbutton);
  gtk_widget_show (file_import_okbutton);
  GTK_WIDGET_SET_FLAGS (file_import_okbutton, GTK_CAN_DEFAULT);
  gtk_widget_add_accelerator (file_import_okbutton, "clicked", accel_group,
                              GDK_O, GDK_MOD1_MASK,
                              GTK_ACCEL_VISIBLE);

  file_import_cancelbutton = GTK_FILE_SELECTION (file_import_select)->cancel_button;
  gtk_widget_set_name (file_import_cancelbutton, "file_import_cancelbutton");
  gtk_object_set_data (GTK_OBJECT (file_import_select), "file_import_cancelbutton", file_import_cancelbutton);
  gtk_widget_show (file_import_cancelbutton);
  GTK_WIDGET_SET_FLAGS (file_import_cancelbutton, GTK_CAN_DEFAULT);
  gtk_widget_add_accelerator (file_import_cancelbutton, "clicked", accel_group,
                              GDK_C, GDK_MOD1_MASK,
                              GTK_ACCEL_VISIBLE);
  gtk_widget_add_accelerator (file_import_cancelbutton, "clicked", accel_group,
                              GDK_Escape, 0,
                              GTK_ACCEL_VISIBLE);

  gtk_signal_connect (GTK_OBJECT (file_import_okbutton), "clicked",
                      GTK_SIGNAL_FUNC (on_file_import_okbutton_clicked),
                      file_import_select);
  gtk_signal_connect (GTK_OBJECT (file_import_cancelbutton), "clicked",
                      GTK_SIGNAL_FUNC (on_file_import_cancelbutton_clicked),
                      file_import_select);

  gtk_window_add_accel_group (GTK_WINDOW (file_import_select), accel_group);

  return file_import_select;
}

GtkWidget*
create_file_export_select (void)
{
  GtkWidget *file_export_select;
  GtkWidget *file_export_okbutton;
  GtkWidget *file_export_cancelbutton;
  GtkAccelGroup *accel_group;

  accel_group = gtk_accel_group_new ();

  file_export_select = gtk_file_selection_new ("Select Export File");
  gtk_widget_set_name (file_export_select, "file_export_select");
  gtk_object_set_data (GTK_OBJECT (file_export_select), "file_export_select", file_export_select);
  gtk_container_set_border_width (GTK_CONTAINER (file_export_select), 10);
  gtk_window_set_position (GTK_WINDOW (file_export_select), GTK_WIN_POS_MOUSE);

  file_export_okbutton = GTK_FILE_SELECTION (file_export_select)->ok_button;
  gtk_widget_set_name (file_export_okbutton, "file_export_okbutton");
  gtk_object_set_data (GTK_OBJECT (file_export_select), "file_export_okbutton", file_export_okbutton);
  gtk_widget_show (file_export_okbutton);
  GTK_WIDGET_SET_FLAGS (file_export_okbutton, GTK_CAN_DEFAULT);
  gtk_widget_add_accelerator (file_export_okbutton, "clicked", accel_group,
                              GDK_O, GDK_MOD1_MASK,
                              GTK_ACCEL_VISIBLE);

  file_export_cancelbutton = GTK_FILE_SELECTION (file_export_select)->cancel_button;
  gtk_widget_set_name (file_export_cancelbutton, "file_export_cancelbutton");
  gtk_object_set_data (GTK_OBJECT (file_export_select), "file_export_cancelbutton", file_export_cancelbutton);
  gtk_widget_show (file_export_cancelbutton);
  GTK_WIDGET_SET_FLAGS (file_export_cancelbutton, GTK_CAN_DEFAULT);
  gtk_widget_add_accelerator (file_export_cancelbutton, "clicked", accel_group,
                              GDK_Escape, 0,
                              GTK_ACCEL_VISIBLE);
  gtk_widget_add_accelerator (file_export_cancelbutton, "clicked", accel_group,
                              GDK_C, GDK_MOD1_MASK,
                              GTK_ACCEL_VISIBLE);

  gtk_signal_connect (GTK_OBJECT (file_export_okbutton), "clicked",
                      GTK_SIGNAL_FUNC (on_file_export_okbutton_clicked),
                      file_export_select);
  gtk_signal_connect (GTK_OBJECT (file_export_cancelbutton), "clicked",
                      GTK_SIGNAL_FUNC (on_file_export_cancelbutton_clicked),
                      file_export_select);

  gtk_window_add_accel_group (GTK_WINDOW (file_export_select), accel_group);

  return file_export_select;
}

GtkWidget*
create_data_app_window (void)
{
  GtkWidget *data_app_window;
  GtkWidget *vbox2;
  GtkWidget *data_app_layout;
  GtkWidget *data_app_type_prompt;
  GtkWidget *data_app_cmd_prompt;
  GtkWidget *data_app_header_prompt;
  GtkWidget *data_app_title_opt;
  GtkWidget *data_app_info_opt;
  GtkWidget *data_app_column_prompt;
  GtkWidget *data_app_file_types;
  GtkWidget *data_app_file_types_menu;
  GtkWidget *glade_menuitem;
  guint data_app_time_opt_key;
  GtkWidget *data_app_time_opt;
  guint data_app_seq_opt_key;
  GtkWidget *data_app_seq_opt;
  GtkWidget *data_app_combo;
  GList *data_app_combo_items = NULL;
  GtkWidget *data_app_cmd;
  GtkWidget *data_app_progress;
  GtkWidget *data_app_img2;
  GtkWidget *data_app_buttons;
  guint data_app_action_key;
  GtkWidget *data_app_action;
  guint data_app_cancel_key;
  GtkWidget *data_app_cancel;
  guint data_app_help_key;
  GtkWidget *data_app_help;
  GtkAccelGroup *accel_group;
  GtkTooltips *tooltips;

  tooltips = gtk_tooltips_new ();

  accel_group = gtk_accel_group_new ();

  data_app_window = gtk_dialog_new ();
  gtk_widget_set_name (data_app_window, "data_app_window");
  gtk_object_set_data (GTK_OBJECT (data_app_window), "data_app_window", data_app_window);
  gtk_window_set_title (GTK_WINDOW (data_app_window), "Send Data to Application");
  gtk_window_set_position (GTK_WINDOW (data_app_window), GTK_WIN_POS_MOUSE);
  gtk_window_set_policy (GTK_WINDOW (data_app_window), TRUE, TRUE, FALSE);

  vbox2 = GTK_DIALOG (data_app_window)->vbox;
  gtk_widget_set_name (vbox2, "vbox2");
  gtk_object_set_data (GTK_OBJECT (data_app_window), "vbox2", vbox2);
  gtk_widget_show (vbox2);

  data_app_layout = gtk_table_new (9, 4, FALSE);
  gtk_widget_set_name (data_app_layout, "data_app_layout");
  gtk_widget_ref (data_app_layout);
  gtk_object_set_data_full (GTK_OBJECT (data_app_window), "data_app_layout", data_app_layout,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_app_layout);
  gtk_box_pack_start (GTK_BOX (vbox2), data_app_layout, TRUE, TRUE, 0);
  gtk_widget_set_usize (data_app_layout, 400, -2);
  gtk_container_set_border_width (GTK_CONTAINER (data_app_layout), 10);
  gtk_table_set_row_spacings (GTK_TABLE (data_app_layout), 2);
  gtk_table_set_col_spacings (GTK_TABLE (data_app_layout), 6);

  data_app_type_prompt = gtk_label_new ("Format:");
  gtk_widget_set_name (data_app_type_prompt, "data_app_type_prompt");
  gtk_widget_ref (data_app_type_prompt);
  gtk_object_set_data_full (GTK_OBJECT (data_app_window), "data_app_type_prompt", data_app_type_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_app_type_prompt);
  gtk_table_attach (GTK_TABLE (data_app_layout), data_app_type_prompt, 0, 1, 3, 4,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_label_set_justify (GTK_LABEL (data_app_type_prompt), GTK_JUSTIFY_LEFT);
  gtk_misc_set_alignment (GTK_MISC (data_app_type_prompt), 0, 0.5);

  data_app_cmd_prompt = gtk_label_new ("Command:");
  gtk_widget_set_name (data_app_cmd_prompt, "data_app_cmd_prompt");
  gtk_widget_ref (data_app_cmd_prompt);
  gtk_object_set_data_full (GTK_OBJECT (data_app_window), "data_app_cmd_prompt", data_app_cmd_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_app_cmd_prompt);
  gtk_table_attach (GTK_TABLE (data_app_layout), data_app_cmd_prompt, 0, 1, 6, 7,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_label_set_justify (GTK_LABEL (data_app_cmd_prompt), GTK_JUSTIFY_LEFT);
  gtk_misc_set_alignment (GTK_MISC (data_app_cmd_prompt), 0, 0.5);

  data_app_header_prompt = gtk_label_new ("Headers:");
  gtk_widget_set_name (data_app_header_prompt, "data_app_header_prompt");
  gtk_widget_ref (data_app_header_prompt);
  gtk_object_set_data_full (GTK_OBJECT (data_app_window), "data_app_header_prompt", data_app_header_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_app_header_prompt);
  gtk_table_attach (GTK_TABLE (data_app_layout), data_app_header_prompt, 0, 1, 4, 5,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_misc_set_alignment (GTK_MISC (data_app_header_prompt), 0, 0.5);

  data_app_title_opt = gtk_check_button_new_with_label ("column names");
  gtk_widget_set_name (data_app_title_opt, "data_app_title_opt");
  gtk_widget_ref (data_app_title_opt);
  gtk_object_set_data_full (GTK_OBJECT (data_app_window), "data_app_title_opt", data_app_title_opt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_app_title_opt);
  gtk_table_attach (GTK_TABLE (data_app_layout), data_app_title_opt, 1, 2, 4, 5,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (data_app_title_opt), TRUE);

  data_app_info_opt = gtk_check_button_new_with_label ("info lines");
  gtk_widget_set_name (data_app_info_opt, "data_app_info_opt");
  gtk_widget_ref (data_app_info_opt);
  gtk_object_set_data_full (GTK_OBJECT (data_app_window), "data_app_info_opt", data_app_info_opt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_app_info_opt);
  gtk_table_attach (GTK_TABLE (data_app_layout), data_app_info_opt, 2, 3, 4, 5,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (data_app_info_opt), TRUE);

  data_app_column_prompt = gtk_label_new ("Columns:");
  gtk_widget_set_name (data_app_column_prompt, "data_app_column_prompt");
  gtk_widget_ref (data_app_column_prompt);
  gtk_object_set_data_full (GTK_OBJECT (data_app_window), "data_app_column_prompt", data_app_column_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_app_column_prompt);
  gtk_table_attach (GTK_TABLE (data_app_layout), data_app_column_prompt, 0, 1, 5, 6,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_misc_set_alignment (GTK_MISC (data_app_column_prompt), 0, 0.5);

  data_app_file_types = gtk_option_menu_new ();
  gtk_widget_set_name (data_app_file_types, "data_app_file_types");
  gtk_widget_ref (data_app_file_types);
  gtk_object_set_data_full (GTK_OBJECT (data_app_window), "data_app_file_types", data_app_file_types,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_app_file_types);
  gtk_table_attach (GTK_TABLE (data_app_layout), data_app_file_types, 1, 3, 3, 4,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_tooltips_set_tip (tooltips, data_app_file_types, "Format to export", NULL);
  data_app_file_types_menu = gtk_menu_new ();
  glade_menuitem = gtk_menu_item_new_with_label ("csv - comma separated values");
  gtk_widget_show (glade_menuitem);
  gtk_menu_append (GTK_MENU (data_app_file_types_menu), glade_menuitem);
  glade_menuitem = gtk_menu_item_new_with_label ("fha - fat headed array");
  gtk_widget_show (glade_menuitem);
  gtk_menu_append (GTK_MENU (data_app_file_types_menu), glade_menuitem);
  gtk_option_menu_set_menu (GTK_OPTION_MENU (data_app_file_types), data_app_file_types_menu);

  data_app_time_opt = gtk_check_button_new_with_label ("");
  data_app_time_opt_key = gtk_label_parse_uline (GTK_LABEL (GTK_BIN (data_app_time_opt)->child),
                                   "timestamp (__time)");
  gtk_widget_add_accelerator (data_app_time_opt, "clicked", accel_group,
                              data_app_time_opt_key, GDK_MOD1_MASK, (GtkAccelFlags) 0);
  gtk_widget_set_name (data_app_time_opt, "data_app_time_opt");
  gtk_widget_ref (data_app_time_opt);
  gtk_object_set_data_full (GTK_OBJECT (data_app_window), "data_app_time_opt", data_app_time_opt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_app_time_opt);
  gtk_table_attach (GTK_TABLE (data_app_layout), data_app_time_opt, 1, 2, 5, 6,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (data_app_time_opt), TRUE);

  data_app_seq_opt = gtk_check_button_new_with_label ("");
  data_app_seq_opt_key = gtk_label_parse_uline (GTK_LABEL (GTK_BIN (data_app_seq_opt)->child),
                                   "sequence (__seq)");
  gtk_widget_add_accelerator (data_app_seq_opt, "clicked", accel_group,
                              data_app_seq_opt_key, GDK_MOD1_MASK, (GtkAccelFlags) 0);
  gtk_widget_set_name (data_app_seq_opt, "data_app_seq_opt");
  gtk_widget_ref (data_app_seq_opt);
  gtk_object_set_data_full (GTK_OBJECT (data_app_window), "data_app_seq_opt", data_app_seq_opt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_app_seq_opt);
  gtk_table_attach (GTK_TABLE (data_app_layout), data_app_seq_opt, 2, 3, 5, 6,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (data_app_seq_opt), TRUE);

  data_app_combo = gtk_combo_new ();
  gtk_widget_set_name (data_app_combo, "data_app_combo");
  gtk_widget_ref (data_app_combo);
  gtk_object_set_data_full (GTK_OBJECT (data_app_window), "data_app_combo", data_app_combo,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_app_combo);
  gtk_table_attach (GTK_TABLE (data_app_layout), data_app_combo, 1, 3, 6, 7,
                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  data_app_combo_items = g_list_append (data_app_combo_items, (gpointer) "");
  data_app_combo_items = g_list_append (data_app_combo_items, (gpointer) "gnuplot %f");
  data_app_combo_items = g_list_append (data_app_combo_items, (gpointer) "gnumeric %f");
  data_app_combo_items = g_list_append (data_app_combo_items, (gpointer) "kchart %f");
  data_app_combo_items = g_list_append (data_app_combo_items, (gpointer) "kspread %f");
  data_app_combo_items = g_list_append (data_app_combo_items, (gpointer) "soffice %f");
  gtk_combo_set_popdown_strings (GTK_COMBO (data_app_combo), data_app_combo_items);
  g_list_free (data_app_combo_items);

  data_app_cmd = GTK_COMBO (data_app_combo)->entry;
  gtk_widget_set_name (data_app_cmd, "data_app_cmd");
  gtk_widget_ref (data_app_cmd);
  gtk_object_set_data_full (GTK_OBJECT (data_app_window), "data_app_cmd", data_app_cmd,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_app_cmd);

  data_app_progress = gtk_progress_bar_new ();
  gtk_widget_set_name (data_app_progress, "data_app_progress");
  gtk_widget_ref (data_app_progress);
  gtk_object_set_data_full (GTK_OBJECT (data_app_window), "data_app_progress", data_app_progress,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_app_progress);
  gtk_table_attach (GTK_TABLE (data_app_layout), data_app_progress, 1, 3, 8, 9,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_progress_set_show_text (GTK_PROGRESS (data_app_progress), TRUE);
  gtk_progress_set_format_string (GTK_PROGRESS (data_app_progress), "");

  data_app_img2 = create_pixmap (data_app_window, NULL);
  gtk_widget_set_name (data_app_img2, "data_app_img2");
  gtk_widget_ref (data_app_img2);
  gtk_object_set_data_full (GTK_OBJECT (data_app_window), "data_app_img2", data_app_img2,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_app_img2);
  gtk_table_attach (GTK_TABLE (data_app_layout), data_app_img2, 1, 3, 7, 8,
                    (GtkAttachOptions) (GTK_SHRINK | GTK_FILL),
                    (GtkAttachOptions) (GTK_SHRINK | GTK_FILL), 0, 0);
  gtk_widget_set_usize (data_app_img2, -2, 20);
  gtk_widget_set_sensitive (data_app_img2, FALSE);
  gtk_misc_set_padding (GTK_MISC (data_app_img2), 0, 20);

  data_app_buttons = GTK_DIALOG (data_app_window)->action_area;
  gtk_widget_set_name (data_app_buttons, "data_app_buttons");
  gtk_object_set_data (GTK_OBJECT (data_app_window), "data_app_buttons", data_app_buttons);
  gtk_widget_show (data_app_buttons);
  gtk_container_set_border_width (GTK_CONTAINER (data_app_buttons), 10);

  data_app_action = gtk_button_new_with_label ("");
  data_app_action_key = gtk_label_parse_uline (GTK_LABEL (GTK_BIN (data_app_action)->child),
                                   "_Run");
  gtk_widget_add_accelerator (data_app_action, "clicked", accel_group,
                              data_app_action_key, GDK_MOD1_MASK, (GtkAccelFlags) 0);
  gtk_widget_set_name (data_app_action, "data_app_action");
  gtk_widget_ref (data_app_action);
  gtk_object_set_data_full (GTK_OBJECT (data_app_window), "data_app_action", data_app_action,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_app_action);
  gtk_box_pack_start (GTK_BOX (data_app_buttons), data_app_action, FALSE, FALSE, 0);
  gtk_widget_set_usize (data_app_action, 60, -2);
  gtk_widget_add_accelerator (data_app_action, "clicked", accel_group,
                              GDK_R, GDK_MOD1_MASK,
                              GTK_ACCEL_VISIBLE);

  data_app_cancel = gtk_button_new_with_label ("");
  data_app_cancel_key = gtk_label_parse_uline (GTK_LABEL (GTK_BIN (data_app_cancel)->child),
                                   "_Finished");
  gtk_widget_add_accelerator (data_app_cancel, "clicked", accel_group,
                              data_app_cancel_key, GDK_MOD1_MASK, (GtkAccelFlags) 0);
  gtk_widget_set_name (data_app_cancel, "data_app_cancel");
  gtk_widget_ref (data_app_cancel);
  gtk_object_set_data_full (GTK_OBJECT (data_app_window), "data_app_cancel", data_app_cancel,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_app_cancel);
  gtk_box_pack_start (GTK_BOX (data_app_buttons), data_app_cancel, FALSE, FALSE, 0);
  gtk_widget_set_usize (data_app_cancel, 60, -2);
  gtk_widget_add_accelerator (data_app_cancel, "clicked", accel_group,
                              GDK_Escape, 0,
                              GTK_ACCEL_VISIBLE);
  gtk_widget_add_accelerator (data_app_cancel, "clicked", accel_group,
                              GDK_F, GDK_MOD1_MASK,
                              GTK_ACCEL_VISIBLE);

  data_app_help = gtk_button_new_with_label ("");
  data_app_help_key = gtk_label_parse_uline (GTK_LABEL (GTK_BIN (data_app_help)->child),
                                   "_Help");
  gtk_widget_add_accelerator (data_app_help, "clicked", accel_group,
                              data_app_help_key, GDK_MOD1_MASK, (GtkAccelFlags) 0);
  gtk_widget_set_name (data_app_help, "data_app_help");
  gtk_widget_ref (data_app_help);
  gtk_object_set_data_full (GTK_OBJECT (data_app_window), "data_app_help", data_app_help,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_app_help);
  gtk_box_pack_start (GTK_BOX (data_app_buttons), data_app_help, FALSE, FALSE, 0);
  gtk_widget_set_usize (data_app_help, 60, -2);
  gtk_widget_add_accelerator (data_app_help, "clicked", accel_group,
                              GDK_H, GDK_MOD1_MASK,
                              GTK_ACCEL_VISIBLE);
  gtk_widget_add_accelerator (data_app_help, "clicked", accel_group,
                              GDK_F1, 0,
                              GTK_ACCEL_VISIBLE);

  gtk_signal_connect (GTK_OBJECT (data_app_action), "clicked",
                      GTK_SIGNAL_FUNC (on_data_app_action_clicked),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (data_app_cancel), "clicked",
                      GTK_SIGNAL_FUNC (on_data_app_finished_clicked),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (data_app_help), "clicked",
                      GTK_SIGNAL_FUNC (on_data_app_help_clicked),
                      NULL);

  gtk_object_set_data (GTK_OBJECT (data_app_window), "tooltips", tooltips);

  gtk_window_add_accel_group (GTK_WINDOW (data_app_window), accel_group);

  return data_app_window;
}

GtkWidget*
create_data_email_window (void)
{
  GtkWidget *data_email_window;
  GtkWidget *vbox3;
  GtkWidget *data_email_layout;
  GtkWidget *data_email_progress;
  GtkWidget *data_email_img2;
  GtkWidget *data_email_type_prompt;
  GtkWidget *data_email_file_type;
  GtkWidget *data_email_file_type_menu;
  GtkWidget *glade_menuitem;
  GtkWidget *data_email_header_prompt;
  GtkWidget *data_email_title_opt;
  GtkWidget *data_email_info_opt;
  guint data_email_seq_opt_key;
  GtkWidget *data_email_seq_opt;
  guint data_email_time_opt_key;
  GtkWidget *data_email_time_opt;
  GtkWidget *data_email_column_prompt;
  GtkWidget *data_email_to_prompt;
  GtkWidget *data_email_to_combo;
  GtkWidget *data_email_to;
  GtkWidget *data_email_cc_prompt;
  GtkWidget *data_email_subject_prompt;
  GtkWidget *data_email_cc_combo;
  GtkWidget *data_email_cc;
  GtkWidget *data_email_subject_combo;
  GList *data_email_subject_combo_items = NULL;
  GtkWidget *data_email_subject;
  GtkWidget *data_email_buttons;
  guint data_email_action_key;
  GtkWidget *data_email_action;
  guint data_email_cancel_key;
  GtkWidget *data_email_cancel;
  guint data_email_help_key;
  GtkWidget *data_email_help;
  GtkAccelGroup *accel_group;
  GtkTooltips *tooltips;

  tooltips = gtk_tooltips_new ();

  accel_group = gtk_accel_group_new ();

  data_email_window = gtk_dialog_new ();
  gtk_widget_set_name (data_email_window, "data_email_window");
  gtk_object_set_data (GTK_OBJECT (data_email_window), "data_email_window", data_email_window);
  gtk_window_set_title (GTK_WINDOW (data_email_window), "Send Data via E-mail");
  gtk_window_set_position (GTK_WINDOW (data_email_window), GTK_WIN_POS_MOUSE);
  gtk_window_set_policy (GTK_WINDOW (data_email_window), TRUE, TRUE, FALSE);

  vbox3 = GTK_DIALOG (data_email_window)->vbox;
  gtk_widget_set_name (vbox3, "vbox3");
  gtk_object_set_data (GTK_OBJECT (data_email_window), "vbox3", vbox3);
  gtk_widget_show (vbox3);

  data_email_layout = gtk_table_new (9, 4, FALSE);
  gtk_widget_set_name (data_email_layout, "data_email_layout");
  gtk_widget_ref (data_email_layout);
  gtk_object_set_data_full (GTK_OBJECT (data_email_window), "data_email_layout", data_email_layout,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_email_layout);
  gtk_box_pack_start (GTK_BOX (vbox3), data_email_layout, TRUE, TRUE, 0);
  gtk_widget_set_usize (data_email_layout, 400, -2);
  gtk_container_set_border_width (GTK_CONTAINER (data_email_layout), 10);
  gtk_table_set_row_spacings (GTK_TABLE (data_email_layout), 2);
  gtk_table_set_col_spacings (GTK_TABLE (data_email_layout), 6);

  data_email_progress = gtk_progress_bar_new ();
  gtk_widget_set_name (data_email_progress, "data_email_progress");
  gtk_widget_ref (data_email_progress);
  gtk_object_set_data_full (GTK_OBJECT (data_email_window), "data_email_progress", data_email_progress,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_email_progress);
  gtk_table_attach (GTK_TABLE (data_email_layout), data_email_progress, 1, 3, 8, 9,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_progress_set_show_text (GTK_PROGRESS (data_email_progress), TRUE);
  gtk_progress_set_format_string (GTK_PROGRESS (data_email_progress), "");

  data_email_img2 = create_pixmap (data_email_window, NULL);
  gtk_widget_set_name (data_email_img2, "data_email_img2");
  gtk_widget_ref (data_email_img2);
  gtk_object_set_data_full (GTK_OBJECT (data_email_window), "data_email_img2", data_email_img2,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_email_img2);
  gtk_table_attach (GTK_TABLE (data_email_layout), data_email_img2, 1, 3, 7, 8,
                    (GtkAttachOptions) (GTK_SHRINK | GTK_FILL),
                    (GtkAttachOptions) (GTK_SHRINK | GTK_FILL), 0, 0);
  gtk_widget_set_usize (data_email_img2, -2, 20);
  gtk_widget_set_sensitive (data_email_img2, FALSE);
  gtk_misc_set_padding (GTK_MISC (data_email_img2), 0, 20);

  data_email_type_prompt = gtk_label_new ("Format:");
  gtk_widget_set_name (data_email_type_prompt, "data_email_type_prompt");
  gtk_widget_ref (data_email_type_prompt);
  gtk_object_set_data_full (GTK_OBJECT (data_email_window), "data_email_type_prompt", data_email_type_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_email_type_prompt);
  gtk_table_attach (GTK_TABLE (data_email_layout), data_email_type_prompt, 0, 1, 0, 1,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_label_set_justify (GTK_LABEL (data_email_type_prompt), GTK_JUSTIFY_LEFT);
  gtk_misc_set_alignment (GTK_MISC (data_email_type_prompt), 0, 0.5);

  data_email_file_type = gtk_option_menu_new ();
  gtk_widget_set_name (data_email_file_type, "data_email_file_type");
  gtk_widget_ref (data_email_file_type);
  gtk_object_set_data_full (GTK_OBJECT (data_email_window), "data_email_file_type", data_email_file_type,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_email_file_type);
  gtk_table_attach (GTK_TABLE (data_email_layout), data_email_file_type, 1, 3, 0, 1,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_tooltips_set_tip (tooltips, data_email_file_type, "Format to export", NULL);
  data_email_file_type_menu = gtk_menu_new ();
  glade_menuitem = gtk_menu_item_new_with_label ("csv - comma separated values");
  gtk_widget_show (glade_menuitem);
  gtk_menu_append (GTK_MENU (data_email_file_type_menu), glade_menuitem);
  glade_menuitem = gtk_menu_item_new_with_label ("fha - fat headed array");
  gtk_widget_show (glade_menuitem);
  gtk_menu_append (GTK_MENU (data_email_file_type_menu), glade_menuitem);
  gtk_option_menu_set_menu (GTK_OPTION_MENU (data_email_file_type), data_email_file_type_menu);

  data_email_header_prompt = gtk_label_new ("Headers:");
  gtk_widget_set_name (data_email_header_prompt, "data_email_header_prompt");
  gtk_widget_ref (data_email_header_prompt);
  gtk_object_set_data_full (GTK_OBJECT (data_email_window), "data_email_header_prompt", data_email_header_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_email_header_prompt);
  gtk_table_attach (GTK_TABLE (data_email_layout), data_email_header_prompt, 0, 1, 1, 2,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_misc_set_alignment (GTK_MISC (data_email_header_prompt), 0, 0.5);

  data_email_title_opt = gtk_check_button_new_with_label ("column names");
  gtk_widget_set_name (data_email_title_opt, "data_email_title_opt");
  gtk_widget_ref (data_email_title_opt);
  gtk_object_set_data_full (GTK_OBJECT (data_email_window), "data_email_title_opt", data_email_title_opt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_email_title_opt);
  gtk_table_attach (GTK_TABLE (data_email_layout), data_email_title_opt, 1, 2, 1, 2,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (data_email_title_opt), TRUE);

  data_email_info_opt = gtk_check_button_new_with_label ("info lines");
  gtk_widget_set_name (data_email_info_opt, "data_email_info_opt");
  gtk_widget_ref (data_email_info_opt);
  gtk_object_set_data_full (GTK_OBJECT (data_email_window), "data_email_info_opt", data_email_info_opt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_email_info_opt);
  gtk_table_attach (GTK_TABLE (data_email_layout), data_email_info_opt, 2, 3, 1, 2,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (data_email_info_opt), TRUE);

  data_email_seq_opt = gtk_check_button_new_with_label ("");
  data_email_seq_opt_key = gtk_label_parse_uline (GTK_LABEL (GTK_BIN (data_email_seq_opt)->child),
                                   "sequence (__seq)");
  gtk_widget_add_accelerator (data_email_seq_opt, "clicked", accel_group,
                              data_email_seq_opt_key, GDK_MOD1_MASK, (GtkAccelFlags) 0);
  gtk_widget_set_name (data_email_seq_opt, "data_email_seq_opt");
  gtk_widget_ref (data_email_seq_opt);
  gtk_object_set_data_full (GTK_OBJECT (data_email_window), "data_email_seq_opt", data_email_seq_opt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_email_seq_opt);
  gtk_table_attach (GTK_TABLE (data_email_layout), data_email_seq_opt, 2, 3, 2, 3,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (data_email_seq_opt), TRUE);

  data_email_time_opt = gtk_check_button_new_with_label ("");
  data_email_time_opt_key = gtk_label_parse_uline (GTK_LABEL (GTK_BIN (data_email_time_opt)->child),
                                   "timestamp (__time)");
  gtk_widget_add_accelerator (data_email_time_opt, "clicked", accel_group,
                              data_email_time_opt_key, GDK_MOD1_MASK, (GtkAccelFlags) 0);
  gtk_widget_set_name (data_email_time_opt, "data_email_time_opt");
  gtk_widget_ref (data_email_time_opt);
  gtk_object_set_data_full (GTK_OBJECT (data_email_window), "data_email_time_opt", data_email_time_opt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_email_time_opt);
  gtk_table_attach (GTK_TABLE (data_email_layout), data_email_time_opt, 1, 2, 2, 3,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (data_email_time_opt), TRUE);

  data_email_column_prompt = gtk_label_new ("Columns:");
  gtk_widget_set_name (data_email_column_prompt, "data_email_column_prompt");
  gtk_widget_ref (data_email_column_prompt);
  gtk_object_set_data_full (GTK_OBJECT (data_email_window), "data_email_column_prompt", data_email_column_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_email_column_prompt);
  gtk_table_attach (GTK_TABLE (data_email_layout), data_email_column_prompt, 0, 1, 2, 3,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_misc_set_alignment (GTK_MISC (data_email_column_prompt), 0, 0.5);

  data_email_to_prompt = gtk_label_new ("To:");
  gtk_widget_set_name (data_email_to_prompt, "data_email_to_prompt");
  gtk_widget_ref (data_email_to_prompt);
  gtk_object_set_data_full (GTK_OBJECT (data_email_window), "data_email_to_prompt", data_email_to_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_email_to_prompt);
  gtk_table_attach (GTK_TABLE (data_email_layout), data_email_to_prompt, 0, 1, 3, 4,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_label_set_justify (GTK_LABEL (data_email_to_prompt), GTK_JUSTIFY_LEFT);
  gtk_misc_set_alignment (GTK_MISC (data_email_to_prompt), 0, 0.5);

  data_email_to_combo = gtk_combo_new ();
  gtk_widget_set_name (data_email_to_combo, "data_email_to_combo");
  gtk_widget_ref (data_email_to_combo);
  gtk_object_set_data_full (GTK_OBJECT (data_email_window), "data_email_to_combo", data_email_to_combo,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_email_to_combo);
  gtk_table_attach (GTK_TABLE (data_email_layout), data_email_to_combo, 1, 3, 3, 4,
                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);

  data_email_to = GTK_COMBO (data_email_to_combo)->entry;
  gtk_widget_set_name (data_email_to, "data_email_to");
  gtk_widget_ref (data_email_to);
  gtk_object_set_data_full (GTK_OBJECT (data_email_window), "data_email_to", data_email_to,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_email_to);

  data_email_cc_prompt = gtk_label_new ("Cc:");
  gtk_widget_set_name (data_email_cc_prompt, "data_email_cc_prompt");
  gtk_widget_ref (data_email_cc_prompt);
  gtk_object_set_data_full (GTK_OBJECT (data_email_window), "data_email_cc_prompt", data_email_cc_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_email_cc_prompt);
  gtk_table_attach (GTK_TABLE (data_email_layout), data_email_cc_prompt, 0, 1, 4, 5,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_label_set_justify (GTK_LABEL (data_email_cc_prompt), GTK_JUSTIFY_LEFT);
  gtk_misc_set_alignment (GTK_MISC (data_email_cc_prompt), 0, 0.5);

  data_email_subject_prompt = gtk_label_new ("Subject:");
  gtk_widget_set_name (data_email_subject_prompt, "data_email_subject_prompt");
  gtk_widget_ref (data_email_subject_prompt);
  gtk_object_set_data_full (GTK_OBJECT (data_email_window), "data_email_subject_prompt", data_email_subject_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_email_subject_prompt);
  gtk_table_attach (GTK_TABLE (data_email_layout), data_email_subject_prompt, 0, 1, 5, 6,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_label_set_justify (GTK_LABEL (data_email_subject_prompt), GTK_JUSTIFY_LEFT);
  gtk_misc_set_alignment (GTK_MISC (data_email_subject_prompt), 0, 0.5);

  data_email_cc_combo = gtk_combo_new ();
  gtk_widget_set_name (data_email_cc_combo, "data_email_cc_combo");
  gtk_widget_ref (data_email_cc_combo);
  gtk_object_set_data_full (GTK_OBJECT (data_email_window), "data_email_cc_combo", data_email_cc_combo,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_email_cc_combo);
  gtk_table_attach (GTK_TABLE (data_email_layout), data_email_cc_combo, 1, 3, 4, 5,
                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);

  data_email_cc = GTK_COMBO (data_email_cc_combo)->entry;
  gtk_widget_set_name (data_email_cc, "data_email_cc");
  gtk_widget_ref (data_email_cc);
  gtk_object_set_data_full (GTK_OBJECT (data_email_window), "data_email_cc", data_email_cc,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_email_cc);

  data_email_subject_combo = gtk_combo_new ();
  gtk_widget_set_name (data_email_subject_combo, "data_email_subject_combo");
  gtk_widget_ref (data_email_subject_combo);
  gtk_object_set_data_full (GTK_OBJECT (data_email_window), "data_email_subject_combo", data_email_subject_combo,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_email_subject_combo);
  gtk_table_attach (GTK_TABLE (data_email_layout), data_email_subject_combo, 1, 3, 5, 6,
                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  data_email_subject_combo_items = g_list_append (data_email_subject_combo_items, (gpointer) "");
  data_email_subject_combo_items = g_list_append (data_email_subject_combo_items, (gpointer) "Data from system garden habitat");
  gtk_combo_set_popdown_strings (GTK_COMBO (data_email_subject_combo), data_email_subject_combo_items);
  g_list_free (data_email_subject_combo_items);

  data_email_subject = GTK_COMBO (data_email_subject_combo)->entry;
  gtk_widget_set_name (data_email_subject, "data_email_subject");
  gtk_widget_ref (data_email_subject);
  gtk_object_set_data_full (GTK_OBJECT (data_email_window), "data_email_subject", data_email_subject,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_email_subject);

  data_email_buttons = GTK_DIALOG (data_email_window)->action_area;
  gtk_widget_set_name (data_email_buttons, "data_email_buttons");
  gtk_object_set_data (GTK_OBJECT (data_email_window), "data_email_buttons", data_email_buttons);
  gtk_widget_show (data_email_buttons);
  gtk_container_set_border_width (GTK_CONTAINER (data_email_buttons), 10);

  data_email_action = gtk_button_new_with_label ("");
  data_email_action_key = gtk_label_parse_uline (GTK_LABEL (GTK_BIN (data_email_action)->child),
                                   "_Send");
  gtk_widget_add_accelerator (data_email_action, "clicked", accel_group,
                              data_email_action_key, GDK_MOD1_MASK, (GtkAccelFlags) 0);
  gtk_widget_set_name (data_email_action, "data_email_action");
  gtk_widget_ref (data_email_action);
  gtk_object_set_data_full (GTK_OBJECT (data_email_window), "data_email_action", data_email_action,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_email_action);
  gtk_box_pack_start (GTK_BOX (data_email_buttons), data_email_action, FALSE, FALSE, 0);
  gtk_widget_set_usize (data_email_action, 60, -2);
  gtk_widget_add_accelerator (data_email_action, "clicked", accel_group,
                              GDK_S, GDK_MOD1_MASK,
                              GTK_ACCEL_VISIBLE);

  data_email_cancel = gtk_button_new_with_label ("");
  data_email_cancel_key = gtk_label_parse_uline (GTK_LABEL (GTK_BIN (data_email_cancel)->child),
                                   "_Finished");
  gtk_widget_add_accelerator (data_email_cancel, "clicked", accel_group,
                              data_email_cancel_key, GDK_MOD1_MASK, (GtkAccelFlags) 0);
  gtk_widget_set_name (data_email_cancel, "data_email_cancel");
  gtk_widget_ref (data_email_cancel);
  gtk_object_set_data_full (GTK_OBJECT (data_email_window), "data_email_cancel", data_email_cancel,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_email_cancel);
  gtk_box_pack_start (GTK_BOX (data_email_buttons), data_email_cancel, FALSE, FALSE, 0);
  gtk_widget_set_usize (data_email_cancel, 60, -2);
  gtk_widget_add_accelerator (data_email_cancel, "clicked", accel_group,
                              GDK_Escape, 0,
                              GTK_ACCEL_VISIBLE);
  gtk_widget_add_accelerator (data_email_cancel, "clicked", accel_group,
                              GDK_F, GDK_MOD1_MASK,
                              GTK_ACCEL_VISIBLE);

  data_email_help = gtk_button_new_with_label ("");
  data_email_help_key = gtk_label_parse_uline (GTK_LABEL (GTK_BIN (data_email_help)->child),
                                   "_Help");
  gtk_widget_add_accelerator (data_email_help, "clicked", accel_group,
                              data_email_help_key, GDK_MOD1_MASK, (GtkAccelFlags) 0);
  gtk_widget_set_name (data_email_help, "data_email_help");
  gtk_widget_ref (data_email_help);
  gtk_object_set_data_full (GTK_OBJECT (data_email_window), "data_email_help", data_email_help,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_email_help);
  gtk_box_pack_start (GTK_BOX (data_email_buttons), data_email_help, FALSE, FALSE, 0);
  gtk_widget_set_usize (data_email_help, 60, -2);
  gtk_widget_add_accelerator (data_email_help, "clicked", accel_group,
                              GDK_F1, 0,
                              GTK_ACCEL_VISIBLE);
  gtk_widget_add_accelerator (data_email_help, "clicked", accel_group,
                              GDK_H, GDK_MOD1_MASK,
                              GTK_ACCEL_VISIBLE);

  gtk_signal_connect (GTK_OBJECT (data_email_action), "clicked",
                      GTK_SIGNAL_FUNC (on_data_email_action_clicked),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (data_email_cancel), "clicked",
                      GTK_SIGNAL_FUNC (on_data_email_finished_clicked),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (data_email_help), "clicked",
                      GTK_SIGNAL_FUNC (on_data_email_help_clicked),
                      NULL);

  gtk_object_set_data (GTK_OBJECT (data_email_window), "tooltips", tooltips);

  gtk_window_add_accel_group (GTK_WINDOW (data_email_window), accel_group);

  return data_email_window;
}

GtkWidget*
create_data_save_window (void)
{
  GtkWidget *data_save_window;
  GtkWidget *vbox4;
  GtkWidget *data_save_layout;
  GtkWidget *data_save_type_prompt;
  GtkWidget *data_save_file_prompt;
  GtkWidget *data_save_header_prompt;
  GtkWidget *data_save_title_opt;
  GtkWidget *data_save_info_opt;
  GtkWidget *data_save_column_prompt;
  GtkWidget *data_save_file_types;
  GtkWidget *data_save_file_types_menu;
  GtkWidget *glade_menuitem;
  guint data_save_time_opt_key;
  GtkWidget *data_save_time_opt;
  guint data_save_seq_opt_key;
  GtkWidget *data_save_seq_opt;
  GtkWidget *data_save_combo;
  GList *data_save_combo_items = NULL;
  GtkWidget *data_save_file;
  GtkWidget *data_save_progress;
  GtkWidget *data_save_img2;
  GtkWidget *data_save_filesel;
  GtkWidget *data_save_buttons;
  guint data_save_action_key;
  GtkWidget *data_save_action;
  guint data_save_cancel_key;
  GtkWidget *data_save_cancel;
  GtkWidget *data_save_help;
  GtkAccelGroup *accel_group;
  GtkTooltips *tooltips;

  tooltips = gtk_tooltips_new ();

  accel_group = gtk_accel_group_new ();

  data_save_window = gtk_dialog_new ();
  gtk_widget_set_name (data_save_window, "data_save_window");
  gtk_object_set_data (GTK_OBJECT (data_save_window), "data_save_window", data_save_window);
  gtk_window_set_title (GTK_WINDOW (data_save_window), "Save Visible Data");
  gtk_window_set_position (GTK_WINDOW (data_save_window), GTK_WIN_POS_MOUSE);
  gtk_window_set_policy (GTK_WINDOW (data_save_window), TRUE, TRUE, FALSE);

  vbox4 = GTK_DIALOG (data_save_window)->vbox;
  gtk_widget_set_name (vbox4, "vbox4");
  gtk_object_set_data (GTK_OBJECT (data_save_window), "vbox4", vbox4);
  gtk_widget_show (vbox4);

  data_save_layout = gtk_table_new (9, 4, FALSE);
  gtk_widget_set_name (data_save_layout, "data_save_layout");
  gtk_widget_ref (data_save_layout);
  gtk_object_set_data_full (GTK_OBJECT (data_save_window), "data_save_layout", data_save_layout,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_save_layout);
  gtk_box_pack_start (GTK_BOX (vbox4), data_save_layout, TRUE, TRUE, 0);
  gtk_widget_set_usize (data_save_layout, 400, -2);
  gtk_container_set_border_width (GTK_CONTAINER (data_save_layout), 10);
  gtk_table_set_row_spacings (GTK_TABLE (data_save_layout), 2);
  gtk_table_set_col_spacings (GTK_TABLE (data_save_layout), 6);

  data_save_type_prompt = gtk_label_new ("Format:");
  gtk_widget_set_name (data_save_type_prompt, "data_save_type_prompt");
  gtk_widget_ref (data_save_type_prompt);
  gtk_object_set_data_full (GTK_OBJECT (data_save_window), "data_save_type_prompt", data_save_type_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_save_type_prompt);
  gtk_table_attach (GTK_TABLE (data_save_layout), data_save_type_prompt, 0, 1, 3, 4,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_label_set_justify (GTK_LABEL (data_save_type_prompt), GTK_JUSTIFY_LEFT);
  gtk_misc_set_alignment (GTK_MISC (data_save_type_prompt), 0, 0.5);

  data_save_file_prompt = gtk_label_new ("File name:");
  gtk_widget_set_name (data_save_file_prompt, "data_save_file_prompt");
  gtk_widget_ref (data_save_file_prompt);
  gtk_object_set_data_full (GTK_OBJECT (data_save_window), "data_save_file_prompt", data_save_file_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_save_file_prompt);
  gtk_table_attach (GTK_TABLE (data_save_layout), data_save_file_prompt, 0, 1, 6, 7,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_label_set_justify (GTK_LABEL (data_save_file_prompt), GTK_JUSTIFY_LEFT);
  gtk_misc_set_alignment (GTK_MISC (data_save_file_prompt), 0, 0.5);

  data_save_header_prompt = gtk_label_new ("Headers:");
  gtk_widget_set_name (data_save_header_prompt, "data_save_header_prompt");
  gtk_widget_ref (data_save_header_prompt);
  gtk_object_set_data_full (GTK_OBJECT (data_save_window), "data_save_header_prompt", data_save_header_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_save_header_prompt);
  gtk_table_attach (GTK_TABLE (data_save_layout), data_save_header_prompt, 0, 1, 4, 5,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_misc_set_alignment (GTK_MISC (data_save_header_prompt), 0, 0.5);

  data_save_title_opt = gtk_check_button_new_with_label ("column names");
  gtk_widget_set_name (data_save_title_opt, "data_save_title_opt");
  gtk_widget_ref (data_save_title_opt);
  gtk_object_set_data_full (GTK_OBJECT (data_save_window), "data_save_title_opt", data_save_title_opt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_save_title_opt);
  gtk_table_attach (GTK_TABLE (data_save_layout), data_save_title_opt, 1, 2, 4, 5,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (data_save_title_opt), TRUE);

  data_save_info_opt = gtk_check_button_new_with_label ("info lines");
  gtk_widget_set_name (data_save_info_opt, "data_save_info_opt");
  gtk_widget_ref (data_save_info_opt);
  gtk_object_set_data_full (GTK_OBJECT (data_save_window), "data_save_info_opt", data_save_info_opt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_save_info_opt);
  gtk_table_attach (GTK_TABLE (data_save_layout), data_save_info_opt, 2, 3, 4, 5,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (data_save_info_opt), TRUE);

  data_save_column_prompt = gtk_label_new ("Columns:");
  gtk_widget_set_name (data_save_column_prompt, "data_save_column_prompt");
  gtk_widget_ref (data_save_column_prompt);
  gtk_object_set_data_full (GTK_OBJECT (data_save_window), "data_save_column_prompt", data_save_column_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_save_column_prompt);
  gtk_table_attach (GTK_TABLE (data_save_layout), data_save_column_prompt, 0, 1, 5, 6,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_misc_set_alignment (GTK_MISC (data_save_column_prompt), 0, 0.5);

  data_save_file_types = gtk_option_menu_new ();
  gtk_widget_set_name (data_save_file_types, "data_save_file_types");
  gtk_widget_ref (data_save_file_types);
  gtk_object_set_data_full (GTK_OBJECT (data_save_window), "data_save_file_types", data_save_file_types,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_save_file_types);
  gtk_table_attach (GTK_TABLE (data_save_layout), data_save_file_types, 1, 3, 3, 4,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_tooltips_set_tip (tooltips, data_save_file_types, "Format to export", NULL);
  data_save_file_types_menu = gtk_menu_new ();
  glade_menuitem = gtk_menu_item_new_with_label ("csv - comma separated values");
  gtk_widget_show (glade_menuitem);
  gtk_menu_append (GTK_MENU (data_save_file_types_menu), glade_menuitem);
  glade_menuitem = gtk_menu_item_new_with_label ("fha - fat headed array");
  gtk_widget_show (glade_menuitem);
  gtk_menu_append (GTK_MENU (data_save_file_types_menu), glade_menuitem);
  gtk_option_menu_set_menu (GTK_OPTION_MENU (data_save_file_types), data_save_file_types_menu);

  data_save_time_opt = gtk_check_button_new_with_label ("");
  data_save_time_opt_key = gtk_label_parse_uline (GTK_LABEL (GTK_BIN (data_save_time_opt)->child),
                                   "timestamp (__time)");
  gtk_widget_add_accelerator (data_save_time_opt, "clicked", accel_group,
                              data_save_time_opt_key, GDK_MOD1_MASK, (GtkAccelFlags) 0);
  gtk_widget_set_name (data_save_time_opt, "data_save_time_opt");
  gtk_widget_ref (data_save_time_opt);
  gtk_object_set_data_full (GTK_OBJECT (data_save_window), "data_save_time_opt", data_save_time_opt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_save_time_opt);
  gtk_table_attach (GTK_TABLE (data_save_layout), data_save_time_opt, 1, 2, 5, 6,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (data_save_time_opt), TRUE);

  data_save_seq_opt = gtk_check_button_new_with_label ("");
  data_save_seq_opt_key = gtk_label_parse_uline (GTK_LABEL (GTK_BIN (data_save_seq_opt)->child),
                                   "sequence (__seq)");
  gtk_widget_add_accelerator (data_save_seq_opt, "clicked", accel_group,
                              data_save_seq_opt_key, GDK_MOD1_MASK, (GtkAccelFlags) 0);
  gtk_widget_set_name (data_save_seq_opt, "data_save_seq_opt");
  gtk_widget_ref (data_save_seq_opt);
  gtk_object_set_data_full (GTK_OBJECT (data_save_window), "data_save_seq_opt", data_save_seq_opt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_save_seq_opt);
  gtk_table_attach (GTK_TABLE (data_save_layout), data_save_seq_opt, 2, 3, 5, 6,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (data_save_seq_opt), TRUE);

  data_save_combo = gtk_combo_new ();
  gtk_widget_set_name (data_save_combo, "data_save_combo");
  gtk_widget_ref (data_save_combo);
  gtk_object_set_data_full (GTK_OBJECT (data_save_window), "data_save_combo", data_save_combo,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_save_combo);
  gtk_table_attach (GTK_TABLE (data_save_layout), data_save_combo, 1, 3, 6, 7,
                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  data_save_combo_items = g_list_append (data_save_combo_items, (gpointer) "");
  data_save_combo_items = g_list_append (data_save_combo_items, (gpointer) "viewed_data.csv");
  gtk_combo_set_popdown_strings (GTK_COMBO (data_save_combo), data_save_combo_items);
  g_list_free (data_save_combo_items);

  data_save_file = GTK_COMBO (data_save_combo)->entry;
  gtk_widget_set_name (data_save_file, "data_save_file");
  gtk_widget_ref (data_save_file);
  gtk_object_set_data_full (GTK_OBJECT (data_save_window), "data_save_file", data_save_file,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_save_file);

  data_save_progress = gtk_progress_bar_new ();
  gtk_widget_set_name (data_save_progress, "data_save_progress");
  gtk_widget_ref (data_save_progress);
  gtk_object_set_data_full (GTK_OBJECT (data_save_window), "data_save_progress", data_save_progress,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_save_progress);
  gtk_table_attach (GTK_TABLE (data_save_layout), data_save_progress, 1, 3, 8, 9,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_progress_set_show_text (GTK_PROGRESS (data_save_progress), TRUE);
  gtk_progress_set_format_string (GTK_PROGRESS (data_save_progress), "");

  data_save_img2 = create_pixmap (data_save_window, NULL);
  gtk_widget_set_name (data_save_img2, "data_save_img2");
  gtk_widget_ref (data_save_img2);
  gtk_object_set_data_full (GTK_OBJECT (data_save_window), "data_save_img2", data_save_img2,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_save_img2);
  gtk_table_attach (GTK_TABLE (data_save_layout), data_save_img2, 1, 3, 7, 8,
                    (GtkAttachOptions) (GTK_SHRINK | GTK_FILL),
                    (GtkAttachOptions) (GTK_SHRINK | GTK_FILL), 0, 0);
  gtk_widget_set_usize (data_save_img2, -2, 20);
  gtk_widget_set_sensitive (data_save_img2, FALSE);
  gtk_misc_set_padding (GTK_MISC (data_save_img2), 0, 20);

  data_save_filesel = gtk_button_new_with_label ("...");
  gtk_widget_set_name (data_save_filesel, "data_save_filesel");
  gtk_widget_ref (data_save_filesel);
  gtk_object_set_data_full (GTK_OBJECT (data_save_window), "data_save_filesel", data_save_filesel,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_save_filesel);
  gtk_table_attach (GTK_TABLE (data_save_layout), data_save_filesel, 3, 4, 6, 7,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_tooltips_set_tip (tooltips, data_save_filesel, "Find output file with a selection tool", NULL);

  data_save_buttons = GTK_DIALOG (data_save_window)->action_area;
  gtk_widget_set_name (data_save_buttons, "data_save_buttons");
  gtk_object_set_data (GTK_OBJECT (data_save_window), "data_save_buttons", data_save_buttons);
  gtk_widget_show (data_save_buttons);
  gtk_container_set_border_width (GTK_CONTAINER (data_save_buttons), 10);

  data_save_action = gtk_button_new_with_label ("");
  data_save_action_key = gtk_label_parse_uline (GTK_LABEL (GTK_BIN (data_save_action)->child),
                                   "_Save");
  gtk_widget_add_accelerator (data_save_action, "clicked", accel_group,
                              data_save_action_key, GDK_MOD1_MASK, (GtkAccelFlags) 0);
  gtk_widget_set_name (data_save_action, "data_save_action");
  gtk_widget_ref (data_save_action);
  gtk_object_set_data_full (GTK_OBJECT (data_save_window), "data_save_action", data_save_action,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_save_action);
  gtk_box_pack_start (GTK_BOX (data_save_buttons), data_save_action, FALSE, FALSE, 0);
  gtk_widget_set_usize (data_save_action, 60, -2);
  gtk_widget_add_accelerator (data_save_action, "clicked", accel_group,
                              GDK_S, GDK_MOD1_MASK,
                              GTK_ACCEL_VISIBLE);

  data_save_cancel = gtk_button_new_with_label ("");
  data_save_cancel_key = gtk_label_parse_uline (GTK_LABEL (GTK_BIN (data_save_cancel)->child),
                                   "_Finished");
  gtk_widget_add_accelerator (data_save_cancel, "clicked", accel_group,
                              data_save_cancel_key, GDK_MOD1_MASK, (GtkAccelFlags) 0);
  gtk_widget_set_name (data_save_cancel, "data_save_cancel");
  gtk_widget_ref (data_save_cancel);
  gtk_object_set_data_full (GTK_OBJECT (data_save_window), "data_save_cancel", data_save_cancel,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_save_cancel);
  gtk_box_pack_start (GTK_BOX (data_save_buttons), data_save_cancel, FALSE, FALSE, 0);
  gtk_widget_set_usize (data_save_cancel, 60, -2);
  gtk_widget_add_accelerator (data_save_cancel, "clicked", accel_group,
                              GDK_Escape, 0,
                              GTK_ACCEL_VISIBLE);
  gtk_widget_add_accelerator (data_save_cancel, "clicked", accel_group,
                              GDK_F, GDK_MOD1_MASK,
                              GTK_ACCEL_VISIBLE);

  data_save_help = gtk_button_new_with_label ("Help");
  gtk_widget_set_name (data_save_help, "data_save_help");
  gtk_widget_ref (data_save_help);
  gtk_object_set_data_full (GTK_OBJECT (data_save_window), "data_save_help", data_save_help,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (data_save_help);
  gtk_box_pack_start (GTK_BOX (data_save_buttons), data_save_help, FALSE, FALSE, 0);
  gtk_widget_set_usize (data_save_help, 60, -2);
  gtk_widget_add_accelerator (data_save_help, "clicked", accel_group,
                              GDK_H, GDK_MOD1_MASK,
                              GTK_ACCEL_VISIBLE);
  gtk_widget_add_accelerator (data_save_help, "clicked", accel_group,
                              GDK_F1, 0,
                              GTK_ACCEL_VISIBLE);

  gtk_signal_connect (GTK_OBJECT (data_save_filesel), "clicked",
                      GTK_SIGNAL_FUNC (on_data_save_filesel_clicked),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (data_save_action), "clicked",
                      GTK_SIGNAL_FUNC (on_data_save_action_clicked),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (data_save_cancel), "clicked",
                      GTK_SIGNAL_FUNC (on_data_save_finished_clicked),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (data_save_help), "clicked",
                      GTK_SIGNAL_FUNC (on_data_save_help_clicked),
                      NULL);

  gtk_object_set_data (GTK_OBJECT (data_save_window), "tooltips", tooltips);

  gtk_window_add_accel_group (GTK_WINDOW (data_save_window), accel_group);

  return data_save_window;
}

GtkWidget*
create_file_data_save_select (void)
{
  GtkWidget *file_data_save_select;
  GtkWidget *file_data_save_okbutton;
  GtkWidget *file_data_save_cancelbutton;
  GtkAccelGroup *accel_group;

  accel_group = gtk_accel_group_new ();

  file_data_save_select = gtk_file_selection_new ("Select Saved Viewed Data File");
  gtk_widget_set_name (file_data_save_select, "file_data_save_select");
  gtk_object_set_data (GTK_OBJECT (file_data_save_select), "file_data_save_select", file_data_save_select);
  gtk_container_set_border_width (GTK_CONTAINER (file_data_save_select), 10);
  gtk_window_set_position (GTK_WINDOW (file_data_save_select), GTK_WIN_POS_MOUSE);

  file_data_save_okbutton = GTK_FILE_SELECTION (file_data_save_select)->ok_button;
  gtk_widget_set_name (file_data_save_okbutton, "file_data_save_okbutton");
  gtk_object_set_data (GTK_OBJECT (file_data_save_select), "file_data_save_okbutton", file_data_save_okbutton);
  gtk_widget_show (file_data_save_okbutton);
  GTK_WIDGET_SET_FLAGS (file_data_save_okbutton, GTK_CAN_DEFAULT);
  gtk_widget_add_accelerator (file_data_save_okbutton, "clicked", accel_group,
                              GDK_Return, 0,
                              GTK_ACCEL_VISIBLE);
  gtk_widget_add_accelerator (file_data_save_okbutton, "clicked", accel_group,
                              GDK_O, GDK_MOD1_MASK,
                              GTK_ACCEL_VISIBLE);

  file_data_save_cancelbutton = GTK_FILE_SELECTION (file_data_save_select)->cancel_button;
  gtk_widget_set_name (file_data_save_cancelbutton, "file_data_save_cancelbutton");
  gtk_object_set_data (GTK_OBJECT (file_data_save_select), "file_data_save_cancelbutton", file_data_save_cancelbutton);
  gtk_widget_show (file_data_save_cancelbutton);
  GTK_WIDGET_SET_FLAGS (file_data_save_cancelbutton, GTK_CAN_DEFAULT);
  gtk_widget_add_accelerator (file_data_save_cancelbutton, "clicked", accel_group,
                              GDK_Escape, 0,
                              GTK_ACCEL_VISIBLE);

  gtk_signal_connect (GTK_OBJECT (file_data_save_okbutton), "clicked",
                      GTK_SIGNAL_FUNC (on_file_data_save_okbutton_clicked),
                      file_data_save_select);
  gtk_signal_connect (GTK_OBJECT (file_data_save_cancelbutton), "clicked",
                      GTK_SIGNAL_FUNC (on_file_data_save_cancelbutton_clicked),
                      file_data_save_select);

  gtk_window_add_accel_group (GTK_WINDOW (file_data_save_select), accel_group);

  return file_data_save_select;
}

GtkWidget*
create_open_host_window (void)
{
  GtkWidget *open_host_window;
  GtkWidget *dialog_vbox2;
  GtkWidget *open_host_layout;
  GtkWidget *open_host_name_prompt;
  GtkWidget *open_host_source_prompt;
  GSList *open_host_layout_group = NULL;
  guint open_host_source_repository_key;
  GtkWidget *open_host_source_repository;
  guint open_host_source_direct_key;
  GtkWidget *open_host_source_direct;
  GtkWidget *open_host_combo;
  GtkWidget *open_host_name;
  GtkWidget *dialog_action_area3;
  GtkWidget *open_host_buttons;
  guint open_host_open_btn_key;
  GtkWidget *open_host_open_btn;
  guint open_host_finished_btn_key;
  GtkWidget *open_host_finished_btn;
  guint open_host_help_btn_key;
  GtkWidget *open_host_help_btn;
  GtkAccelGroup *accel_group;
  GtkTooltips *tooltips;

  tooltips = gtk_tooltips_new ();

  accel_group = gtk_accel_group_new ();

  open_host_window = gtk_dialog_new ();
  gtk_widget_set_name (open_host_window, "open_host_window");
  gtk_object_set_data (GTK_OBJECT (open_host_window), "open_host_window", open_host_window);
  gtk_window_set_title (GTK_WINDOW (open_host_window), "Open Host");
  gtk_window_set_position (GTK_WINDOW (open_host_window), GTK_WIN_POS_MOUSE);
  gtk_window_set_policy (GTK_WINDOW (open_host_window), TRUE, TRUE, FALSE);

  dialog_vbox2 = GTK_DIALOG (open_host_window)->vbox;
  gtk_widget_set_name (dialog_vbox2, "dialog_vbox2");
  gtk_object_set_data (GTK_OBJECT (open_host_window), "dialog_vbox2", dialog_vbox2);
  gtk_widget_show (dialog_vbox2);

  open_host_layout = gtk_table_new (4, 3, FALSE);
  gtk_widget_set_name (open_host_layout, "open_host_layout");
  gtk_widget_ref (open_host_layout);
  gtk_object_set_data_full (GTK_OBJECT (open_host_window), "open_host_layout", open_host_layout,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (open_host_layout);
  gtk_box_pack_start (GTK_BOX (dialog_vbox2), open_host_layout, TRUE, TRUE, 0);
  gtk_container_set_border_width (GTK_CONTAINER (open_host_layout), 10);
  gtk_table_set_row_spacings (GTK_TABLE (open_host_layout), 2);
  gtk_table_set_col_spacings (GTK_TABLE (open_host_layout), 6);

  open_host_name_prompt = gtk_label_new ("Host Name:");
  gtk_widget_set_name (open_host_name_prompt, "open_host_name_prompt");
  gtk_widget_ref (open_host_name_prompt);
  gtk_object_set_data_full (GTK_OBJECT (open_host_window), "open_host_name_prompt", open_host_name_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (open_host_name_prompt);
  gtk_table_attach (GTK_TABLE (open_host_layout), open_host_name_prompt, 0, 1, 1, 2,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_misc_set_alignment (GTK_MISC (open_host_name_prompt), 0, 0.5);

  open_host_source_prompt = gtk_label_new ("Source:");
  gtk_widget_set_name (open_host_source_prompt, "open_host_source_prompt");
  gtk_widget_ref (open_host_source_prompt);
  gtk_object_set_data_full (GTK_OBJECT (open_host_window), "open_host_source_prompt", open_host_source_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (open_host_source_prompt);
  gtk_table_attach (GTK_TABLE (open_host_layout), open_host_source_prompt, 0, 1, 2, 3,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_misc_set_alignment (GTK_MISC (open_host_source_prompt), 0, 0.5);

  open_host_source_repository = gtk_radio_button_new_with_label (open_host_layout_group, "");
  open_host_source_repository_key = gtk_label_parse_uline (GTK_LABEL (GTK_BIN (open_host_source_repository)->child),
                                   "_Repository");
  gtk_widget_add_accelerator (open_host_source_repository, "clicked", accel_group,
                              open_host_source_repository_key, GDK_MOD1_MASK, (GtkAccelFlags) 0);
  open_host_layout_group = gtk_radio_button_group (GTK_RADIO_BUTTON (open_host_source_repository));
  gtk_widget_set_name (open_host_source_repository, "open_host_source_repository");
  gtk_widget_ref (open_host_source_repository);
  gtk_object_set_data_full (GTK_OBJECT (open_host_window), "open_host_source_repository", open_host_source_repository,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (open_host_source_repository);
  gtk_table_attach (GTK_TABLE (open_host_layout), open_host_source_repository, 1, 2, 2, 3,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_tooltips_set_tip (tooltips, open_host_source_repository, "Take data from the repository: older but more considerate", NULL);
  gtk_widget_add_accelerator (open_host_source_repository, "toggled", accel_group,
                              GDK_R, GDK_MOD1_MASK,
                              GTK_ACCEL_VISIBLE);
  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (open_host_source_repository), TRUE);

  open_host_source_direct = gtk_radio_button_new_with_label (open_host_layout_group, "");
  open_host_source_direct_key = gtk_label_parse_uline (GTK_LABEL (GTK_BIN (open_host_source_direct)->child),
                                   "_Direct");
  gtk_widget_add_accelerator (open_host_source_direct, "clicked", accel_group,
                              open_host_source_direct_key, GDK_MOD1_MASK, (GtkAccelFlags) 0);
  open_host_layout_group = gtk_radio_button_group (GTK_RADIO_BUTTON (open_host_source_direct));
  gtk_widget_set_name (open_host_source_direct, "open_host_source_direct");
  gtk_widget_ref (open_host_source_direct);
  gtk_object_set_data_full (GTK_OBJECT (open_host_window), "open_host_source_direct", open_host_source_direct,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (open_host_source_direct);
  gtk_table_attach (GTK_TABLE (open_host_layout), open_host_source_direct, 2, 3, 2, 3,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_tooltips_set_tip (tooltips, open_host_source_direct, "Take data directly form the host: up-to-date but will impose a small load", NULL);
  gtk_widget_add_accelerator (open_host_source_direct, "toggled", accel_group,
                              GDK_D, GDK_MOD1_MASK,
                              GTK_ACCEL_VISIBLE);

  open_host_combo = gtk_combo_new ();
  gtk_widget_set_name (open_host_combo, "open_host_combo");
  gtk_widget_ref (open_host_combo);
  gtk_object_set_data_full (GTK_OBJECT (open_host_window), "open_host_combo", open_host_combo,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (open_host_combo);
  gtk_table_attach (GTK_TABLE (open_host_layout), open_host_combo, 1, 3, 1, 2,
                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);

  open_host_name = GTK_COMBO (open_host_combo)->entry;
  gtk_widget_set_name (open_host_name, "open_host_name");
  gtk_widget_ref (open_host_name);
  gtk_object_set_data_full (GTK_OBJECT (open_host_window), "open_host_name", open_host_name,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (open_host_name);

  dialog_action_area3 = GTK_DIALOG (open_host_window)->action_area;
  gtk_widget_set_name (dialog_action_area3, "dialog_action_area3");
  gtk_object_set_data (GTK_OBJECT (open_host_window), "dialog_action_area3", dialog_action_area3);
  gtk_widget_show (dialog_action_area3);
  gtk_container_set_border_width (GTK_CONTAINER (dialog_action_area3), 10);

  open_host_buttons = gtk_hbutton_box_new ();
  gtk_widget_set_name (open_host_buttons, "open_host_buttons");
  gtk_widget_ref (open_host_buttons);
  gtk_object_set_data_full (GTK_OBJECT (open_host_window), "open_host_buttons", open_host_buttons,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (open_host_buttons);
  gtk_box_pack_start (GTK_BOX (dialog_action_area3), open_host_buttons, TRUE, TRUE, 0);

  open_host_open_btn = gtk_button_new_with_label ("");
  open_host_open_btn_key = gtk_label_parse_uline (GTK_LABEL (GTK_BIN (open_host_open_btn)->child),
                                   "_Open");
  gtk_widget_add_accelerator (open_host_open_btn, "clicked", accel_group,
                              open_host_open_btn_key, GDK_MOD1_MASK, (GtkAccelFlags) 0);
  gtk_widget_set_name (open_host_open_btn, "open_host_open_btn");
  gtk_widget_ref (open_host_open_btn);
  gtk_object_set_data_full (GTK_OBJECT (open_host_window), "open_host_open_btn", open_host_open_btn,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (open_host_open_btn);
  gtk_container_add (GTK_CONTAINER (open_host_buttons), open_host_open_btn);
  GTK_WIDGET_SET_FLAGS (open_host_open_btn, GTK_CAN_DEFAULT);
  gtk_tooltips_set_tip (tooltips, open_host_open_btn, "Connect to the repository or directly to the host to get its data", NULL);
  gtk_widget_add_accelerator (open_host_open_btn, "clicked", accel_group,
                              GDK_Return, 0,
                              GTK_ACCEL_VISIBLE);
  gtk_widget_add_accelerator (open_host_open_btn, "clicked", accel_group,
                              GDK_O, GDK_MOD1_MASK,
                              GTK_ACCEL_VISIBLE);

  open_host_finished_btn = gtk_button_new_with_label ("");
  open_host_finished_btn_key = gtk_label_parse_uline (GTK_LABEL (GTK_BIN (open_host_finished_btn)->child),
                                   "_Finished");
  gtk_widget_add_accelerator (open_host_finished_btn, "clicked", accel_group,
                              open_host_finished_btn_key, GDK_MOD1_MASK, (GtkAccelFlags) 0);
  gtk_widget_set_name (open_host_finished_btn, "open_host_finished_btn");
  gtk_widget_ref (open_host_finished_btn);
  gtk_object_set_data_full (GTK_OBJECT (open_host_window), "open_host_finished_btn", open_host_finished_btn,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (open_host_finished_btn);
  gtk_container_add (GTK_CONTAINER (open_host_buttons), open_host_finished_btn);
  GTK_WIDGET_SET_FLAGS (open_host_finished_btn, GTK_CAN_DEFAULT);
  gtk_tooltips_set_tip (tooltips, open_host_finished_btn, "Finished with this pop-up form", NULL);
  gtk_widget_add_accelerator (open_host_finished_btn, "clicked", accel_group,
                              GDK_Escape, 0,
                              GTK_ACCEL_VISIBLE);
  gtk_widget_add_accelerator (open_host_finished_btn, "clicked", accel_group,
                              GDK_F, GDK_MOD1_MASK,
                              GTK_ACCEL_VISIBLE);

  open_host_help_btn = gtk_button_new_with_label ("");
  open_host_help_btn_key = gtk_label_parse_uline (GTK_LABEL (GTK_BIN (open_host_help_btn)->child),
                                   "_Help");
  gtk_widget_add_accelerator (open_host_help_btn, "clicked", accel_group,
                              open_host_help_btn_key, GDK_MOD1_MASK, (GtkAccelFlags) 0);
  gtk_widget_set_name (open_host_help_btn, "open_host_help_btn");
  gtk_widget_ref (open_host_help_btn);
  gtk_object_set_data_full (GTK_OBJECT (open_host_window), "open_host_help_btn", open_host_help_btn,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (open_host_help_btn);
  gtk_container_add (GTK_CONTAINER (open_host_buttons), open_host_help_btn);
  GTK_WIDGET_SET_FLAGS (open_host_help_btn, GTK_CAN_DEFAULT);
  gtk_tooltips_set_tip (tooltips, open_host_help_btn, "How connection to another host's data works", NULL);
  gtk_widget_add_accelerator (open_host_help_btn, "clicked", accel_group,
                              GDK_H, GDK_MOD1_MASK,
                              GTK_ACCEL_VISIBLE);
  gtk_widget_add_accelerator (open_host_help_btn, "clicked", accel_group,
                              GDK_F1, 0,
                              GTK_ACCEL_VISIBLE);

  gtk_signal_connect (GTK_OBJECT (open_host_open_btn), "clicked",
                      GTK_SIGNAL_FUNC (on_open_host_open_btn_clicked),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (open_host_finished_btn), "clicked",
                      GTK_SIGNAL_FUNC (on_open_host_finished_btn_clicked),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (open_host_help_btn), "clicked",
                      GTK_SIGNAL_FUNC (on_open_host_help_btn_clicked),
                      NULL);

  gtk_widget_grab_focus (open_host_name);
  gtk_widget_grab_default (open_host_open_btn);
  gtk_object_set_data (GTK_OBJECT (open_host_window), "tooltips", tooltips);

  gtk_window_add_accel_group (GTK_WINDOW (open_host_window), accel_group);

  return open_host_window;
}

GtkWidget*
create_open_route_window (void)
{
  GtkWidget *open_route_window;
  GtkWidget *vbox5;
  GtkWidget *open_route_layout;
  GtkWidget *open_route_purl_prompt;
  GtkWidget *open_route_combo;
  GtkWidget *open_route_purl;
  GtkWidget *hbox3;
  GtkWidget *open_route_buttons;
  guint open_route_open_btn_key;
  GtkWidget *open_route_open_btn;
  guint open_route_finished_btn_key;
  GtkWidget *open_route_finished_btn;
  guint open_route_help_btn_key;
  GtkWidget *open_route_help_btn;
  GtkAccelGroup *accel_group;
  GtkTooltips *tooltips;

  tooltips = gtk_tooltips_new ();

  accel_group = gtk_accel_group_new ();

  open_route_window = gtk_dialog_new ();
  gtk_widget_set_name (open_route_window, "open_route_window");
  gtk_object_set_data (GTK_OBJECT (open_route_window), "open_route_window", open_route_window);
  gtk_window_set_title (GTK_WINDOW (open_route_window), "Open Route");
  gtk_window_set_position (GTK_WINDOW (open_route_window), GTK_WIN_POS_MOUSE);
  gtk_window_set_policy (GTK_WINDOW (open_route_window), TRUE, TRUE, FALSE);

  vbox5 = GTK_DIALOG (open_route_window)->vbox;
  gtk_widget_set_name (vbox5, "vbox5");
  gtk_object_set_data (GTK_OBJECT (open_route_window), "vbox5", vbox5);
  gtk_widget_show (vbox5);

  open_route_layout = gtk_table_new (4, 3, FALSE);
  gtk_widget_set_name (open_route_layout, "open_route_layout");
  gtk_widget_ref (open_route_layout);
  gtk_object_set_data_full (GTK_OBJECT (open_route_window), "open_route_layout", open_route_layout,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (open_route_layout);
  gtk_box_pack_start (GTK_BOX (vbox5), open_route_layout, TRUE, TRUE, 0);
  gtk_container_set_border_width (GTK_CONTAINER (open_route_layout), 10);
  gtk_table_set_row_spacings (GTK_TABLE (open_route_layout), 2);
  gtk_table_set_col_spacings (GTK_TABLE (open_route_layout), 6);

  open_route_purl_prompt = gtk_label_new ("Route Specification");
  gtk_widget_set_name (open_route_purl_prompt, "open_route_purl_prompt");
  gtk_widget_ref (open_route_purl_prompt);
  gtk_object_set_data_full (GTK_OBJECT (open_route_window), "open_route_purl_prompt", open_route_purl_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (open_route_purl_prompt);
  gtk_table_attach (GTK_TABLE (open_route_layout), open_route_purl_prompt, 0, 1, 1, 2,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_misc_set_alignment (GTK_MISC (open_route_purl_prompt), 0, 0.5);

  open_route_combo = gtk_combo_new ();
  gtk_widget_set_name (open_route_combo, "open_route_combo");
  gtk_widget_ref (open_route_combo);
  gtk_object_set_data_full (GTK_OBJECT (open_route_window), "open_route_combo", open_route_combo,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (open_route_combo);
  gtk_table_attach (GTK_TABLE (open_route_layout), open_route_combo, 1, 3, 1, 2,
                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);

  open_route_purl = GTK_COMBO (open_route_combo)->entry;
  gtk_widget_set_name (open_route_purl, "open_route_purl");
  gtk_widget_ref (open_route_purl);
  gtk_object_set_data_full (GTK_OBJECT (open_route_window), "open_route_purl", open_route_purl,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (open_route_purl);

  hbox3 = GTK_DIALOG (open_route_window)->action_area;
  gtk_widget_set_name (hbox3, "hbox3");
  gtk_object_set_data (GTK_OBJECT (open_route_window), "hbox3", hbox3);
  gtk_widget_show (hbox3);
  gtk_container_set_border_width (GTK_CONTAINER (hbox3), 10);

  open_route_buttons = gtk_hbutton_box_new ();
  gtk_widget_set_name (open_route_buttons, "open_route_buttons");
  gtk_widget_ref (open_route_buttons);
  gtk_object_set_data_full (GTK_OBJECT (open_route_window), "open_route_buttons", open_route_buttons,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (open_route_buttons);
  gtk_box_pack_start (GTK_BOX (hbox3), open_route_buttons, TRUE, TRUE, 0);

  open_route_open_btn = gtk_button_new_with_label ("");
  open_route_open_btn_key = gtk_label_parse_uline (GTK_LABEL (GTK_BIN (open_route_open_btn)->child),
                                   "_Open");
  gtk_widget_add_accelerator (open_route_open_btn, "clicked", accel_group,
                              open_route_open_btn_key, GDK_MOD1_MASK, (GtkAccelFlags) 0);
  gtk_widget_set_name (open_route_open_btn, "open_route_open_btn");
  gtk_widget_ref (open_route_open_btn);
  gtk_object_set_data_full (GTK_OBJECT (open_route_window), "open_route_open_btn", open_route_open_btn,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (open_route_open_btn);
  gtk_container_add (GTK_CONTAINER (open_route_buttons), open_route_open_btn);
  GTK_WIDGET_SET_FLAGS (open_route_open_btn, GTK_CAN_DEFAULT);
  gtk_tooltips_set_tip (tooltips, open_route_open_btn, "Open the route and try to read its data", NULL);
  gtk_widget_add_accelerator (open_route_open_btn, "clicked", accel_group,
                              GDK_Return, 0,
                              GTK_ACCEL_VISIBLE);
  gtk_widget_add_accelerator (open_route_open_btn, "clicked", accel_group,
                              GDK_O, GDK_MOD1_MASK,
                              GTK_ACCEL_VISIBLE);

  open_route_finished_btn = gtk_button_new_with_label ("");
  open_route_finished_btn_key = gtk_label_parse_uline (GTK_LABEL (GTK_BIN (open_route_finished_btn)->child),
                                   "_Finished");
  gtk_widget_add_accelerator (open_route_finished_btn, "clicked", accel_group,
                              open_route_finished_btn_key, GDK_MOD1_MASK, (GtkAccelFlags) 0);
  gtk_widget_set_name (open_route_finished_btn, "open_route_finished_btn");
  gtk_widget_ref (open_route_finished_btn);
  gtk_object_set_data_full (GTK_OBJECT (open_route_window), "open_route_finished_btn", open_route_finished_btn,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (open_route_finished_btn);
  gtk_container_add (GTK_CONTAINER (open_route_buttons), open_route_finished_btn);
  GTK_WIDGET_SET_FLAGS (open_route_finished_btn, GTK_CAN_DEFAULT);
  gtk_tooltips_set_tip (tooltips, open_route_finished_btn, "Finished with this pop-up form", NULL);
  gtk_widget_add_accelerator (open_route_finished_btn, "clicked", accel_group,
                              GDK_F, GDK_MOD1_MASK,
                              GTK_ACCEL_VISIBLE);
  gtk_widget_add_accelerator (open_route_finished_btn, "clicked", accel_group,
                              GDK_Escape, 0,
                              GTK_ACCEL_VISIBLE);

  open_route_help_btn = gtk_button_new_with_label ("");
  open_route_help_btn_key = gtk_label_parse_uline (GTK_LABEL (GTK_BIN (open_route_help_btn)->child),
                                   "_Help");
  gtk_widget_add_accelerator (open_route_help_btn, "clicked", accel_group,
                              open_route_help_btn_key, GDK_MOD1_MASK, (GtkAccelFlags) 0);
  gtk_widget_set_name (open_route_help_btn, "open_route_help_btn");
  gtk_widget_ref (open_route_help_btn);
  gtk_object_set_data_full (GTK_OBJECT (open_route_window), "open_route_help_btn", open_route_help_btn,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (open_route_help_btn);
  gtk_container_add (GTK_CONTAINER (open_route_buttons), open_route_help_btn);
  GTK_WIDGET_SET_FLAGS (open_route_help_btn, GTK_CAN_DEFAULT);
  gtk_tooltips_set_tip (tooltips, open_route_help_btn, "Information on route specification and the formats that can be read", NULL);
  gtk_widget_add_accelerator (open_route_help_btn, "clicked", accel_group,
                              GDK_H, GDK_MOD1_MASK,
                              GTK_ACCEL_VISIBLE);
  gtk_widget_add_accelerator (open_route_help_btn, "clicked", accel_group,
                              GDK_F1, 0,
                              GTK_ACCEL_VISIBLE);

  gtk_signal_connect (GTK_OBJECT (open_route_open_btn), "clicked",
                      GTK_SIGNAL_FUNC (on_open_route_open_btn_clicked),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (open_route_finished_btn), "clicked",
                      GTK_SIGNAL_FUNC (on_open_route_finished_btn_clicked),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (open_route_help_btn), "clicked",
                      GTK_SIGNAL_FUNC (on_open_route_help_btn_clicked),
                      NULL);

  gtk_widget_grab_focus (open_route_purl);
  gtk_widget_grab_default (open_route_open_btn);
  gtk_object_set_data (GTK_OBJECT (open_route_window), "tooltips", tooltips);

  gtk_window_add_accel_group (GTK_WINDOW (open_route_window), accel_group);

  return open_route_window;
}

GtkWidget*
create_start_clockwork_window (void)
{
  GtkWidget *start_clockwork_window;
  GtkWidget *vbox6;
  GtkWidget *vbox7;
  GtkWidget *start_clockwork_msg;
  GtkWidget *start_clockwork_dontask_opt;
  GtkWidget *start_clockwork_view_opt;
  GtkWidget *start_clockwork_buttons;
  guint start_clockwork_once_button_key;
  GtkWidget *start_clockwork_once_button;
  guint start_clockwork_always_button_key;
  GtkWidget *start_clockwork_always_button;
  guint start_clockwork_dont_button_key;
  GtkWidget *start_clockwork_dont_button;
  GtkAccelGroup *accel_group;
  GtkTooltips *tooltips;

  tooltips = gtk_tooltips_new ();

  accel_group = gtk_accel_group_new ();

  start_clockwork_window = gtk_window_new (GTK_WINDOW_TOPLEVEL);
  gtk_widget_set_name (start_clockwork_window, "start_clockwork_window");
  gtk_object_set_data (GTK_OBJECT (start_clockwork_window), "start_clockwork_window", start_clockwork_window);
  gtk_window_set_title (GTK_WINDOW (start_clockwork_window), "Start Local Collection");
  gtk_window_set_position (GTK_WINDOW (start_clockwork_window), GTK_WIN_POS_MOUSE);
  gtk_window_set_modal (GTK_WINDOW (start_clockwork_window), TRUE);
  gtk_window_set_policy (GTK_WINDOW (start_clockwork_window), FALSE, FALSE, FALSE);

  vbox6 = gtk_vbox_new (FALSE, 0);
  gtk_widget_set_name (vbox6, "vbox6");
  gtk_widget_ref (vbox6);
  gtk_object_set_data_full (GTK_OBJECT (start_clockwork_window), "vbox6", vbox6,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (vbox6);
  gtk_container_add (GTK_CONTAINER (start_clockwork_window), vbox6);

  vbox7 = gtk_vbox_new (FALSE, 0);
  gtk_widget_set_name (vbox7, "vbox7");
  gtk_widget_ref (vbox7);
  gtk_object_set_data_full (GTK_OBJECT (start_clockwork_window), "vbox7", vbox7,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (vbox7);
  gtk_box_pack_start (GTK_BOX (vbox6), vbox7, TRUE, TRUE, 0);

  start_clockwork_msg = gtk_label_new ("Data is not being collected on the local machine.\nDo you want to start collection and load the data?");
  gtk_widget_set_name (start_clockwork_msg, "start_clockwork_msg");
  gtk_widget_ref (start_clockwork_msg);
  gtk_object_set_data_full (GTK_OBJECT (start_clockwork_window), "start_clockwork_msg", start_clockwork_msg,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (start_clockwork_msg);
  gtk_box_pack_start (GTK_BOX (vbox7), start_clockwork_msg, FALSE, FALSE, 0);
  gtk_label_set_justify (GTK_LABEL (start_clockwork_msg), GTK_JUSTIFY_LEFT);
  gtk_misc_set_alignment (GTK_MISC (start_clockwork_msg), 0, 0.5);
  gtk_misc_set_padding (GTK_MISC (start_clockwork_msg), 23, 10);

  start_clockwork_dontask_opt = gtk_check_button_new_with_label ("Don't ask me again");
  gtk_widget_set_name (start_clockwork_dontask_opt, "start_clockwork_dontask_opt");
  gtk_widget_ref (start_clockwork_dontask_opt);
  gtk_object_set_data_full (GTK_OBJECT (start_clockwork_window), "start_clockwork_dontask_opt", start_clockwork_dontask_opt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (start_clockwork_dontask_opt);
  gtk_box_pack_start (GTK_BOX (vbox7), start_clockwork_dontask_opt, FALSE, TRUE, 0);
  gtk_tooltips_set_tip (tooltips, start_clockwork_dontask_opt, "Don't ask this question again, although you can change you mind by selecting Collect->Local", NULL);

  start_clockwork_view_opt = gtk_check_button_new_with_label ("View collected data");
  gtk_widget_set_name (start_clockwork_view_opt, "start_clockwork_view_opt");
  gtk_widget_ref (start_clockwork_view_opt);
  gtk_object_set_data_full (GTK_OBJECT (start_clockwork_window), "start_clockwork_view_opt", start_clockwork_view_opt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (start_clockwork_view_opt);
  gtk_box_pack_start (GTK_BOX (vbox7), start_clockwork_view_opt, FALSE, FALSE, 0);
  gtk_tooltips_set_tip (tooltips, start_clockwork_view_opt, "Add the file of collected data to your choices", NULL);
  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (start_clockwork_view_opt), TRUE);

  start_clockwork_buttons = gtk_hbutton_box_new ();
  gtk_widget_set_name (start_clockwork_buttons, "start_clockwork_buttons");
  gtk_widget_ref (start_clockwork_buttons);
  gtk_object_set_data_full (GTK_OBJECT (start_clockwork_window), "start_clockwork_buttons", start_clockwork_buttons,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (start_clockwork_buttons);
  gtk_box_pack_start (GTK_BOX (vbox6), start_clockwork_buttons, TRUE, TRUE, 0);
  gtk_container_set_border_width (GTK_CONTAINER (start_clockwork_buttons), 5);
  gtk_button_box_set_spacing (GTK_BUTTON_BOX (start_clockwork_buttons), 10);

  start_clockwork_once_button = gtk_button_new_with_label ("");
  start_clockwork_once_button_key = gtk_label_parse_uline (GTK_LABEL (GTK_BIN (start_clockwork_once_button)->child),
                                   "_Start collection");
  gtk_widget_add_accelerator (start_clockwork_once_button, "clicked", accel_group,
                              start_clockwork_once_button_key, GDK_MOD1_MASK, (GtkAccelFlags) 0);
  gtk_widget_set_name (start_clockwork_once_button, "start_clockwork_once_button");
  gtk_widget_ref (start_clockwork_once_button);
  gtk_object_set_data_full (GTK_OBJECT (start_clockwork_window), "start_clockwork_once_button", start_clockwork_once_button,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (start_clockwork_once_button);
  gtk_container_add (GTK_CONTAINER (start_clockwork_buttons), start_clockwork_once_button);
  GTK_WIDGET_SET_FLAGS (start_clockwork_once_button, GTK_CAN_DEFAULT);
  gtk_tooltips_set_tip (tooltips, start_clockwork_once_button, "Start collection on the local machine", NULL);
  gtk_widget_add_accelerator (start_clockwork_once_button, "clicked", accel_group,
                              GDK_Return, 0,
                              GTK_ACCEL_VISIBLE);
  gtk_widget_add_accelerator (start_clockwork_once_button, "clicked", accel_group,
                              GDK_S, GDK_MOD1_MASK,
                              GTK_ACCEL_VISIBLE);
  gtk_widget_add_accelerator (start_clockwork_once_button, "clicked", accel_group,
                              GDK_s, 0,
                              GTK_ACCEL_VISIBLE);
  gtk_widget_add_accelerator (start_clockwork_once_button, "clicked", accel_group,
                              GDK_S, 0,
                              GTK_ACCEL_VISIBLE);

  start_clockwork_always_button = gtk_button_new_with_label ("");
  start_clockwork_always_button_key = gtk_label_parse_uline (GTK_LABEL (GTK_BIN (start_clockwork_always_button)->child),
                                   "_Always collect");
  gtk_widget_add_accelerator (start_clockwork_always_button, "clicked", accel_group,
                              start_clockwork_always_button_key, GDK_MOD1_MASK, (GtkAccelFlags) 0);
  gtk_widget_set_name (start_clockwork_always_button, "start_clockwork_always_button");
  gtk_widget_ref (start_clockwork_always_button);
  gtk_object_set_data_full (GTK_OBJECT (start_clockwork_window), "start_clockwork_always_button", start_clockwork_always_button,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (start_clockwork_always_button);
  gtk_container_add (GTK_CONTAINER (start_clockwork_buttons), start_clockwork_always_button);
  GTK_WIDGET_SET_FLAGS (start_clockwork_always_button, GTK_CAN_DEFAULT);
  gtk_tooltips_set_tip (tooltips, start_clockwork_always_button, "Always collect local data when starting this application", NULL);
  gtk_widget_add_accelerator (start_clockwork_always_button, "clicked", accel_group,
                              GDK_A, GDK_MOD1_MASK,
                              GTK_ACCEL_VISIBLE);
  gtk_widget_add_accelerator (start_clockwork_always_button, "clicked", accel_group,
                              GDK_A, 0,
                              GTK_ACCEL_VISIBLE);
  gtk_widget_add_accelerator (start_clockwork_always_button, "clicked", accel_group,
                              GDK_a, 0,
                              GTK_ACCEL_VISIBLE);

  start_clockwork_dont_button = gtk_button_new_with_label ("");
  start_clockwork_dont_button_key = gtk_label_parse_uline (GTK_LABEL (GTK_BIN (start_clockwork_dont_button)->child),
                                   "_Don't collect");
  gtk_widget_add_accelerator (start_clockwork_dont_button, "clicked", accel_group,
                              start_clockwork_dont_button_key, GDK_MOD1_MASK, (GtkAccelFlags) 0);
  gtk_widget_set_name (start_clockwork_dont_button, "start_clockwork_dont_button");
  gtk_widget_ref (start_clockwork_dont_button);
  gtk_object_set_data_full (GTK_OBJECT (start_clockwork_window), "start_clockwork_dont_button", start_clockwork_dont_button,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (start_clockwork_dont_button);
  gtk_container_add (GTK_CONTAINER (start_clockwork_buttons), start_clockwork_dont_button);
  GTK_WIDGET_SET_FLAGS (start_clockwork_dont_button, GTK_CAN_DEFAULT);
  gtk_tooltips_set_tip (tooltips, start_clockwork_dont_button, "Don't collect any local data, although you can change your mind by selecting Collect->Local", NULL);
  gtk_widget_add_accelerator (start_clockwork_dont_button, "clicked", accel_group,
                              GDK_Escape, 0,
                              GTK_ACCEL_VISIBLE);
  gtk_widget_add_accelerator (start_clockwork_dont_button, "clicked", accel_group,
                              GDK_D, 0,
                              GTK_ACCEL_VISIBLE);
  gtk_widget_add_accelerator (start_clockwork_dont_button, "clicked", accel_group,
                              GDK_d, 0,
                              GTK_ACCEL_VISIBLE);
  gtk_widget_add_accelerator (start_clockwork_dont_button, "clicked", accel_group,
                              GDK_D, GDK_MOD1_MASK,
                              GTK_ACCEL_VISIBLE);

  gtk_signal_connect (GTK_OBJECT (start_clockwork_once_button), "clicked",
                      GTK_SIGNAL_FUNC (on_start_clockwork_once_button_clicked),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (start_clockwork_always_button), "clicked",
                      GTK_SIGNAL_FUNC (on_start_clockwork_always_button_clicked),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (start_clockwork_dont_button), "clicked",
                      GTK_SIGNAL_FUNC (on_start_clockwork_dont_button_clicked),
                      NULL);

  gtk_widget_grab_focus (start_clockwork_once_button);
  gtk_widget_grab_default (start_clockwork_once_button);
  gtk_object_set_data (GTK_OBJECT (start_clockwork_window), "tooltips", tooltips);

  gtk_window_add_accel_group (GTK_WINDOW (start_clockwork_window), accel_group);

  return start_clockwork_window;
}

GtkWidget*
create_stop_clockwork_window (void)
{
  GtkWidget *stop_clockwork_window;
  GtkWidget *vbox8;
  GtkWidget *table1;
  GtkWidget *stop_clockwork_msg1;
  GtkWidget *stop_clockwork_msg2;
  GtkWidget *stop_clockwork_pid_prompt;
  GtkWidget *stop_clockwork_runt_prompt;
  GtkWidget *stop_clockwork_user_prompt;
  GtkWidget *stop_clockwork_bin_prompt;
  GtkWidget *stop_clockwork_bin_val;
  GtkWidget *stop_clockwork_user_val;
  GtkWidget *stop_clockwork_pid_val;
  GtkWidget *stop_clockwork_runt_val;
  GtkWidget *hbuttonbox3;
  guint stop_clockwork_now_button_key;
  GtkWidget *stop_clockwork_now_button;
  guint stop_clockwork_noauto_button_key;
  GtkWidget *stop_clockwork_noauto_button;
  guint stop_clockwork_continue_button_key;
  GtkWidget *stop_clockwork_continue_button;
  GtkAccelGroup *accel_group;
  GtkTooltips *tooltips;

  tooltips = gtk_tooltips_new ();

  accel_group = gtk_accel_group_new ();

  stop_clockwork_window = gtk_window_new (GTK_WINDOW_TOPLEVEL);
  gtk_widget_set_name (stop_clockwork_window, "stop_clockwork_window");
  gtk_object_set_data (GTK_OBJECT (stop_clockwork_window), "stop_clockwork_window", stop_clockwork_window);
  gtk_window_set_title (GTK_WINDOW (stop_clockwork_window), "Stop Local Collection");
  gtk_window_set_position (GTK_WINDOW (stop_clockwork_window), GTK_WIN_POS_MOUSE);
  gtk_window_set_modal (GTK_WINDOW (stop_clockwork_window), TRUE);

  vbox8 = gtk_vbox_new (FALSE, 0);
  gtk_widget_set_name (vbox8, "vbox8");
  gtk_widget_ref (vbox8);
  gtk_object_set_data_full (GTK_OBJECT (stop_clockwork_window), "vbox8", vbox8,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (vbox8);
  gtk_container_add (GTK_CONTAINER (stop_clockwork_window), vbox8);

  table1 = gtk_table_new (6, 2, FALSE);
  gtk_widget_set_name (table1, "table1");
  gtk_widget_ref (table1);
  gtk_object_set_data_full (GTK_OBJECT (stop_clockwork_window), "table1", table1,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (table1);
  gtk_box_pack_start (GTK_BOX (vbox8), table1, TRUE, TRUE, 0);

  stop_clockwork_msg1 = gtk_label_new ("Data is being collected locally");
  gtk_widget_set_name (stop_clockwork_msg1, "stop_clockwork_msg1");
  gtk_widget_ref (stop_clockwork_msg1);
  gtk_object_set_data_full (GTK_OBJECT (stop_clockwork_window), "stop_clockwork_msg1", stop_clockwork_msg1,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (stop_clockwork_msg1);
  gtk_table_attach (GTK_TABLE (table1), stop_clockwork_msg1, 0, 2, 0, 1,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_label_set_justify (GTK_LABEL (stop_clockwork_msg1), GTK_JUSTIFY_LEFT);
  gtk_misc_set_alignment (GTK_MISC (stop_clockwork_msg1), 0, 0.5);
  gtk_misc_set_padding (GTK_MISC (stop_clockwork_msg1), 23, 10);

  stop_clockwork_msg2 = gtk_label_new ("Do you want to stop collection?");
  gtk_widget_set_name (stop_clockwork_msg2, "stop_clockwork_msg2");
  gtk_widget_ref (stop_clockwork_msg2);
  gtk_object_set_data_full (GTK_OBJECT (stop_clockwork_window), "stop_clockwork_msg2", stop_clockwork_msg2,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (stop_clockwork_msg2);
  gtk_table_attach (GTK_TABLE (table1), stop_clockwork_msg2, 0, 2, 5, 6,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_misc_set_alignment (GTK_MISC (stop_clockwork_msg2), 0, 0.5);
  gtk_misc_set_padding (GTK_MISC (stop_clockwork_msg2), 23, 10);

  stop_clockwork_pid_prompt = gtk_label_new ("process id:");
  gtk_widget_set_name (stop_clockwork_pid_prompt, "stop_clockwork_pid_prompt");
  gtk_widget_ref (stop_clockwork_pid_prompt);
  gtk_object_set_data_full (GTK_OBJECT (stop_clockwork_window), "stop_clockwork_pid_prompt", stop_clockwork_pid_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (stop_clockwork_pid_prompt);
  gtk_table_attach (GTK_TABLE (table1), stop_clockwork_pid_prompt, 0, 1, 3, 4,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_misc_set_alignment (GTK_MISC (stop_clockwork_pid_prompt), 1, 0.5);
  gtk_misc_set_padding (GTK_MISC (stop_clockwork_pid_prompt), 5, 0);

  stop_clockwork_runt_prompt = gtk_label_new ("started:");
  gtk_widget_set_name (stop_clockwork_runt_prompt, "stop_clockwork_runt_prompt");
  gtk_widget_ref (stop_clockwork_runt_prompt);
  gtk_object_set_data_full (GTK_OBJECT (stop_clockwork_window), "stop_clockwork_runt_prompt", stop_clockwork_runt_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (stop_clockwork_runt_prompt);
  gtk_table_attach (GTK_TABLE (table1), stop_clockwork_runt_prompt, 0, 1, 4, 5,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_misc_set_alignment (GTK_MISC (stop_clockwork_runt_prompt), 1, 0.5);
  gtk_misc_set_padding (GTK_MISC (stop_clockwork_runt_prompt), 5, 0);

  stop_clockwork_user_prompt = gtk_label_new ("user:");
  gtk_widget_set_name (stop_clockwork_user_prompt, "stop_clockwork_user_prompt");
  gtk_widget_ref (stop_clockwork_user_prompt);
  gtk_object_set_data_full (GTK_OBJECT (stop_clockwork_window), "stop_clockwork_user_prompt", stop_clockwork_user_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (stop_clockwork_user_prompt);
  gtk_table_attach (GTK_TABLE (table1), stop_clockwork_user_prompt, 0, 1, 2, 3,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_label_set_justify (GTK_LABEL (stop_clockwork_user_prompt), GTK_JUSTIFY_RIGHT);
  gtk_misc_set_alignment (GTK_MISC (stop_clockwork_user_prompt), 1, 0.5);
  gtk_misc_set_padding (GTK_MISC (stop_clockwork_user_prompt), 5, 0);

  stop_clockwork_bin_prompt = gtk_label_new ("name:");
  gtk_widget_set_name (stop_clockwork_bin_prompt, "stop_clockwork_bin_prompt");
  gtk_widget_ref (stop_clockwork_bin_prompt);
  gtk_object_set_data_full (GTK_OBJECT (stop_clockwork_window), "stop_clockwork_bin_prompt", stop_clockwork_bin_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (stop_clockwork_bin_prompt);
  gtk_table_attach (GTK_TABLE (table1), stop_clockwork_bin_prompt, 0, 1, 1, 2,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_misc_set_alignment (GTK_MISC (stop_clockwork_bin_prompt), 1, 0.5);
  gtk_misc_set_padding (GTK_MISC (stop_clockwork_bin_prompt), 5, 0);

  stop_clockwork_bin_val = gtk_label_new ("-");
  gtk_widget_set_name (stop_clockwork_bin_val, "stop_clockwork_bin_val");
  gtk_widget_ref (stop_clockwork_bin_val);
  gtk_object_set_data_full (GTK_OBJECT (stop_clockwork_window), "stop_clockwork_bin_val", stop_clockwork_bin_val,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (stop_clockwork_bin_val);
  gtk_table_attach (GTK_TABLE (table1), stop_clockwork_bin_val, 1, 2, 1, 2,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_misc_set_alignment (GTK_MISC (stop_clockwork_bin_val), 0, 0.5);

  stop_clockwork_user_val = gtk_label_new ("-");
  gtk_widget_set_name (stop_clockwork_user_val, "stop_clockwork_user_val");
  gtk_widget_ref (stop_clockwork_user_val);
  gtk_object_set_data_full (GTK_OBJECT (stop_clockwork_window), "stop_clockwork_user_val", stop_clockwork_user_val,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (stop_clockwork_user_val);
  gtk_table_attach (GTK_TABLE (table1), stop_clockwork_user_val, 1, 2, 2, 3,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_misc_set_alignment (GTK_MISC (stop_clockwork_user_val), 0, 0.5);

  stop_clockwork_pid_val = gtk_label_new ("-");
  gtk_widget_set_name (stop_clockwork_pid_val, "stop_clockwork_pid_val");
  gtk_widget_ref (stop_clockwork_pid_val);
  gtk_object_set_data_full (GTK_OBJECT (stop_clockwork_window), "stop_clockwork_pid_val", stop_clockwork_pid_val,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (stop_clockwork_pid_val);
  gtk_table_attach (GTK_TABLE (table1), stop_clockwork_pid_val, 1, 2, 3, 4,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_misc_set_alignment (GTK_MISC (stop_clockwork_pid_val), 0, 0.5);

  stop_clockwork_runt_val = gtk_label_new ("-");
  gtk_widget_set_name (stop_clockwork_runt_val, "stop_clockwork_runt_val");
  gtk_widget_ref (stop_clockwork_runt_val);
  gtk_object_set_data_full (GTK_OBJECT (stop_clockwork_window), "stop_clockwork_runt_val", stop_clockwork_runt_val,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (stop_clockwork_runt_val);
  gtk_table_attach (GTK_TABLE (table1), stop_clockwork_runt_val, 1, 2, 4, 5,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_misc_set_alignment (GTK_MISC (stop_clockwork_runt_val), 0, 0.5);

  hbuttonbox3 = gtk_hbutton_box_new ();
  gtk_widget_set_name (hbuttonbox3, "hbuttonbox3");
  gtk_widget_ref (hbuttonbox3);
  gtk_object_set_data_full (GTK_OBJECT (stop_clockwork_window), "hbuttonbox3", hbuttonbox3,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (hbuttonbox3);
  gtk_box_pack_start (GTK_BOX (vbox8), hbuttonbox3, TRUE, TRUE, 0);
  gtk_container_set_border_width (GTK_CONTAINER (hbuttonbox3), 5);
  gtk_button_box_set_spacing (GTK_BUTTON_BOX (hbuttonbox3), 10);

  stop_clockwork_now_button = gtk_button_new_with_label ("");
  stop_clockwork_now_button_key = gtk_label_parse_uline (GTK_LABEL (GTK_BIN (stop_clockwork_now_button)->child),
                                   "_Stop collection");
  gtk_widget_add_accelerator (stop_clockwork_now_button, "clicked", accel_group,
                              stop_clockwork_now_button_key, GDK_MOD1_MASK, (GtkAccelFlags) 0);
  gtk_widget_set_name (stop_clockwork_now_button, "stop_clockwork_now_button");
  gtk_widget_ref (stop_clockwork_now_button);
  gtk_object_set_data_full (GTK_OBJECT (stop_clockwork_window), "stop_clockwork_now_button", stop_clockwork_now_button,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (stop_clockwork_now_button);
  gtk_container_add (GTK_CONTAINER (hbuttonbox3), stop_clockwork_now_button);
  GTK_WIDGET_SET_FLAGS (stop_clockwork_now_button, GTK_CAN_DEFAULT);
  gtk_tooltips_set_tip (tooltips, stop_clockwork_now_button, "Stop collection now", NULL);
  gtk_widget_add_accelerator (stop_clockwork_now_button, "clicked", accel_group,
                              GDK_Return, 0,
                              GTK_ACCEL_VISIBLE);
  gtk_widget_add_accelerator (stop_clockwork_now_button, "clicked", accel_group,
                              GDK_S, 0,
                              GTK_ACCEL_VISIBLE);
  gtk_widget_add_accelerator (stop_clockwork_now_button, "clicked", accel_group,
                              GDK_s, 0,
                              GTK_ACCEL_VISIBLE);
  gtk_widget_add_accelerator (stop_clockwork_now_button, "clicked", accel_group,
                              GDK_S, GDK_MOD1_MASK,
                              GTK_ACCEL_VISIBLE);

  stop_clockwork_noauto_button = gtk_button_new_with_label ("");
  stop_clockwork_noauto_button_key = gtk_label_parse_uline (GTK_LABEL (GTK_BIN (stop_clockwork_noauto_button)->child),
                                   "_Don't auto-collect");
  gtk_widget_add_accelerator (stop_clockwork_noauto_button, "clicked", accel_group,
                              stop_clockwork_noauto_button_key, GDK_MOD1_MASK, (GtkAccelFlags) 0);
  gtk_widget_set_name (stop_clockwork_noauto_button, "stop_clockwork_noauto_button");
  gtk_widget_ref (stop_clockwork_noauto_button);
  gtk_object_set_data_full (GTK_OBJECT (stop_clockwork_window), "stop_clockwork_noauto_button", stop_clockwork_noauto_button,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (stop_clockwork_noauto_button);
  gtk_container_add (GTK_CONTAINER (hbuttonbox3), stop_clockwork_noauto_button);
  GTK_WIDGET_SET_FLAGS (stop_clockwork_noauto_button, GTK_CAN_DEFAULT);
  gtk_tooltips_set_tip (tooltips, stop_clockwork_noauto_button, "Continue collection, but dont automatically start the collection next time", NULL);
  gtk_widget_add_accelerator (stop_clockwork_noauto_button, "clicked", accel_group,
                              GDK_D, GDK_MOD1_MASK,
                              GTK_ACCEL_VISIBLE);

  stop_clockwork_continue_button = gtk_button_new_with_label ("");
  stop_clockwork_continue_button_key = gtk_label_parse_uline (GTK_LABEL (GTK_BIN (stop_clockwork_continue_button)->child),
                                   "_Continue collection");
  gtk_widget_add_accelerator (stop_clockwork_continue_button, "clicked", accel_group,
                              stop_clockwork_continue_button_key, GDK_MOD1_MASK, (GtkAccelFlags) 0);
  gtk_widget_set_name (stop_clockwork_continue_button, "stop_clockwork_continue_button");
  gtk_widget_ref (stop_clockwork_continue_button);
  gtk_object_set_data_full (GTK_OBJECT (stop_clockwork_window), "stop_clockwork_continue_button", stop_clockwork_continue_button,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (stop_clockwork_continue_button);
  gtk_container_add (GTK_CONTAINER (hbuttonbox3), stop_clockwork_continue_button);
  GTK_WIDGET_SET_FLAGS (stop_clockwork_continue_button, GTK_CAN_DEFAULT);
  gtk_tooltips_set_tip (tooltips, stop_clockwork_continue_button, "Continue collection", NULL);
  gtk_widget_add_accelerator (stop_clockwork_continue_button, "clicked", accel_group,
                              GDK_S, GDK_MOD1_MASK,
                              GTK_ACCEL_VISIBLE);
  gtk_widget_add_accelerator (stop_clockwork_continue_button, "clicked", accel_group,
                              GDK_S, 0,
                              GTK_ACCEL_VISIBLE);
  gtk_widget_add_accelerator (stop_clockwork_continue_button, "clicked", accel_group,
                              GDK_s, 0,
                              GTK_ACCEL_VISIBLE);
  gtk_widget_add_accelerator (stop_clockwork_continue_button, "clicked", accel_group,
                              GDK_Escape, 0,
                              GTK_ACCEL_VISIBLE);

  gtk_signal_connect (GTK_OBJECT (stop_clockwork_now_button), "clicked",
                      GTK_SIGNAL_FUNC (on_stop_clockwork_now_button_clicked),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (stop_clockwork_noauto_button), "clicked",
                      GTK_SIGNAL_FUNC (on_stop_clockwork_noauto_button_clicked),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (stop_clockwork_continue_button), "clicked",
                      GTK_SIGNAL_FUNC (on_stop_clockwork_continue_button_clicked),
                      NULL);

  gtk_widget_grab_focus (stop_clockwork_now_button);
  gtk_widget_grab_default (stop_clockwork_now_button);
  gtk_object_set_data (GTK_OBJECT (stop_clockwork_window), "tooltips", tooltips);

  gtk_window_add_accel_group (GTK_WINDOW (stop_clockwork_window), accel_group);

  return stop_clockwork_window;
}

GtkWidget*
create_alert_window (void)
{
  GtkWidget *alert_window;
  GtkWidget *vbox9;
  GtkWidget *alert_summary_msg;
  GtkWidget *alert_info_message;
  GtkWidget *hbuttonbox4;
  GtkWidget *alert_ok_button;
  GtkAccelGroup *accel_group;

  accel_group = gtk_accel_group_new ();

  alert_window = gtk_window_new (GTK_WINDOW_TOPLEVEL);
  gtk_widget_set_name (alert_window, "alert_window");
  gtk_object_set_data (GTK_OBJECT (alert_window), "alert_window", alert_window);
  gtk_window_set_title (GTK_WINDOW (alert_window), "information");
  gtk_window_set_position (GTK_WINDOW (alert_window), GTK_WIN_POS_MOUSE);
  gtk_window_set_modal (GTK_WINDOW (alert_window), TRUE);

  vbox9 = gtk_vbox_new (FALSE, 0);
  gtk_widget_set_name (vbox9, "vbox9");
  gtk_widget_ref (vbox9);
  gtk_object_set_data_full (GTK_OBJECT (alert_window), "vbox9", vbox9,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (vbox9);
  gtk_container_add (GTK_CONTAINER (alert_window), vbox9);

  alert_summary_msg = gtk_label_new ("summary");
  gtk_widget_set_name (alert_summary_msg, "alert_summary_msg");
  gtk_widget_ref (alert_summary_msg);
  gtk_object_set_data_full (GTK_OBJECT (alert_window), "alert_summary_msg", alert_summary_msg,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (alert_summary_msg);
  gtk_box_pack_start (GTK_BOX (vbox9), alert_summary_msg, FALSE, FALSE, 0);
  gtk_misc_set_alignment (GTK_MISC (alert_summary_msg), 0, 0.5);
  gtk_misc_set_padding (GTK_MISC (alert_summary_msg), 10, 10);

  alert_info_message = gtk_label_new ("information message");
  gtk_widget_set_name (alert_info_message, "alert_info_message");
  gtk_widget_ref (alert_info_message);
  gtk_object_set_data_full (GTK_OBJECT (alert_window), "alert_info_message", alert_info_message,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (alert_info_message);
  gtk_box_pack_start (GTK_BOX (vbox9), alert_info_message, FALSE, FALSE, 0);
  gtk_label_set_line_wrap (GTK_LABEL (alert_info_message), TRUE);
  gtk_misc_set_alignment (GTK_MISC (alert_info_message), 0, 0.5);
  gtk_misc_set_padding (GTK_MISC (alert_info_message), 10, 10);

  hbuttonbox4 = gtk_hbutton_box_new ();
  gtk_widget_set_name (hbuttonbox4, "hbuttonbox4");
  gtk_widget_ref (hbuttonbox4);
  gtk_object_set_data_full (GTK_OBJECT (alert_window), "hbuttonbox4", hbuttonbox4,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (hbuttonbox4);
  gtk_box_pack_start (GTK_BOX (vbox9), hbuttonbox4, TRUE, TRUE, 0);
  gtk_container_set_border_width (GTK_CONTAINER (hbuttonbox4), 5);

  alert_ok_button = gtk_button_new_with_label ("OK");
  gtk_widget_set_name (alert_ok_button, "alert_ok_button");
  gtk_widget_ref (alert_ok_button);
  gtk_object_set_data_full (GTK_OBJECT (alert_window), "alert_ok_button", alert_ok_button,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (alert_ok_button);
  gtk_container_add (GTK_CONTAINER (hbuttonbox4), alert_ok_button);
  GTK_WIDGET_SET_FLAGS (alert_ok_button, GTK_CAN_DEFAULT);
  gtk_widget_add_accelerator (alert_ok_button, "clicked", accel_group,
                              GDK_Return, 0,
                              GTK_ACCEL_VISIBLE);
  gtk_widget_add_accelerator (alert_ok_button, "clicked", accel_group,
                              GDK_Escape, 0,
                              GTK_ACCEL_VISIBLE);

  gtk_signal_connect (GTK_OBJECT (alert_ok_button), "clicked",
                      GTK_SIGNAL_FUNC (on_alert_ok_button_clicked),
                      NULL);

  gtk_widget_grab_focus (alert_ok_button);
  gtk_widget_grab_default (alert_ok_button);
  gtk_window_add_accel_group (GTK_WINDOW (alert_window), accel_group);

  return alert_window;
}

GtkWidget*
create_log_popup_window (void)
{
  GtkWidget *log_popup_window;
  GtkWidget *log_popup_vbox;
  GtkWidget *log_popup_toolbar;
  GtkWidget *log_popup_collect_prompt;
  GtkWidget *log_popup_collect_combo;
  GList *log_popup_collect_combo_items = NULL;
  GtkWidget *log_popup_collect_entry;
  GtkWidget *log_popup_sev_prompt;
  GtkWidget *log_popup_sev_combo;
  GList *log_popup_sev_combo_items = NULL;
  GtkWidget *log_popup_sev_entry;
  GtkWidget *log_popup_coloured;
  GtkWidget *log_popup_detailed;
  GtkWidget *log_popup_ok_button;
  GtkWidget *scrolledwindow1;
  GtkWidget *log_popup_table;
  GtkWidget *log_popup_table_time;
  GtkWidget *log_popup_table_severity;
  GtkWidget *log_popup_table_message;
  GtkWidget *log_popup_table_function;
  GtkWidget *log_popup_table_file;
  GtkWidget *log_popup_table_line;
  GtkTooltips *tooltips;

  tooltips = gtk_tooltips_new ();

  log_popup_window = gtk_window_new (GTK_WINDOW_TOPLEVEL);
  gtk_widget_set_name (log_popup_window, "log_popup_window");
  gtk_object_set_data (GTK_OBJECT (log_popup_window), "log_popup_window", log_popup_window);
  gtk_widget_set_usize (log_popup_window, 640, 300);
  gtk_window_set_title (GTK_WINDOW (log_popup_window), "Logs");
  gtk_window_set_position (GTK_WINDOW (log_popup_window), GTK_WIN_POS_MOUSE);
  gtk_window_set_policy (GTK_WINDOW (log_popup_window), TRUE, TRUE, FALSE);

  log_popup_vbox = gtk_vbox_new (FALSE, 0);
  gtk_widget_set_name (log_popup_vbox, "log_popup_vbox");
  gtk_widget_ref (log_popup_vbox);
  gtk_object_set_data_full (GTK_OBJECT (log_popup_window), "log_popup_vbox", log_popup_vbox,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (log_popup_vbox);
  gtk_container_add (GTK_CONTAINER (log_popup_window), log_popup_vbox);

  log_popup_toolbar = gtk_toolbar_new (GTK_ORIENTATION_HORIZONTAL, GTK_TOOLBAR_BOTH);
  gtk_widget_set_name (log_popup_toolbar, "log_popup_toolbar");
  gtk_widget_ref (log_popup_toolbar);
  gtk_object_set_data_full (GTK_OBJECT (log_popup_window), "log_popup_toolbar", log_popup_toolbar,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (log_popup_toolbar);
  gtk_box_pack_start (GTK_BOX (log_popup_vbox), log_popup_toolbar, FALSE, FALSE, 0);

  log_popup_collect_prompt = gtk_label_new ("Collect:");
  gtk_widget_set_name (log_popup_collect_prompt, "log_popup_collect_prompt");
  gtk_widget_ref (log_popup_collect_prompt);
  gtk_object_set_data_full (GTK_OBJECT (log_popup_window), "log_popup_collect_prompt", log_popup_collect_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (log_popup_collect_prompt);
  gtk_toolbar_append_widget (GTK_TOOLBAR (log_popup_toolbar), log_popup_collect_prompt, NULL, NULL);
  gtk_label_set_justify (GTK_LABEL (log_popup_collect_prompt), GTK_JUSTIFY_RIGHT);
  gtk_misc_set_padding (GTK_MISC (log_popup_collect_prompt), 5, 0);

  log_popup_collect_combo = gtk_combo_new ();
  gtk_widget_set_name (log_popup_collect_combo, "log_popup_collect_combo");
  gtk_widget_ref (log_popup_collect_combo);
  gtk_object_set_data_full (GTK_OBJECT (log_popup_window), "log_popup_collect_combo", log_popup_collect_combo,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (log_popup_collect_combo);
  gtk_toolbar_append_widget (GTK_TOOLBAR (log_popup_toolbar), log_popup_collect_combo, NULL, NULL);
  gtk_widget_set_usize (log_popup_collect_combo, 140, -2);
  log_popup_collect_combo_items = g_list_append (log_popup_collect_combo_items, (gpointer) "Normal (Information)");
  log_popup_collect_combo_items = g_list_append (log_popup_collect_combo_items, (gpointer) "High (Diagnositc)");
  log_popup_collect_combo_items = g_list_append (log_popup_collect_combo_items, (gpointer) "Higher (Debug)");
  gtk_combo_set_popdown_strings (GTK_COMBO (log_popup_collect_combo), log_popup_collect_combo_items);
  g_list_free (log_popup_collect_combo_items);

  log_popup_collect_entry = GTK_COMBO (log_popup_collect_combo)->entry;
  gtk_widget_set_name (log_popup_collect_entry, "log_popup_collect_entry");
  gtk_widget_ref (log_popup_collect_entry);
  gtk_object_set_data_full (GTK_OBJECT (log_popup_window), "log_popup_collect_entry", log_popup_collect_entry,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (log_popup_collect_entry);
  gtk_tooltips_set_tip (tooltips, log_popup_collect_entry, "Select the log severity to collect", NULL);
  gtk_entry_set_text (GTK_ENTRY (log_popup_collect_entry), "Normal (Information)");

  log_popup_sev_prompt = gtk_label_new ("View:");
  gtk_widget_set_name (log_popup_sev_prompt, "log_popup_sev_prompt");
  gtk_widget_ref (log_popup_sev_prompt);
  gtk_object_set_data_full (GTK_OBJECT (log_popup_window), "log_popup_sev_prompt", log_popup_sev_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (log_popup_sev_prompt);
  gtk_toolbar_append_widget (GTK_TOOLBAR (log_popup_toolbar), log_popup_sev_prompt, NULL, NULL);
  gtk_misc_set_padding (GTK_MISC (log_popup_sev_prompt), 5, 0);

  log_popup_sev_combo = gtk_combo_new ();
  gtk_widget_set_name (log_popup_sev_combo, "log_popup_sev_combo");
  gtk_widget_ref (log_popup_sev_combo);
  gtk_object_set_data_full (GTK_OBJECT (log_popup_window), "log_popup_sev_combo", log_popup_sev_combo,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (log_popup_sev_combo);
  gtk_toolbar_append_widget (GTK_TOOLBAR (log_popup_toolbar), log_popup_sev_combo, NULL, NULL);
  gtk_widget_set_usize (log_popup_sev_combo, 110, -2);
  log_popup_sev_combo_items = g_list_append (log_popup_sev_combo_items, (gpointer) "All severities");
  log_popup_sev_combo_items = g_list_append (log_popup_sev_combo_items, (gpointer) "Fatal only");
  log_popup_sev_combo_items = g_list_append (log_popup_sev_combo_items, (gpointer) "Error +");
  log_popup_sev_combo_items = g_list_append (log_popup_sev_combo_items, (gpointer) "Warning +");
  log_popup_sev_combo_items = g_list_append (log_popup_sev_combo_items, (gpointer) "Information +");
  log_popup_sev_combo_items = g_list_append (log_popup_sev_combo_items, (gpointer) "Diagnostic +");
  gtk_combo_set_popdown_strings (GTK_COMBO (log_popup_sev_combo), log_popup_sev_combo_items);
  g_list_free (log_popup_sev_combo_items);

  log_popup_sev_entry = GTK_COMBO (log_popup_sev_combo)->entry;
  gtk_widget_set_name (log_popup_sev_entry, "log_popup_sev_entry");
  gtk_widget_ref (log_popup_sev_entry);
  gtk_object_set_data_full (GTK_OBJECT (log_popup_window), "log_popup_sev_entry", log_popup_sev_entry,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (log_popup_sev_entry);
  gtk_tooltips_set_tip (tooltips, log_popup_sev_entry, "Select the log severity to display", NULL);
  gtk_entry_set_editable (GTK_ENTRY (log_popup_sev_entry), FALSE);
  gtk_entry_set_text (GTK_ENTRY (log_popup_sev_entry), "All severities");

  log_popup_coloured = gtk_check_button_new_with_label ("Coloured text");
  gtk_widget_set_name (log_popup_coloured, "log_popup_coloured");
  gtk_widget_ref (log_popup_coloured);
  gtk_object_set_data_full (GTK_OBJECT (log_popup_window), "log_popup_coloured", log_popup_coloured,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (log_popup_coloured);
  gtk_toolbar_append_widget (GTK_TOOLBAR (log_popup_toolbar), log_popup_coloured, "Colourise the error messages based on severity", NULL);

  log_popup_detailed = gtk_check_button_new_with_label ("Detailed logs");
  gtk_widget_set_name (log_popup_detailed, "log_popup_detailed");
  gtk_widget_ref (log_popup_detailed);
  gtk_object_set_data_full (GTK_OBJECT (log_popup_window), "log_popup_detailed", log_popup_detailed,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (log_popup_detailed);
  gtk_toolbar_append_widget (GTK_TOOLBAR (log_popup_toolbar), log_popup_detailed, "Show detailed log locations within the application source code", NULL);

  log_popup_ok_button = gtk_button_new_with_label ("Close");
  gtk_widget_set_name (log_popup_ok_button, "log_popup_ok_button");
  gtk_widget_ref (log_popup_ok_button);
  gtk_object_set_data_full (GTK_OBJECT (log_popup_window), "log_popup_ok_button", log_popup_ok_button,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (log_popup_ok_button);
  gtk_toolbar_append_widget (GTK_TOOLBAR (log_popup_toolbar), log_popup_ok_button, "Close the log window", NULL);
  gtk_widget_set_usize (log_popup_ok_button, 70, -2);

  scrolledwindow1 = gtk_scrolled_window_new (NULL, NULL);
  gtk_widget_set_name (scrolledwindow1, "scrolledwindow1");
  gtk_widget_ref (scrolledwindow1);
  gtk_object_set_data_full (GTK_OBJECT (log_popup_window), "scrolledwindow1", scrolledwindow1,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (scrolledwindow1);
  gtk_box_pack_start (GTK_BOX (log_popup_vbox), scrolledwindow1, TRUE, TRUE, 0);

  log_popup_table = gtk_clist_new (6);
  gtk_widget_set_name (log_popup_table, "log_popup_table");
  gtk_widget_ref (log_popup_table);
  gtk_object_set_data_full (GTK_OBJECT (log_popup_window), "log_popup_table", log_popup_table,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (log_popup_table);
  gtk_container_add (GTK_CONTAINER (scrolledwindow1), log_popup_table);
  gtk_clist_set_column_width (GTK_CLIST (log_popup_table), 0, 52);
  gtk_clist_set_column_width (GTK_CLIST (log_popup_table), 1, 43);
  gtk_clist_set_column_width (GTK_CLIST (log_popup_table), 2, 346);
  gtk_clist_set_column_width (GTK_CLIST (log_popup_table), 3, 180);
  gtk_clist_set_column_width (GTK_CLIST (log_popup_table), 4, 120);
  gtk_clist_set_column_width (GTK_CLIST (log_popup_table), 5, 30);
  gtk_clist_column_titles_show (GTK_CLIST (log_popup_table));

  log_popup_table_time = gtk_label_new ("time");
  gtk_widget_set_name (log_popup_table_time, "log_popup_table_time");
  gtk_widget_ref (log_popup_table_time);
  gtk_object_set_data_full (GTK_OBJECT (log_popup_window), "log_popup_table_time", log_popup_table_time,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (log_popup_table_time);
  gtk_clist_set_column_widget (GTK_CLIST (log_popup_table), 0, log_popup_table_time);
  gtk_misc_set_alignment (GTK_MISC (log_popup_table_time), 7.45058e-09, 0.5);

  log_popup_table_severity = gtk_label_new ("severity");
  gtk_widget_set_name (log_popup_table_severity, "log_popup_table_severity");
  gtk_widget_ref (log_popup_table_severity);
  gtk_object_set_data_full (GTK_OBJECT (log_popup_window), "log_popup_table_severity", log_popup_table_severity,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (log_popup_table_severity);
  gtk_clist_set_column_widget (GTK_CLIST (log_popup_table), 1, log_popup_table_severity);
  gtk_misc_set_alignment (GTK_MISC (log_popup_table_severity), 7.45058e-09, 0.5);

  log_popup_table_message = gtk_label_new ("message");
  gtk_widget_set_name (log_popup_table_message, "log_popup_table_message");
  gtk_widget_ref (log_popup_table_message);
  gtk_object_set_data_full (GTK_OBJECT (log_popup_window), "log_popup_table_message", log_popup_table_message,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (log_popup_table_message);
  gtk_clist_set_column_widget (GTK_CLIST (log_popup_table), 2, log_popup_table_message);
  gtk_misc_set_alignment (GTK_MISC (log_popup_table_message), 7.45058e-09, 0.5);

  log_popup_table_function = gtk_label_new ("function");
  gtk_widget_set_name (log_popup_table_function, "log_popup_table_function");
  gtk_widget_ref (log_popup_table_function);
  gtk_object_set_data_full (GTK_OBJECT (log_popup_window), "log_popup_table_function", log_popup_table_function,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (log_popup_table_function);
  gtk_clist_set_column_widget (GTK_CLIST (log_popup_table), 3, log_popup_table_function);
  gtk_misc_set_alignment (GTK_MISC (log_popup_table_function), 7.45058e-09, 0.5);

  log_popup_table_file = gtk_label_new ("file");
  gtk_widget_set_name (log_popup_table_file, "log_popup_table_file");
  gtk_widget_ref (log_popup_table_file);
  gtk_object_set_data_full (GTK_OBJECT (log_popup_window), "log_popup_table_file", log_popup_table_file,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (log_popup_table_file);
  gtk_clist_set_column_widget (GTK_CLIST (log_popup_table), 4, log_popup_table_file);
  gtk_misc_set_alignment (GTK_MISC (log_popup_table_file), 7.45058e-09, 0.5);

  log_popup_table_line = gtk_label_new ("line");
  gtk_widget_set_name (log_popup_table_line, "log_popup_table_line");
  gtk_widget_ref (log_popup_table_line);
  gtk_object_set_data_full (GTK_OBJECT (log_popup_window), "log_popup_table_line", log_popup_table_line,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (log_popup_table_line);
  gtk_clist_set_column_widget (GTK_CLIST (log_popup_table), 5, log_popup_table_line);
  gtk_misc_set_alignment (GTK_MISC (log_popup_table_line), 7.45058e-09, 0.5);

  gtk_signal_connect (GTK_OBJECT (log_popup_collect_entry), "changed",
                      GTK_SIGNAL_FUNC (on_log_popup_collect_entry_changed),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (log_popup_sev_entry), "changed",
                      GTK_SIGNAL_FUNC (on_log_popup_sev_entry_changed),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (log_popup_coloured), "toggled",
                      GTK_SIGNAL_FUNC (on_log_popup_coloured_toggled),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (log_popup_detailed), "toggled",
                      GTK_SIGNAL_FUNC (on_log_popup_detailed_toggled),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (log_popup_ok_button), "clicked",
                      GTK_SIGNAL_FUNC (on_log_popup_ok_button_clicked),
                      NULL);

  gtk_object_set_data (GTK_OBJECT (log_popup_window), "tooltips", tooltips);

  return log_popup_window;
}

GtkWidget*
create_choice_popup_menu (void)
{
  GtkWidget *choice_popup_menu;
  GtkAccelGroup *choice_popup_menu_accels;
  GtkWidget *separator10;
  GtkWidget *update;
  GtkWidget *properties;
  GtkWidget *separator9;
  GtkWidget *remove;
  GtkWidget *choice_add;
  GtkWidget *choice_add_menu;
  GtkAccelGroup *choice_add_menu_accels;
  GtkWidget *add_file;
  GtkWidget *add_host;
  GtkWidget *add_route;
  GtkTooltips *tooltips;

  tooltips = gtk_tooltips_new ();

  choice_popup_menu = gtk_menu_new ();
  gtk_widget_set_name (choice_popup_menu, "choice_popup_menu");
  gtk_object_set_data (GTK_OBJECT (choice_popup_menu), "choice_popup_menu", choice_popup_menu);
  choice_popup_menu_accels = gtk_menu_ensure_uline_accel_group (GTK_MENU (choice_popup_menu));

  separator10 = gtk_menu_item_new ();
  gtk_widget_set_name (separator10, "separator10");
  gtk_widget_ref (separator10);
  gtk_object_set_data_full (GTK_OBJECT (choice_popup_menu), "separator10", separator10,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (separator10);
  gtk_container_add (GTK_CONTAINER (choice_popup_menu), separator10);
  gtk_widget_set_sensitive (separator10, FALSE);

  update = gtk_menu_item_new_with_label ("Update choice");
  gtk_widget_set_name (update, "update");
  gtk_widget_ref (update);
  gtk_object_set_data_full (GTK_OBJECT (choice_popup_menu), "update", update,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (update);
  gtk_container_add (GTK_CONTAINER (choice_popup_menu), update);
  gtk_tooltips_set_tip (tooltips, update, "Update the choices in this route", NULL);

  properties = gtk_menu_item_new_with_label ("Properties...");
  gtk_widget_set_name (properties, "properties");
  gtk_widget_ref (properties);
  gtk_object_set_data_full (GTK_OBJECT (choice_popup_menu), "properties", properties,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (properties);
  gtk_container_add (GTK_CONTAINER (choice_popup_menu), properties);
  gtk_tooltips_set_tip (tooltips, properties, "Properties of this choice node", NULL);

  separator9 = gtk_menu_item_new ();
  gtk_widget_set_name (separator9, "separator9");
  gtk_widget_ref (separator9);
  gtk_object_set_data_full (GTK_OBJECT (choice_popup_menu), "separator9", separator9,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (separator9);
  gtk_container_add (GTK_CONTAINER (choice_popup_menu), separator9);
  gtk_widget_set_sensitive (separator9, FALSE);

  remove = gtk_menu_item_new_with_label ("Remove...");
  gtk_widget_set_name (remove, "remove");
  gtk_widget_ref (remove);
  gtk_object_set_data_full (GTK_OBJECT (choice_popup_menu), "remove", remove,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (remove);
  gtk_container_add (GTK_CONTAINER (choice_popup_menu), remove);
  gtk_tooltips_set_tip (tooltips, remove, "Remove from tree", NULL);

  choice_add = gtk_menu_item_new_with_label ("Add");
  gtk_widget_set_name (choice_add, "choice_add");
  gtk_widget_ref (choice_add);
  gtk_object_set_data_full (GTK_OBJECT (choice_popup_menu), "choice_add", choice_add,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (choice_add);
  gtk_container_add (GTK_CONTAINER (choice_popup_menu), choice_add);
  gtk_tooltips_set_tip (tooltips, choice_add, "Add to tree", NULL);

  choice_add_menu = gtk_menu_new ();
  gtk_widget_set_name (choice_add_menu, "choice_add_menu");
  gtk_widget_ref (choice_add_menu);
  gtk_object_set_data_full (GTK_OBJECT (choice_popup_menu), "choice_add_menu", choice_add_menu,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_menu_item_set_submenu (GTK_MENU_ITEM (choice_add), choice_add_menu);
  choice_add_menu_accels = gtk_menu_ensure_uline_accel_group (GTK_MENU (choice_add_menu));

  add_file = gtk_menu_item_new_with_label ("File...");
  gtk_widget_set_name (add_file, "add_file");
  gtk_widget_ref (add_file);
  gtk_object_set_data_full (GTK_OBJECT (choice_popup_menu), "add_file", add_file,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (add_file);
  gtk_container_add (GTK_CONTAINER (choice_add_menu), add_file);

  add_host = gtk_menu_item_new_with_label ("Host...");
  gtk_widget_set_name (add_host, "add_host");
  gtk_widget_ref (add_host);
  gtk_object_set_data_full (GTK_OBJECT (choice_popup_menu), "add_host", add_host,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (add_host);
  gtk_container_add (GTK_CONTAINER (choice_add_menu), add_host);

  add_route = gtk_menu_item_new_with_label ("Route...");
  gtk_widget_set_name (add_route, "add_route");
  gtk_widget_ref (add_route);
  gtk_object_set_data_full (GTK_OBJECT (choice_popup_menu), "add_route", add_route,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (add_route);
  gtk_container_add (GTK_CONTAINER (choice_add_menu), add_route);

  gtk_signal_connect (GTK_OBJECT (update), "activate",
                      GTK_SIGNAL_FUNC (on_choice_update_activate),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (properties), "activate",
                      GTK_SIGNAL_FUNC (on_choice_properties_activate),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (remove), "activate",
                      GTK_SIGNAL_FUNC (on_choice_remove_activate),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (add_file), "activate",
                      GTK_SIGNAL_FUNC (on_choice_add_file_activate),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (add_host), "activate",
                      GTK_SIGNAL_FUNC (on_choice_add_host_activate),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (add_route), "activate",
                      GTK_SIGNAL_FUNC (on_choice_add_route_activate),
                      NULL);

  gtk_object_set_data (GTK_OBJECT (choice_popup_menu), "tooltips", tooltips);

  return choice_popup_menu;
}

GtkWidget*
create_choice_prop_window (void)
{
  GtkWidget *choice_prop_window;
  GtkWidget *choice_prop_vbox;
  GtkWidget *choice_prop_field_layout;
  GtkWidget *choice_prop_name_prompt;
  GtkWidget *choice_prop_info_prompt;
  GtkWidget *choice_prop_help_prompt;
  GtkWidget *choice_prop_name_value;
  GtkWidget *choice_prop_info_value;
  GtkWidget *choice_prop_help_value;
  GtkWidget *choice_prop_node_frame;
  GtkWidget *choice_prop_node_grid;
  GtkWidget *choice_prop_node_interval_prompt;
  GtkWidget *choice_prop_node_interval_val;
  GtkWidget *choice_prop_node_built_prompt;
  GtkWidget *choice_prop_node_built_val;
  GtkWidget *choice_prop_node_refresh_prompt;
  GtkWidget *choice_prop_node_refresh_val;
  GtkWidget *choice_prop_data_frame;
  GtkWidget *choice_prop_data_grid;
  GtkWidget *choice_prop_data_interval_prompt;
  GtkWidget *choice_prop_data_interval_val;
  GtkWidget *choice_prop_data_built_prompt;
  GtkWidget *choice_prop_data_built_val;
  GtkWidget *choice_prop_data_refresh_prompt;
  GtkWidget *choice_prop_data_refresh_val;
  GtkWidget *choice_prop_args_frame;
  GtkWidget *choice_prop_args_vbox;
  GtkWidget *choice_prop_args_inherit_check;
  GtkWidget *choice_prop_args_scrollwin;
  GtkWidget *choice_prop_args_table;
  GtkWidget *choice_prop_args_name;
  GtkWidget *choice_prop_args_value;
  GtkWidget *choice_prop_toolbar;
  GtkWidget *choice_prop_expert_button;
  GtkWidget *choice_prop_simple_button;
  GtkWidget *choice_prop_close_button;
  GtkAccelGroup *accel_group;
  GtkTooltips *tooltips;

  tooltips = gtk_tooltips_new ();

  accel_group = gtk_accel_group_new ();

  choice_prop_window = gtk_window_new (GTK_WINDOW_TOPLEVEL);
  gtk_widget_set_name (choice_prop_window, "choice_prop_window");
  gtk_object_set_data (GTK_OBJECT (choice_prop_window), "choice_prop_window", choice_prop_window);
  gtk_widget_set_usize (choice_prop_window, 300, -2);
  gtk_window_set_title (GTK_WINDOW (choice_prop_window), "Choice Properties");
  gtk_window_set_position (GTK_WINDOW (choice_prop_window), GTK_WIN_POS_MOUSE);
  gtk_window_set_policy (GTK_WINDOW (choice_prop_window), TRUE, TRUE, TRUE);

  choice_prop_vbox = gtk_vbox_new (FALSE, 7);
  gtk_widget_set_name (choice_prop_vbox, "choice_prop_vbox");
  gtk_widget_ref (choice_prop_vbox);
  gtk_object_set_data_full (GTK_OBJECT (choice_prop_window), "choice_prop_vbox", choice_prop_vbox,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (choice_prop_vbox);
  gtk_container_add (GTK_CONTAINER (choice_prop_window), choice_prop_vbox);
  gtk_container_set_border_width (GTK_CONTAINER (choice_prop_vbox), 8);

  choice_prop_field_layout = gtk_table_new (3, 2, FALSE);
  gtk_widget_set_name (choice_prop_field_layout, "choice_prop_field_layout");
  gtk_widget_ref (choice_prop_field_layout);
  gtk_object_set_data_full (GTK_OBJECT (choice_prop_window), "choice_prop_field_layout", choice_prop_field_layout,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (choice_prop_field_layout);
  gtk_box_pack_start (GTK_BOX (choice_prop_vbox), choice_prop_field_layout, TRUE, TRUE, 0);
  gtk_table_set_row_spacings (GTK_TABLE (choice_prop_field_layout), 2);
  gtk_table_set_col_spacings (GTK_TABLE (choice_prop_field_layout), 2);

  choice_prop_name_prompt = gtk_label_new ("Name: ");
  gtk_widget_set_name (choice_prop_name_prompt, "choice_prop_name_prompt");
  gtk_widget_ref (choice_prop_name_prompt);
  gtk_object_set_data_full (GTK_OBJECT (choice_prop_window), "choice_prop_name_prompt", choice_prop_name_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (choice_prop_name_prompt);
  gtk_table_attach (GTK_TABLE (choice_prop_field_layout), choice_prop_name_prompt, 0, 1, 0, 1,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_misc_set_alignment (GTK_MISC (choice_prop_name_prompt), 0, 0);
  gtk_misc_set_padding (GTK_MISC (choice_prop_name_prompt), 6, 0);

  choice_prop_info_prompt = gtk_label_new ("Information: ");
  gtk_widget_set_name (choice_prop_info_prompt, "choice_prop_info_prompt");
  gtk_widget_ref (choice_prop_info_prompt);
  gtk_object_set_data_full (GTK_OBJECT (choice_prop_window), "choice_prop_info_prompt", choice_prop_info_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (choice_prop_info_prompt);
  gtk_table_attach (GTK_TABLE (choice_prop_field_layout), choice_prop_info_prompt, 0, 1, 1, 2,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_misc_set_alignment (GTK_MISC (choice_prop_info_prompt), 0, 0);
  gtk_misc_set_padding (GTK_MISC (choice_prop_info_prompt), 6, 0);

  choice_prop_help_prompt = gtk_label_new ("Help: ");
  gtk_widget_set_name (choice_prop_help_prompt, "choice_prop_help_prompt");
  gtk_widget_ref (choice_prop_help_prompt);
  gtk_object_set_data_full (GTK_OBJECT (choice_prop_window), "choice_prop_help_prompt", choice_prop_help_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (choice_prop_help_prompt);
  gtk_table_attach (GTK_TABLE (choice_prop_field_layout), choice_prop_help_prompt, 0, 1, 2, 3,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_misc_set_alignment (GTK_MISC (choice_prop_help_prompt), 0, 0);
  gtk_misc_set_padding (GTK_MISC (choice_prop_help_prompt), 6, 0);

  choice_prop_name_value = gtk_label_new ("");
  gtk_widget_set_name (choice_prop_name_value, "choice_prop_name_value");
  gtk_widget_ref (choice_prop_name_value);
  gtk_object_set_data_full (GTK_OBJECT (choice_prop_window), "choice_prop_name_value", choice_prop_name_value,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (choice_prop_name_value);
  gtk_table_attach (GTK_TABLE (choice_prop_field_layout), choice_prop_name_value, 1, 2, 0, 1,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (GTK_EXPAND), 0, 0);
  gtk_label_set_line_wrap (GTK_LABEL (choice_prop_name_value), TRUE);
  gtk_misc_set_alignment (GTK_MISC (choice_prop_name_value), 0, 0.5);

  choice_prop_info_value = gtk_label_new ("");
  gtk_widget_set_name (choice_prop_info_value, "choice_prop_info_value");
  gtk_widget_ref (choice_prop_info_value);
  gtk_object_set_data_full (GTK_OBJECT (choice_prop_window), "choice_prop_info_value", choice_prop_info_value,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (choice_prop_info_value);
  gtk_table_attach (GTK_TABLE (choice_prop_field_layout), choice_prop_info_value, 1, 2, 1, 2,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (GTK_EXPAND), 0, 0);
  gtk_label_set_line_wrap (GTK_LABEL (choice_prop_info_value), TRUE);
  gtk_misc_set_alignment (GTK_MISC (choice_prop_info_value), 0, 0.5);

  choice_prop_help_value = gtk_label_new ("");
  gtk_widget_set_name (choice_prop_help_value, "choice_prop_help_value");
  gtk_widget_ref (choice_prop_help_value);
  gtk_object_set_data_full (GTK_OBJECT (choice_prop_window), "choice_prop_help_value", choice_prop_help_value,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (choice_prop_help_value);
  gtk_table_attach (GTK_TABLE (choice_prop_field_layout), choice_prop_help_value, 1, 2, 2, 3,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (GTK_EXPAND), 0, 0);
  gtk_label_set_line_wrap (GTK_LABEL (choice_prop_help_value), TRUE);
  gtk_misc_set_alignment (GTK_MISC (choice_prop_help_value), 0, 0.5);

  choice_prop_node_frame = gtk_frame_new ("Node");
  gtk_widget_set_name (choice_prop_node_frame, "choice_prop_node_frame");
  gtk_widget_ref (choice_prop_node_frame);
  gtk_object_set_data_full (GTK_OBJECT (choice_prop_window), "choice_prop_node_frame", choice_prop_node_frame,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (choice_prop_node_frame);
  gtk_box_pack_start (GTK_BOX (choice_prop_vbox), choice_prop_node_frame, TRUE, TRUE, 0);

  choice_prop_node_grid = gtk_table_new (3, 2, FALSE);
  gtk_widget_set_name (choice_prop_node_grid, "choice_prop_node_grid");
  gtk_widget_ref (choice_prop_node_grid);
  gtk_object_set_data_full (GTK_OBJECT (choice_prop_window), "choice_prop_node_grid", choice_prop_node_grid,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (choice_prop_node_grid);
  gtk_container_add (GTK_CONTAINER (choice_prop_node_frame), choice_prop_node_grid);
  gtk_table_set_row_spacings (GTK_TABLE (choice_prop_node_grid), 2);

  choice_prop_node_interval_prompt = gtk_label_new ("Interval: ");
  gtk_widget_set_name (choice_prop_node_interval_prompt, "choice_prop_node_interval_prompt");
  gtk_widget_ref (choice_prop_node_interval_prompt);
  gtk_object_set_data_full (GTK_OBJECT (choice_prop_window), "choice_prop_node_interval_prompt", choice_prop_node_interval_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (choice_prop_node_interval_prompt);
  gtk_table_attach (GTK_TABLE (choice_prop_node_grid), choice_prop_node_interval_prompt, 0, 1, 0, 1,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_misc_set_alignment (GTK_MISC (choice_prop_node_interval_prompt), 0, 0.5);
  gtk_misc_set_padding (GTK_MISC (choice_prop_node_interval_prompt), 10, 0);

  choice_prop_node_interval_val = gtk_label_new ("");
  gtk_widget_set_name (choice_prop_node_interval_val, "choice_prop_node_interval_val");
  gtk_widget_ref (choice_prop_node_interval_val);
  gtk_object_set_data_full (GTK_OBJECT (choice_prop_window), "choice_prop_node_interval_val", choice_prop_node_interval_val,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (choice_prop_node_interval_val);
  gtk_table_attach (GTK_TABLE (choice_prop_node_grid), choice_prop_node_interval_val, 1, 2, 0, 1,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_misc_set_alignment (GTK_MISC (choice_prop_node_interval_val), 0, 0.5);

  choice_prop_node_built_prompt = gtk_label_new ("Built: ");
  gtk_widget_set_name (choice_prop_node_built_prompt, "choice_prop_node_built_prompt");
  gtk_widget_ref (choice_prop_node_built_prompt);
  gtk_object_set_data_full (GTK_OBJECT (choice_prop_window), "choice_prop_node_built_prompt", choice_prop_node_built_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_table_attach (GTK_TABLE (choice_prop_node_grid), choice_prop_node_built_prompt, 0, 1, 1, 2,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_misc_set_alignment (GTK_MISC (choice_prop_node_built_prompt), 0, 0.5);
  gtk_misc_set_padding (GTK_MISC (choice_prop_node_built_prompt), 10, 0);

  choice_prop_node_built_val = gtk_label_new ("");
  gtk_widget_set_name (choice_prop_node_built_val, "choice_prop_node_built_val");
  gtk_widget_ref (choice_prop_node_built_val);
  gtk_object_set_data_full (GTK_OBJECT (choice_prop_window), "choice_prop_node_built_val", choice_prop_node_built_val,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_table_attach (GTK_TABLE (choice_prop_node_grid), choice_prop_node_built_val, 1, 2, 1, 2,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_misc_set_alignment (GTK_MISC (choice_prop_node_built_val), 0, 0.5);

  choice_prop_node_refresh_prompt = gtk_label_new ("Refresh: ");
  gtk_widget_set_name (choice_prop_node_refresh_prompt, "choice_prop_node_refresh_prompt");
  gtk_widget_ref (choice_prop_node_refresh_prompt);
  gtk_object_set_data_full (GTK_OBJECT (choice_prop_window), "choice_prop_node_refresh_prompt", choice_prop_node_refresh_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_table_attach (GTK_TABLE (choice_prop_node_grid), choice_prop_node_refresh_prompt, 0, 1, 2, 3,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_misc_set_alignment (GTK_MISC (choice_prop_node_refresh_prompt), 0, 0.5);
  gtk_misc_set_padding (GTK_MISC (choice_prop_node_refresh_prompt), 10, 0);

  choice_prop_node_refresh_val = gtk_label_new ("");
  gtk_widget_set_name (choice_prop_node_refresh_val, "choice_prop_node_refresh_val");
  gtk_widget_ref (choice_prop_node_refresh_val);
  gtk_object_set_data_full (GTK_OBJECT (choice_prop_window), "choice_prop_node_refresh_val", choice_prop_node_refresh_val,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_table_attach (GTK_TABLE (choice_prop_node_grid), choice_prop_node_refresh_val, 1, 2, 2, 3,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_misc_set_alignment (GTK_MISC (choice_prop_node_refresh_val), 0, 0.5);

  choice_prop_data_frame = gtk_frame_new ("Data");
  gtk_widget_set_name (choice_prop_data_frame, "choice_prop_data_frame");
  gtk_widget_ref (choice_prop_data_frame);
  gtk_object_set_data_full (GTK_OBJECT (choice_prop_window), "choice_prop_data_frame", choice_prop_data_frame,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (choice_prop_data_frame);
  gtk_box_pack_start (GTK_BOX (choice_prop_vbox), choice_prop_data_frame, TRUE, TRUE, 0);

  choice_prop_data_grid = gtk_table_new (3, 2, FALSE);
  gtk_widget_set_name (choice_prop_data_grid, "choice_prop_data_grid");
  gtk_widget_ref (choice_prop_data_grid);
  gtk_object_set_data_full (GTK_OBJECT (choice_prop_window), "choice_prop_data_grid", choice_prop_data_grid,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (choice_prop_data_grid);
  gtk_container_add (GTK_CONTAINER (choice_prop_data_frame), choice_prop_data_grid);
  gtk_table_set_row_spacings (GTK_TABLE (choice_prop_data_grid), 2);

  choice_prop_data_interval_prompt = gtk_label_new ("Interval: ");
  gtk_widget_set_name (choice_prop_data_interval_prompt, "choice_prop_data_interval_prompt");
  gtk_widget_ref (choice_prop_data_interval_prompt);
  gtk_object_set_data_full (GTK_OBJECT (choice_prop_window), "choice_prop_data_interval_prompt", choice_prop_data_interval_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (choice_prop_data_interval_prompt);
  gtk_table_attach (GTK_TABLE (choice_prop_data_grid), choice_prop_data_interval_prompt, 0, 1, 0, 1,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_misc_set_alignment (GTK_MISC (choice_prop_data_interval_prompt), 0, 0.5);
  gtk_misc_set_padding (GTK_MISC (choice_prop_data_interval_prompt), 10, 0);

  choice_prop_data_interval_val = gtk_label_new ("");
  gtk_widget_set_name (choice_prop_data_interval_val, "choice_prop_data_interval_val");
  gtk_widget_ref (choice_prop_data_interval_val);
  gtk_object_set_data_full (GTK_OBJECT (choice_prop_window), "choice_prop_data_interval_val", choice_prop_data_interval_val,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (choice_prop_data_interval_val);
  gtk_table_attach (GTK_TABLE (choice_prop_data_grid), choice_prop_data_interval_val, 1, 2, 0, 1,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_misc_set_alignment (GTK_MISC (choice_prop_data_interval_val), 0, 0.5);

  choice_prop_data_built_prompt = gtk_label_new ("Built: ");
  gtk_widget_set_name (choice_prop_data_built_prompt, "choice_prop_data_built_prompt");
  gtk_widget_ref (choice_prop_data_built_prompt);
  gtk_object_set_data_full (GTK_OBJECT (choice_prop_window), "choice_prop_data_built_prompt", choice_prop_data_built_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_table_attach (GTK_TABLE (choice_prop_data_grid), choice_prop_data_built_prompt, 0, 1, 1, 2,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_misc_set_alignment (GTK_MISC (choice_prop_data_built_prompt), 0, 0.5);
  gtk_misc_set_padding (GTK_MISC (choice_prop_data_built_prompt), 10, 0);

  choice_prop_data_built_val = gtk_label_new ("");
  gtk_widget_set_name (choice_prop_data_built_val, "choice_prop_data_built_val");
  gtk_widget_ref (choice_prop_data_built_val);
  gtk_object_set_data_full (GTK_OBJECT (choice_prop_window), "choice_prop_data_built_val", choice_prop_data_built_val,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_table_attach (GTK_TABLE (choice_prop_data_grid), choice_prop_data_built_val, 1, 2, 1, 2,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_misc_set_alignment (GTK_MISC (choice_prop_data_built_val), 0, 0.5);

  choice_prop_data_refresh_prompt = gtk_label_new ("Refresh: ");
  gtk_widget_set_name (choice_prop_data_refresh_prompt, "choice_prop_data_refresh_prompt");
  gtk_widget_ref (choice_prop_data_refresh_prompt);
  gtk_object_set_data_full (GTK_OBJECT (choice_prop_window), "choice_prop_data_refresh_prompt", choice_prop_data_refresh_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_table_attach (GTK_TABLE (choice_prop_data_grid), choice_prop_data_refresh_prompt, 0, 1, 2, 3,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_misc_set_alignment (GTK_MISC (choice_prop_data_refresh_prompt), 0, 0.5);
  gtk_misc_set_padding (GTK_MISC (choice_prop_data_refresh_prompt), 10, 0);

  choice_prop_data_refresh_val = gtk_label_new ("");
  gtk_widget_set_name (choice_prop_data_refresh_val, "choice_prop_data_refresh_val");
  gtk_widget_ref (choice_prop_data_refresh_val);
  gtk_object_set_data_full (GTK_OBJECT (choice_prop_window), "choice_prop_data_refresh_val", choice_prop_data_refresh_val,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_table_attach (GTK_TABLE (choice_prop_data_grid), choice_prop_data_refresh_val, 1, 2, 2, 3,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_misc_set_alignment (GTK_MISC (choice_prop_data_refresh_val), 0, 0.5);

  choice_prop_args_frame = gtk_frame_new ("Arguments");
  gtk_widget_set_name (choice_prop_args_frame, "choice_prop_args_frame");
  gtk_widget_ref (choice_prop_args_frame);
  gtk_object_set_data_full (GTK_OBJECT (choice_prop_window), "choice_prop_args_frame", choice_prop_args_frame,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_box_pack_start (GTK_BOX (choice_prop_vbox), choice_prop_args_frame, TRUE, TRUE, 0);
  gtk_widget_set_usize (choice_prop_args_frame, 300, -2);

  choice_prop_args_vbox = gtk_vbox_new (FALSE, 2);
  gtk_widget_set_name (choice_prop_args_vbox, "choice_prop_args_vbox");
  gtk_widget_ref (choice_prop_args_vbox);
  gtk_object_set_data_full (GTK_OBJECT (choice_prop_window), "choice_prop_args_vbox", choice_prop_args_vbox,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (choice_prop_args_vbox);
  gtk_container_add (GTK_CONTAINER (choice_prop_args_frame), choice_prop_args_vbox);

  choice_prop_args_inherit_check = gtk_check_button_new_with_label ("Inherit Arguments");
  gtk_widget_set_name (choice_prop_args_inherit_check, "choice_prop_args_inherit_check");
  gtk_widget_ref (choice_prop_args_inherit_check);
  gtk_object_set_data_full (GTK_OBJECT (choice_prop_window), "choice_prop_args_inherit_check", choice_prop_args_inherit_check,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (choice_prop_args_inherit_check);
  gtk_box_pack_start (GTK_BOX (choice_prop_args_vbox), choice_prop_args_inherit_check, FALSE, FALSE, 0);
  gtk_tooltips_set_tip (tooltips, choice_prop_args_inherit_check, "Add parent arguments to this node", NULL);

  choice_prop_args_scrollwin = gtk_scrolled_window_new (NULL, NULL);
  gtk_widget_set_name (choice_prop_args_scrollwin, "choice_prop_args_scrollwin");
  gtk_widget_ref (choice_prop_args_scrollwin);
  gtk_object_set_data_full (GTK_OBJECT (choice_prop_window), "choice_prop_args_scrollwin", choice_prop_args_scrollwin,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (choice_prop_args_scrollwin);
  gtk_box_pack_start (GTK_BOX (choice_prop_args_vbox), choice_prop_args_scrollwin, TRUE, TRUE, 0);
  gtk_widget_set_usize (choice_prop_args_scrollwin, -2, 150);
  gtk_scrolled_window_set_policy (GTK_SCROLLED_WINDOW (choice_prop_args_scrollwin), GTK_POLICY_AUTOMATIC, GTK_POLICY_AUTOMATIC);

  choice_prop_args_table = gtk_clist_new (2);
  gtk_widget_set_name (choice_prop_args_table, "choice_prop_args_table");
  gtk_widget_ref (choice_prop_args_table);
  gtk_object_set_data_full (GTK_OBJECT (choice_prop_window), "choice_prop_args_table", choice_prop_args_table,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (choice_prop_args_table);
  gtk_container_add (GTK_CONTAINER (choice_prop_args_scrollwin), choice_prop_args_table);
  gtk_clist_set_column_width (GTK_CLIST (choice_prop_args_table), 0, 80);
  gtk_clist_set_column_width (GTK_CLIST (choice_prop_args_table), 1, 80);
  gtk_clist_column_titles_show (GTK_CLIST (choice_prop_args_table));

  choice_prop_args_name = gtk_label_new ("Name");
  gtk_widget_set_name (choice_prop_args_name, "choice_prop_args_name");
  gtk_widget_ref (choice_prop_args_name);
  gtk_object_set_data_full (GTK_OBJECT (choice_prop_window), "choice_prop_args_name", choice_prop_args_name,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (choice_prop_args_name);
  gtk_clist_set_column_widget (GTK_CLIST (choice_prop_args_table), 0, choice_prop_args_name);
  gtk_misc_set_alignment (GTK_MISC (choice_prop_args_name), 0.05, 0.5);

  choice_prop_args_value = gtk_label_new ("Value");
  gtk_widget_set_name (choice_prop_args_value, "choice_prop_args_value");
  gtk_widget_ref (choice_prop_args_value);
  gtk_object_set_data_full (GTK_OBJECT (choice_prop_window), "choice_prop_args_value", choice_prop_args_value,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (choice_prop_args_value);
  gtk_clist_set_column_widget (GTK_CLIST (choice_prop_args_table), 1, choice_prop_args_value);
  gtk_label_set_justify (GTK_LABEL (choice_prop_args_value), GTK_JUSTIFY_LEFT);
  gtk_misc_set_alignment (GTK_MISC (choice_prop_args_value), 0.05, 0.5);

  choice_prop_toolbar = gtk_toolbar_new (GTK_ORIENTATION_HORIZONTAL, GTK_TOOLBAR_TEXT);
  gtk_widget_set_name (choice_prop_toolbar, "choice_prop_toolbar");
  gtk_widget_ref (choice_prop_toolbar);
  gtk_object_set_data_full (GTK_OBJECT (choice_prop_window), "choice_prop_toolbar", choice_prop_toolbar,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (choice_prop_toolbar);
  gtk_box_pack_end (GTK_BOX (choice_prop_vbox), choice_prop_toolbar, FALSE, FALSE, 5);

  choice_prop_expert_button = gtk_toolbar_append_element (GTK_TOOLBAR (choice_prop_toolbar),
                                GTK_TOOLBAR_CHILD_BUTTON,
                                NULL,
                                " Expert ",
                                "Add expert properties to the window", NULL,
                                NULL, NULL, NULL);
  gtk_widget_set_name (choice_prop_expert_button, "choice_prop_expert_button");
  gtk_widget_ref (choice_prop_expert_button);
  gtk_object_set_data_full (GTK_OBJECT (choice_prop_window), "choice_prop_expert_button", choice_prop_expert_button,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (choice_prop_expert_button);
  gtk_widget_set_usize (choice_prop_expert_button, 65, -2);
  gtk_widget_add_accelerator (choice_prop_expert_button, "clicked", accel_group,
                              GDK_E, GDK_MOD1_MASK,
                              GTK_ACCEL_VISIBLE);

  choice_prop_simple_button = gtk_toolbar_append_element (GTK_TOOLBAR (choice_prop_toolbar),
                                GTK_TOOLBAR_CHILD_BUTTON,
                                NULL,
                                " Simple ",
                                "Remove expert properties from the window", NULL,
                                NULL, NULL, NULL);
  gtk_widget_set_name (choice_prop_simple_button, "choice_prop_simple_button");
  gtk_widget_ref (choice_prop_simple_button);
  gtk_object_set_data_full (GTK_OBJECT (choice_prop_window), "choice_prop_simple_button", choice_prop_simple_button,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_set_usize (choice_prop_simple_button, 65, -2);
  gtk_widget_add_accelerator (choice_prop_simple_button, "clicked", accel_group,
                              GDK_S, GDK_MOD1_MASK,
                              GTK_ACCEL_VISIBLE);

  choice_prop_close_button = gtk_toolbar_append_element (GTK_TOOLBAR (choice_prop_toolbar),
                                GTK_TOOLBAR_CHILD_BUTTON,
                                NULL,
                                " Close ",
                                NULL, NULL,
                                NULL, NULL, NULL);
  gtk_widget_set_name (choice_prop_close_button, "choice_prop_close_button");
  gtk_widget_ref (choice_prop_close_button);
  gtk_object_set_data_full (GTK_OBJECT (choice_prop_window), "choice_prop_close_button", choice_prop_close_button,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (choice_prop_close_button);
  gtk_widget_set_usize (choice_prop_close_button, 65, -2);
  gtk_widget_add_accelerator (choice_prop_close_button, "clicked", accel_group,
                              GDK_C, GDK_MOD1_MASK,
                              GTK_ACCEL_VISIBLE);
  gtk_widget_add_accelerator (choice_prop_close_button, "clicked", accel_group,
                              GDK_Escape, 0,
                              GTK_ACCEL_VISIBLE);

  gtk_signal_connect (GTK_OBJECT (choice_prop_args_inherit_check), "toggled",
                      GTK_SIGNAL_FUNC (on_choice_prop_args_inherit_check_toggled),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (choice_prop_expert_button), "clicked",
                      GTK_SIGNAL_FUNC (on_choice_prop_expert_button_clicked),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (choice_prop_simple_button), "clicked",
                      GTK_SIGNAL_FUNC (on_choice_prop_simple_button_clicked),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (choice_prop_close_button), "clicked",
                      GTK_SIGNAL_FUNC (on_choice_prop_close_button_clicked),
                      NULL);

  gtk_object_set_data (GTK_OBJECT (choice_prop_window), "tooltips", tooltips);

  gtk_window_add_accel_group (GTK_WINDOW (choice_prop_window), accel_group);

  return choice_prop_window;
}

GtkWidget*
create_repos_prop_window (void)
{
  GtkWidget *repos_prop_window;
  GtkWidget *repos_vbox;
  GtkWidget *repos_enable_check;
  GtkWidget *repos_addr_frame;
  GtkWidget *repos_addr_gui_table;
  GtkWidget *repos_geturl_entry;
  GtkWidget *repos_geturl_prompt;
  GtkWidget *repos_puturl_prompt;
  GtkWidget *repos_puturl_entry;
  GtkWidget *repos_account_frame;
  GtkWidget *repos_account_gui_table;
  GtkWidget *repos_harv_user_prompt;
  GtkWidget *repos_harv_user_entry;
  GtkWidget *repos_harv_pw_prompt;
  GtkWidget *repos_harv_org_prompt;
  GtkWidget *repos_harv_pw_entry;
  GtkWidget *repos_harv_org_entry;
  GtkWidget *repos_key_entry;
  GtkWidget *repos_key_prompt;
  GtkWidget *repos_auth_frame;
  GtkWidget *repos_auth_gui_table;
  GtkWidget *repos_realm_user_prompt;
  GtkWidget *repos_realm_pw_prompt;
  GtkWidget *repos_realm_proxy_host_prompt;
  GtkWidget *repos_proxy_port_prompt;
  GtkWidget *repos_proxy_user_prompt;
  GtkWidget *repos_proxy_pw_prompt;
  GtkWidget *repos_realm_user_entry;
  GtkWidget *repos_realm_pw_entry;
  GtkWidget *repos_proxy_pw_entry;
  GtkWidget *repos_proxy_user_entry;
  GtkWidget *repos_proxy_host_entry;
  GtkWidget *repos_proxy_port_entry;
  GtkWidget *repos_buttons;
  GtkWidget *repos_save_action;
  GtkWidget *repos_save_reset;
  guint repos_cancel_finished_key;
  GtkWidget *repos_cancel_finished;
  GtkAccelGroup *accel_group;
  GtkTooltips *tooltips;

  tooltips = gtk_tooltips_new ();

  accel_group = gtk_accel_group_new ();

  repos_prop_window = gtk_window_new (GTK_WINDOW_TOPLEVEL);
  gtk_widget_set_name (repos_prop_window, "repos_prop_window");
  gtk_object_set_data (GTK_OBJECT (repos_prop_window), "repos_prop_window", repos_prop_window);
  gtk_tooltips_set_tip (tooltips, repos_prop_window, "Change the repository property settings", NULL);
  gtk_window_set_title (GTK_WINDOW (repos_prop_window), "Repository Properties");
  gtk_window_set_position (GTK_WINDOW (repos_prop_window), GTK_WIN_POS_MOUSE);
  gtk_window_set_policy (GTK_WINDOW (repos_prop_window), FALSE, FALSE, FALSE);

  repos_vbox = gtk_vbox_new (FALSE, 6);
  gtk_widget_set_name (repos_vbox, "repos_vbox");
  gtk_widget_ref (repos_vbox);
  gtk_object_set_data_full (GTK_OBJECT (repos_prop_window), "repos_vbox", repos_vbox,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (repos_vbox);
  gtk_container_add (GTK_CONTAINER (repos_prop_window), repos_vbox);
  gtk_container_set_border_width (GTK_CONTAINER (repos_vbox), 8);

  repos_enable_check = gtk_check_button_new_with_label ("Enable repository");
  gtk_widget_set_name (repos_enable_check, "repos_enable_check");
  gtk_widget_ref (repos_enable_check);
  gtk_object_set_data_full (GTK_OBJECT (repos_prop_window), "repos_enable_check", repos_enable_check,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (repos_enable_check);
  gtk_box_pack_start (GTK_BOX (repos_vbox), repos_enable_check, FALSE, FALSE, 0);
  gtk_toggle_button_set_active (GTK_TOGGLE_BUTTON (repos_enable_check), TRUE);

  repos_addr_frame = gtk_frame_new ("Address");
  gtk_widget_set_name (repos_addr_frame, "repos_addr_frame");
  gtk_widget_ref (repos_addr_frame);
  gtk_object_set_data_full (GTK_OBJECT (repos_prop_window), "repos_addr_frame", repos_addr_frame,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (repos_addr_frame);
  gtk_box_pack_start (GTK_BOX (repos_vbox), repos_addr_frame, FALSE, TRUE, 0);

  repos_addr_gui_table = gtk_table_new (2, 2, FALSE);
  gtk_widget_set_name (repos_addr_gui_table, "repos_addr_gui_table");
  gtk_widget_ref (repos_addr_gui_table);
  gtk_object_set_data_full (GTK_OBJECT (repos_prop_window), "repos_addr_gui_table", repos_addr_gui_table,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (repos_addr_gui_table);
  gtk_container_add (GTK_CONTAINER (repos_addr_frame), repos_addr_gui_table);
  gtk_table_set_row_spacings (GTK_TABLE (repos_addr_gui_table), 2);

  repos_geturl_entry = gtk_entry_new_with_max_length (255);
  gtk_widget_set_name (repos_geturl_entry, "repos_geturl_entry");
  gtk_widget_ref (repos_geturl_entry);
  gtk_object_set_data_full (GTK_OBJECT (repos_prop_window), "repos_geturl_entry", repos_geturl_entry,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (repos_geturl_entry);
  gtk_table_attach (GTK_TABLE (repos_addr_gui_table), repos_geturl_entry, 1, 2, 0, 1,
                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_tooltips_set_tip (tooltips, repos_geturl_entry, "URL for repository GET requests", NULL);

  repos_geturl_prompt = gtk_label_new ("Get URL");
  gtk_widget_set_name (repos_geturl_prompt, "repos_geturl_prompt");
  gtk_widget_ref (repos_geturl_prompt);
  gtk_object_set_data_full (GTK_OBJECT (repos_prop_window), "repos_geturl_prompt", repos_geturl_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (repos_geturl_prompt);
  gtk_table_attach (GTK_TABLE (repos_addr_gui_table), repos_geturl_prompt, 0, 1, 0, 1,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_label_set_justify (GTK_LABEL (repos_geturl_prompt), GTK_JUSTIFY_LEFT);
  gtk_misc_set_alignment (GTK_MISC (repos_geturl_prompt), 0, 0.5);
  gtk_misc_set_padding (GTK_MISC (repos_geturl_prompt), 10, 0);

  repos_puturl_prompt = gtk_label_new ("Put URL");
  gtk_widget_set_name (repos_puturl_prompt, "repos_puturl_prompt");
  gtk_widget_ref (repos_puturl_prompt);
  gtk_object_set_data_full (GTK_OBJECT (repos_prop_window), "repos_puturl_prompt", repos_puturl_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (repos_puturl_prompt);
  gtk_table_attach (GTK_TABLE (repos_addr_gui_table), repos_puturl_prompt, 0, 1, 1, 2,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_label_set_justify (GTK_LABEL (repos_puturl_prompt), GTK_JUSTIFY_LEFT);
  gtk_misc_set_alignment (GTK_MISC (repos_puturl_prompt), 0, 0.5);
  gtk_misc_set_padding (GTK_MISC (repos_puturl_prompt), 10, 0);

  repos_puturl_entry = gtk_entry_new_with_max_length (255);
  gtk_widget_set_name (repos_puturl_entry, "repos_puturl_entry");
  gtk_widget_ref (repos_puturl_entry);
  gtk_object_set_data_full (GTK_OBJECT (repos_prop_window), "repos_puturl_entry", repos_puturl_entry,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (repos_puturl_entry);
  gtk_table_attach (GTK_TABLE (repos_addr_gui_table), repos_puturl_entry, 1, 2, 1, 2,
                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_tooltips_set_tip (tooltips, repos_puturl_entry, "URL of repository PUT requests", NULL);

  repos_account_frame = gtk_frame_new ("Account");
  gtk_widget_set_name (repos_account_frame, "repos_account_frame");
  gtk_widget_ref (repos_account_frame);
  gtk_object_set_data_full (GTK_OBJECT (repos_prop_window), "repos_account_frame", repos_account_frame,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (repos_account_frame);
  gtk_box_pack_start (GTK_BOX (repos_vbox), repos_account_frame, FALSE, TRUE, 0);

  repos_account_gui_table = gtk_table_new (4, 2, FALSE);
  gtk_widget_set_name (repos_account_gui_table, "repos_account_gui_table");
  gtk_widget_ref (repos_account_gui_table);
  gtk_object_set_data_full (GTK_OBJECT (repos_prop_window), "repos_account_gui_table", repos_account_gui_table,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (repos_account_gui_table);
  gtk_container_add (GTK_CONTAINER (repos_account_frame), repos_account_gui_table);
  gtk_table_set_row_spacings (GTK_TABLE (repos_account_gui_table), 2);

  repos_harv_user_prompt = gtk_label_new ("Username");
  gtk_widget_set_name (repos_harv_user_prompt, "repos_harv_user_prompt");
  gtk_widget_ref (repos_harv_user_prompt);
  gtk_object_set_data_full (GTK_OBJECT (repos_prop_window), "repos_harv_user_prompt", repos_harv_user_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (repos_harv_user_prompt);
  gtk_table_attach (GTK_TABLE (repos_account_gui_table), repos_harv_user_prompt, 0, 1, 0, 1,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_label_set_justify (GTK_LABEL (repos_harv_user_prompt), GTK_JUSTIFY_LEFT);
  gtk_misc_set_alignment (GTK_MISC (repos_harv_user_prompt), 0, 0.5);
  gtk_misc_set_padding (GTK_MISC (repos_harv_user_prompt), 10, 0);

  repos_harv_user_entry = gtk_entry_new_with_max_length (16);
  gtk_widget_set_name (repos_harv_user_entry, "repos_harv_user_entry");
  gtk_widget_ref (repos_harv_user_entry);
  gtk_object_set_data_full (GTK_OBJECT (repos_prop_window), "repos_harv_user_entry", repos_harv_user_entry,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (repos_harv_user_entry);
  gtk_table_attach (GTK_TABLE (repos_account_gui_table), repos_harv_user_entry, 1, 2, 0, 1,
                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_tooltips_set_tip (tooltips, repos_harv_user_entry, "Repository username", NULL);

  repos_harv_pw_prompt = gtk_label_new ("Password");
  gtk_widget_set_name (repos_harv_pw_prompt, "repos_harv_pw_prompt");
  gtk_widget_ref (repos_harv_pw_prompt);
  gtk_object_set_data_full (GTK_OBJECT (repos_prop_window), "repos_harv_pw_prompt", repos_harv_pw_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (repos_harv_pw_prompt);
  gtk_table_attach (GTK_TABLE (repos_account_gui_table), repos_harv_pw_prompt, 0, 1, 1, 2,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_label_set_justify (GTK_LABEL (repos_harv_pw_prompt), GTK_JUSTIFY_LEFT);
  gtk_misc_set_alignment (GTK_MISC (repos_harv_pw_prompt), 0, 0.5);
  gtk_misc_set_padding (GTK_MISC (repos_harv_pw_prompt), 10, 0);

  repos_harv_org_prompt = gtk_label_new ("Organisation");
  gtk_widget_set_name (repos_harv_org_prompt, "repos_harv_org_prompt");
  gtk_widget_ref (repos_harv_org_prompt);
  gtk_object_set_data_full (GTK_OBJECT (repos_prop_window), "repos_harv_org_prompt", repos_harv_org_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (repos_harv_org_prompt);
  gtk_table_attach (GTK_TABLE (repos_account_gui_table), repos_harv_org_prompt, 0, 1, 2, 3,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_label_set_justify (GTK_LABEL (repos_harv_org_prompt), GTK_JUSTIFY_LEFT);
  gtk_misc_set_alignment (GTK_MISC (repos_harv_org_prompt), 0, 0.5);
  gtk_misc_set_padding (GTK_MISC (repos_harv_org_prompt), 10, 0);

  repos_harv_pw_entry = gtk_entry_new_with_max_length (16);
  gtk_widget_set_name (repos_harv_pw_entry, "repos_harv_pw_entry");
  gtk_widget_ref (repos_harv_pw_entry);
  gtk_object_set_data_full (GTK_OBJECT (repos_prop_window), "repos_harv_pw_entry", repos_harv_pw_entry,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (repos_harv_pw_entry);
  gtk_table_attach (GTK_TABLE (repos_account_gui_table), repos_harv_pw_entry, 1, 2, 1, 2,
                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_tooltips_set_tip (tooltips, repos_harv_pw_entry, "Repository password", NULL);
  gtk_entry_set_visibility (GTK_ENTRY (repos_harv_pw_entry), FALSE);

  repos_harv_org_entry = gtk_entry_new_with_max_length (16);
  gtk_widget_set_name (repos_harv_org_entry, "repos_harv_org_entry");
  gtk_widget_ref (repos_harv_org_entry);
  gtk_object_set_data_full (GTK_OBJECT (repos_prop_window), "repos_harv_org_entry", repos_harv_org_entry,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (repos_harv_org_entry);
  gtk_table_attach (GTK_TABLE (repos_account_gui_table), repos_harv_org_entry, 1, 2, 2, 3,
                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_tooltips_set_tip (tooltips, repos_harv_org_entry, "Repository organisation name, where provided by administrators. Otherwise leave blank", NULL);

  repos_key_entry = gtk_text_new (NULL, NULL);
  gtk_widget_set_name (repos_key_entry, "repos_key_entry");
  gtk_widget_ref (repos_key_entry);
  gtk_object_set_data_full (GTK_OBJECT (repos_prop_window), "repos_key_entry", repos_key_entry,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (repos_key_entry);
  gtk_table_attach (GTK_TABLE (repos_account_gui_table), repos_key_entry, 1, 2, 3, 4,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL), 0, 0);
  gtk_widget_set_usize (repos_key_entry, -2, 100);
  gtk_tooltips_set_tip (tooltips, repos_key_entry, "Security key, used to identify this client as authentic.", NULL);
  gtk_text_set_editable (GTK_TEXT (repos_key_entry), TRUE);

  repos_key_prompt = gtk_label_new ("Security key");
  gtk_widget_set_name (repos_key_prompt, "repos_key_prompt");
  gtk_widget_ref (repos_key_prompt);
  gtk_object_set_data_full (GTK_OBJECT (repos_prop_window), "repos_key_prompt", repos_key_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (repos_key_prompt);
  gtk_table_attach (GTK_TABLE (repos_account_gui_table), repos_key_prompt, 0, 1, 3, 4,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (GTK_FILL), 0, 0);
  gtk_label_set_justify (GTK_LABEL (repos_key_prompt), GTK_JUSTIFY_LEFT);
  gtk_misc_set_alignment (GTK_MISC (repos_key_prompt), 0, 0);
  gtk_misc_set_padding (GTK_MISC (repos_key_prompt), 10, 0);

  repos_auth_frame = gtk_frame_new ("Authorisation");
  gtk_widget_set_name (repos_auth_frame, "repos_auth_frame");
  gtk_widget_ref (repos_auth_frame);
  gtk_object_set_data_full (GTK_OBJECT (repos_prop_window), "repos_auth_frame", repos_auth_frame,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (repos_auth_frame);
  gtk_box_pack_start (GTK_BOX (repos_vbox), repos_auth_frame, FALSE, TRUE, 0);

  repos_auth_gui_table = gtk_table_new (6, 2, FALSE);
  gtk_widget_set_name (repos_auth_gui_table, "repos_auth_gui_table");
  gtk_widget_ref (repos_auth_gui_table);
  gtk_object_set_data_full (GTK_OBJECT (repos_prop_window), "repos_auth_gui_table", repos_auth_gui_table,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (repos_auth_gui_table);
  gtk_container_add (GTK_CONTAINER (repos_auth_frame), repos_auth_gui_table);
  gtk_table_set_row_spacings (GTK_TABLE (repos_auth_gui_table), 2);

  repos_realm_user_prompt = gtk_label_new ("Realm username");
  gtk_widget_set_name (repos_realm_user_prompt, "repos_realm_user_prompt");
  gtk_widget_ref (repos_realm_user_prompt);
  gtk_object_set_data_full (GTK_OBJECT (repos_prop_window), "repos_realm_user_prompt", repos_realm_user_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (repos_realm_user_prompt);
  gtk_table_attach (GTK_TABLE (repos_auth_gui_table), repos_realm_user_prompt, 0, 1, 0, 1,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_label_set_justify (GTK_LABEL (repos_realm_user_prompt), GTK_JUSTIFY_LEFT);
  gtk_misc_set_alignment (GTK_MISC (repos_realm_user_prompt), 0, 0.5);
  gtk_misc_set_padding (GTK_MISC (repos_realm_user_prompt), 10, 0);

  repos_realm_pw_prompt = gtk_label_new ("Realm password");
  gtk_widget_set_name (repos_realm_pw_prompt, "repos_realm_pw_prompt");
  gtk_widget_ref (repos_realm_pw_prompt);
  gtk_object_set_data_full (GTK_OBJECT (repos_prop_window), "repos_realm_pw_prompt", repos_realm_pw_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (repos_realm_pw_prompt);
  gtk_table_attach (GTK_TABLE (repos_auth_gui_table), repos_realm_pw_prompt, 0, 1, 1, 2,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_label_set_justify (GTK_LABEL (repos_realm_pw_prompt), GTK_JUSTIFY_LEFT);
  gtk_misc_set_alignment (GTK_MISC (repos_realm_pw_prompt), 0, 0.5);
  gtk_misc_set_padding (GTK_MISC (repos_realm_pw_prompt), 10, 0);

  repos_realm_proxy_host_prompt = gtk_label_new ("Proxy host");
  gtk_widget_set_name (repos_realm_proxy_host_prompt, "repos_realm_proxy_host_prompt");
  gtk_widget_ref (repos_realm_proxy_host_prompt);
  gtk_object_set_data_full (GTK_OBJECT (repos_prop_window), "repos_realm_proxy_host_prompt", repos_realm_proxy_host_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (repos_realm_proxy_host_prompt);
  gtk_table_attach (GTK_TABLE (repos_auth_gui_table), repos_realm_proxy_host_prompt, 0, 1, 2, 3,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_label_set_justify (GTK_LABEL (repos_realm_proxy_host_prompt), GTK_JUSTIFY_LEFT);
  gtk_misc_set_alignment (GTK_MISC (repos_realm_proxy_host_prompt), 0, 0.5);
  gtk_misc_set_padding (GTK_MISC (repos_realm_proxy_host_prompt), 10, 0);

  repos_proxy_port_prompt = gtk_label_new ("Proxy port");
  gtk_widget_set_name (repos_proxy_port_prompt, "repos_proxy_port_prompt");
  gtk_widget_ref (repos_proxy_port_prompt);
  gtk_object_set_data_full (GTK_OBJECT (repos_prop_window), "repos_proxy_port_prompt", repos_proxy_port_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (repos_proxy_port_prompt);
  gtk_table_attach (GTK_TABLE (repos_auth_gui_table), repos_proxy_port_prompt, 0, 1, 3, 4,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_label_set_justify (GTK_LABEL (repos_proxy_port_prompt), GTK_JUSTIFY_LEFT);
  gtk_misc_set_alignment (GTK_MISC (repos_proxy_port_prompt), 0, 0.5);
  gtk_misc_set_padding (GTK_MISC (repos_proxy_port_prompt), 10, 0);

  repos_proxy_user_prompt = gtk_label_new ("Proxy username");
  gtk_widget_set_name (repos_proxy_user_prompt, "repos_proxy_user_prompt");
  gtk_widget_ref (repos_proxy_user_prompt);
  gtk_object_set_data_full (GTK_OBJECT (repos_prop_window), "repos_proxy_user_prompt", repos_proxy_user_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (repos_proxy_user_prompt);
  gtk_table_attach (GTK_TABLE (repos_auth_gui_table), repos_proxy_user_prompt, 0, 1, 4, 5,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_label_set_justify (GTK_LABEL (repos_proxy_user_prompt), GTK_JUSTIFY_LEFT);
  gtk_misc_set_alignment (GTK_MISC (repos_proxy_user_prompt), 0, 0.5);
  gtk_misc_set_padding (GTK_MISC (repos_proxy_user_prompt), 10, 0);

  repos_proxy_pw_prompt = gtk_label_new ("Proxy password");
  gtk_widget_set_name (repos_proxy_pw_prompt, "repos_proxy_pw_prompt");
  gtk_widget_ref (repos_proxy_pw_prompt);
  gtk_object_set_data_full (GTK_OBJECT (repos_prop_window), "repos_proxy_pw_prompt", repos_proxy_pw_prompt,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (repos_proxy_pw_prompt);
  gtk_table_attach (GTK_TABLE (repos_auth_gui_table), repos_proxy_pw_prompt, 0, 1, 5, 6,
                    (GtkAttachOptions) (GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_label_set_justify (GTK_LABEL (repos_proxy_pw_prompt), GTK_JUSTIFY_LEFT);
  gtk_misc_set_alignment (GTK_MISC (repos_proxy_pw_prompt), 0, 0.5);
  gtk_misc_set_padding (GTK_MISC (repos_proxy_pw_prompt), 10, 0);

  repos_realm_user_entry = gtk_entry_new_with_max_length (16);
  gtk_widget_set_name (repos_realm_user_entry, "repos_realm_user_entry");
  gtk_widget_ref (repos_realm_user_entry);
  gtk_object_set_data_full (GTK_OBJECT (repos_prop_window), "repos_realm_user_entry", repos_realm_user_entry,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (repos_realm_user_entry);
  gtk_table_attach (GTK_TABLE (repos_auth_gui_table), repos_realm_user_entry, 1, 2, 0, 1,
                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_tooltips_set_tip (tooltips, repos_realm_user_entry, "Optional realm username, where provided by administrators. This is an additional level of access security and should be left blank if you do not have one", NULL);

  repos_realm_pw_entry = gtk_entry_new_with_max_length (16);
  gtk_widget_set_name (repos_realm_pw_entry, "repos_realm_pw_entry");
  gtk_widget_ref (repos_realm_pw_entry);
  gtk_object_set_data_full (GTK_OBJECT (repos_prop_window), "repos_realm_pw_entry", repos_realm_pw_entry,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (repos_realm_pw_entry);
  gtk_table_attach (GTK_TABLE (repos_auth_gui_table), repos_realm_pw_entry, 1, 2, 1, 2,
                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_tooltips_set_tip (tooltips, repos_realm_pw_entry, "Optional realm password, where provided by administrators. This is an additional level of access security and should be left blank if you do not have one", NULL);
  gtk_entry_set_visibility (GTK_ENTRY (repos_realm_pw_entry), FALSE);

  repos_proxy_pw_entry = gtk_entry_new_with_max_length (16);
  gtk_widget_set_name (repos_proxy_pw_entry, "repos_proxy_pw_entry");
  gtk_widget_ref (repos_proxy_pw_entry);
  gtk_object_set_data_full (GTK_OBJECT (repos_prop_window), "repos_proxy_pw_entry", repos_proxy_pw_entry,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (repos_proxy_pw_entry);
  gtk_table_attach (GTK_TABLE (repos_auth_gui_table), repos_proxy_pw_entry, 1, 2, 5, 6,
                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_tooltips_set_tip (tooltips, repos_proxy_pw_entry, "Password of proxy account", NULL);
  gtk_entry_set_visibility (GTK_ENTRY (repos_proxy_pw_entry), FALSE);

  repos_proxy_user_entry = gtk_entry_new_with_max_length (16);
  gtk_widget_set_name (repos_proxy_user_entry, "repos_proxy_user_entry");
  gtk_widget_ref (repos_proxy_user_entry);
  gtk_object_set_data_full (GTK_OBJECT (repos_prop_window), "repos_proxy_user_entry", repos_proxy_user_entry,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (repos_proxy_user_entry);
  gtk_table_attach (GTK_TABLE (repos_auth_gui_table), repos_proxy_user_entry, 1, 2, 4, 5,
                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_tooltips_set_tip (tooltips, repos_proxy_user_entry, "Username of proxy account", NULL);

  repos_proxy_host_entry = gtk_entry_new_with_max_length (255);
  gtk_widget_set_name (repos_proxy_host_entry, "repos_proxy_host_entry");
  gtk_widget_ref (repos_proxy_host_entry);
  gtk_object_set_data_full (GTK_OBJECT (repos_prop_window), "repos_proxy_host_entry", repos_proxy_host_entry,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (repos_proxy_host_entry);
  gtk_table_attach (GTK_TABLE (repos_auth_gui_table), repos_proxy_host_entry, 1, 2, 2, 3,
                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_tooltips_set_tip (tooltips, repos_proxy_host_entry, "Name of proxy host needed to reach the repository if it resides on the Internet or behind and internal firewall. Leave blank if you connect directly", NULL);

  repos_proxy_port_entry = gtk_entry_new_with_max_length (6);
  gtk_widget_set_name (repos_proxy_port_entry, "repos_proxy_port_entry");
  gtk_widget_ref (repos_proxy_port_entry);
  gtk_object_set_data_full (GTK_OBJECT (repos_prop_window), "repos_proxy_port_entry", repos_proxy_port_entry,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (repos_proxy_port_entry);
  gtk_table_attach (GTK_TABLE (repos_auth_gui_table), repos_proxy_port_entry, 1, 2, 3, 4,
                    (GtkAttachOptions) (GTK_EXPAND | GTK_FILL),
                    (GtkAttachOptions) (0), 0, 0);
  gtk_tooltips_set_tip (tooltips, repos_proxy_port_entry, "Port number of proxy service", NULL);
  gtk_entry_set_text (GTK_ENTRY (repos_proxy_port_entry), "");

  repos_buttons = gtk_hbox_new (TRUE, 5);
  gtk_widget_set_name (repos_buttons, "repos_buttons");
  gtk_widget_ref (repos_buttons);
  gtk_object_set_data_full (GTK_OBJECT (repos_prop_window), "repos_buttons", repos_buttons,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (repos_buttons);
  gtk_box_pack_start (GTK_BOX (repos_vbox), repos_buttons, TRUE, TRUE, 0);
  gtk_container_set_border_width (GTK_CONTAINER (repos_buttons), 10);

  repos_save_action = gtk_button_new_with_label ("Save");
  gtk_widget_set_name (repos_save_action, "repos_save_action");
  gtk_widget_ref (repos_save_action);
  gtk_object_set_data_full (GTK_OBJECT (repos_prop_window), "repos_save_action", repos_save_action,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (repos_save_action);
  gtk_box_pack_start (GTK_BOX (repos_buttons), repos_save_action, FALSE, FALSE, 0);
  gtk_widget_set_usize (repos_save_action, 60, -2);

  repos_save_reset = gtk_button_new_with_label ("Reset");
  gtk_widget_set_name (repos_save_reset, "repos_save_reset");
  gtk_widget_ref (repos_save_reset);
  gtk_object_set_data_full (GTK_OBJECT (repos_prop_window), "repos_save_reset", repos_save_reset,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (repos_save_reset);
  gtk_box_pack_start (GTK_BOX (repos_buttons), repos_save_reset, FALSE, FALSE, 0);
  gtk_widget_set_usize (repos_save_reset, 60, -2);

  repos_cancel_finished = gtk_button_new_with_label ("");
  repos_cancel_finished_key = gtk_label_parse_uline (GTK_LABEL (GTK_BIN (repos_cancel_finished)->child),
                                   "_Finished");
  gtk_widget_add_accelerator (repos_cancel_finished, "clicked", accel_group,
                              repos_cancel_finished_key, GDK_MOD1_MASK, (GtkAccelFlags) 0);
  gtk_widget_set_name (repos_cancel_finished, "repos_cancel_finished");
  gtk_widget_ref (repos_cancel_finished);
  gtk_object_set_data_full (GTK_OBJECT (repos_prop_window), "repos_cancel_finished", repos_cancel_finished,
                            (GtkDestroyNotify) gtk_widget_unref);
  gtk_widget_show (repos_cancel_finished);
  gtk_box_pack_start (GTK_BOX (repos_buttons), repos_cancel_finished, FALSE, FALSE, 0);
  gtk_widget_set_usize (repos_cancel_finished, 60, -2);

  gtk_signal_connect (GTK_OBJECT (repos_enable_check), "toggled",
                      GTK_SIGNAL_FUNC (on_repos_enable_check_toggled),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (repos_save_action), "clicked",
                      GTK_SIGNAL_FUNC (on_repos_save_action_clicked),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (repos_save_reset), "clicked",
                      GTK_SIGNAL_FUNC (on_repos_save_reset_clicked),
                      NULL);
  gtk_signal_connect (GTK_OBJECT (repos_cancel_finished), "clicked",
                      GTK_SIGNAL_FUNC (on_repos_cancel_finished_clicked),
                      NULL);

  gtk_object_set_data (GTK_OBJECT (repos_prop_window), "tooltips", tooltips);

  gtk_window_add_accel_group (GTK_WINDOW (repos_prop_window), accel_group);

  return repos_prop_window;
}

